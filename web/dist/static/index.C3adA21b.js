var e=Object.defineProperty,l=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,o=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,r=(e,r)=>{for(var i in r||(r={}))a.call(r,i)&&o(e,i,r[i]);if(l)for(var i of l(r))t.call(r,i)&&o(e,i,r[i]);return e};import{r as i,ag as s,c as u,o as n,P as d,H as p,u as m,G as c,J as f,L as h,t as g,k as _,h as b,aq as v,a as j,I as y,a4 as w,M as V,n as x}from"./@vue.CQt2tj-6.js";import{P as k}from"./Pagination.8Er6hDxx.js";import{_ as C,A as D,M as O,j as I,d as U,u as P}from"./index.FQhv3U_5.js";import{L as q}from"./dialog.Bsrh65Nu.js";import"./crypto-js.BjUPrIIl.js";import"./js-cookie.Ch5AnFJE.js";import"./clipboard.BBhAuw9K.js";import{a as A,E as L}from"./element-plus.C3E-FvSa.js";import"./axios.BhTbhqQQ.js";import"./vue-clipboard3.c61pm64N.js";import"./pinia.CWB7oRTw.js";import"./@element-plus.CU4brdXH.js";import"./vue-router.BmPBvlxi.js";import"./nprogress.Dzr5m2b3.js";import"./@xterm.C7qPmoRH.js";import"./pinia-plugin-persistedstate.DTf8V5gU.js";import"./destr.ZpApkS-1.js";import"./deep-pick-omit.DP_A4OSP.js";import"./lodash-es.CUM784Py.js";import"./@vueuse.7zPzjEtO.js";import"./@popperjs.DxP-MrnL.js";import"./@ctrl.D-8vaqgC.js";import"./dayjs.BpgH7LzR.js";import"./async-validator.BTKOuuO-.js";import"./memoize-one.Ds0C_khL.js";import"./normalize-wheel-es.BhHBPXsK.js";import"./@floating-ui.D1oRyyfp.js";const R=C({__name:"moduleAdd",emits:["refreshData","closed"],setup(e,{expose:l,emit:a}){const t=a;let o=i(!1),_=i(!1),b=i("\u6dfb\u52a0\u7f51\u7ad9"),v=i({name:"",driver:"bridge",is_auth:!1,url:"",username:"",password:"",protocol:"https"}),j=i([{required:!0,message:"\u6b64\u9879\u5fc5\u586b",trigger:"blur"}]),y=i({name:[{required:!0,message:"\u8bf7\u8f93\u5165\u7f51\u7edc\u540d\u79f0",trigger:"blur"}],url:[{required:!0,message:"\u8bf7\u8f93\u5165\u4ed3\u5e93\u5730\u5740",trigger:"blur"}]});function w(){t("closed")}let V=i(null);function x(){V.value.validate((e=>{if(e){_.value=!0;let e=r({},v.value);D.DockerReposAdd(e).then((e=>{_.value=!1,2e3==e.code?(O(e.msg),w(),t("refreshData")):I(e.msg)}))}}))}return l({handleOpen:function(e,l){b.value=l,o.value=!0}}),(e,l)=>{const a=s("el-input"),t=s("el-form-item"),r=s("el-switch"),i=s("el-col"),k=s("el-row"),C=s("el-radio"),D=s("el-radio-group"),O=s("el-form"),I=s("el-button");return n(),u("div",null,[d(q,{modelValue:m(o),"onUpdate:modelValue":l[6]||(l[6]=e=>g(o)?o.value=e:o=e),title:m(b),width:"680px","before-close":w},{footer:p((()=>[d(I,{onClick:w,loading:m(_)},{default:p((()=>l[9]||(l[9]=[h("\u53d6\u6d88")]))),_:1},8,["loading"]),d(I,{type:"primary",onClick:x,loading:m(_)},{default:p((()=>l[10]||(l[10]=[h("\u4fdd\u5b58")]))),_:1},8,["loading"])])),default:p((()=>[d(O,{inline:!1,model:m(v),rules:m(y),ref_key:"rulesForm",ref:V,"label-position":"right","label-width":"auto"},{default:p((()=>[d(t,{label:"\u4ed3\u5e93\u540d\u79f0\uff1a",prop:"name"},{default:p((()=>[d(a,{clearable:"",placeholder:"\u4ed3\u5e93\u540d\u79f0 \u5982\uff1aruyi",modelValue:m(v).name,"onUpdate:modelValue":l[0]||(l[0]=e=>m(v).name=e)},null,8,["modelValue"])])),_:1}),d(t,{label:"\u662f\u5426\u8ba4\u8bc1\uff1a",prop:"is_auth"},{default:p((()=>[d(r,{modelValue:m(v).is_auth,"onUpdate:modelValue":l[1]||(l[1]=e=>m(v).is_auth=e)},null,8,["modelValue"])])),_:1}),m(v).is_auth?(n(),c(t,{key:0,label:" "},{default:p((()=>[d(k,{gutter:20,style:{width:"100%"}},{default:p((()=>[d(i,{span:12},{default:p((()=>[d(t,{label:"\u7528\u6237\u540d",prop:"username","label-position":"top",rules:m(v).is_auth?m(j):[]},{default:p((()=>[d(a,{modelValue:m(v).username,"onUpdate:modelValue":l[2]||(l[2]=e=>m(v).username=e),placeholder:"\u4ed3\u5e93\u7528\u6237\u540d"},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1}),d(i,{span:12},{default:p((()=>[d(t,{label:"\u5bc6\u7801","label-position":"top",prop:"password",rules:m(v).is_auth?m(j):[]},{default:p((()=>[d(a,{modelValue:m(v).password,"onUpdate:modelValue":l[3]||(l[3]=e=>m(v).password=e),placeholder:"\u4ed3\u5e93\u5bc6\u7801"},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1})])),_:1})])),_:1})):f("",!0),d(t,{label:"\u4ed3\u5e93\u534f\u8bae\uff1a",prop:"protocol"},{default:p((()=>[d(D,{modelValue:m(v).protocol,"onUpdate:modelValue":l[4]||(l[4]=e=>m(v).protocol=e)},{default:p((()=>[d(C,{value:"https"},{default:p((()=>l[7]||(l[7]=[h("https")]))),_:1}),d(C,{value:"http"},{default:p((()=>l[8]||(l[8]=[h("http")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),d(t,{label:"\u4ed3\u5e93\u5730\u5740\uff1a",prop:"url"},{default:p((()=>[d(a,{modelValue:m(v).url,"onUpdate:modelValue":l[5]||(l[5]=e=>m(v).url=e),placeholder:"\u5982\uff1arepo.lybbn.cn"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}},[["__scopeId","data-v-a2326af8"]]),F={class:"handle-top"},M={class:"search-sites-input"},z=C({__name:"index",setup(e,{expose:l}){const a=U(),t=P();let o=_((()=>t.ismobile)),C=i(!1),O=i(null),I=i(!1),q=i({page:1,limit:10}),z=i({page:1,limit:10,total:0}),B=i([]);function E(e){q.value.page=e.page,q.value.limit=e.limit,G()}function G(){C.value=!0;let e=r({},q.value);D.GetDockerReposList(e).then((e=>{C.value=!1,2e3===e.code&&(B.value=e.data.data,z.value.page=e.data.page,z.value.limit=e.data.limit,z.value.total=e.data.total)}))}function S(){q.value.page=1,G()}function T(){I.value=!0,x((()=>{O.value.handleOpen(null,"\u6dfb\u52a0\u4ed3\u5e93")}))}return l({RefreshData:function(){x((()=>{G()}))}}),b((()=>{G()})),(e,l)=>{const t=s("el-button"),r=s("el-col"),i=s("el-input"),_=s("el-row"),b=s("el-table-column"),x=s("el-tag"),U=s("el-table"),P=v("loading");return n(),u("div",null,[j("div",F,[d(_,null,{default:p((()=>[d(r,{xs:24,sm:16,md:16,lg:16,xl:16},{default:p((()=>[d(t,{type:"primary",onClick:T,icon:"plus"},{default:p((()=>l[5]||(l[5]=[h("\u6dfb\u52a0\u4ed3\u5e93")]))),_:1}),d(t,{icon:"refresh",circle:"",onClick:S,style:{"margin-left":"10px"}})])),_:1}),d(r,{xs:24,sm:8,md:8,lg:8,xl:8},{default:p((()=>[j("div",M,[d(i,{modelValue:m(q).search,"onUpdate:modelValue":l[0]||(l[0]=e=>m(q).search=e),clearable:"",onClear:l[1]||(l[1]=e=>S()),"suffix-icon":"Search",onKeyup:l[2]||(l[2]=w((e=>S()),["enter"])),onChange:l[3]||(l[3]=e=>S()),placeholder:"\u641c\u7d22"},null,8,["modelValue"])])])),_:1})])),_:1})]),y((n(),c(U,{data:m(B),style:{width:"100%","border-top":"1px solid var(--el-border-color-lighter)"},"header-cell-class-name":"table-header-style"},{default:p((()=>[d(b,{prop:"name",label:"\u540d\u79f0","min-width":"130","show-overflow-tooltip":""}),d(b,{prop:"protocol",label:"\u534f\u8bae",width:"130"}),d(b,{prop:"url",label:"\u4ed3\u5e93\u5730\u5740","min-width":"130"}),d(b,{prop:"is_auth",label:"\u662f\u5426\u8ba4\u8bc1",width:"120"},{default:p((({row:e})=>[d(x,{type:e.is_auth?"primary":"info"},{default:p((()=>[h(V(e.is_auth?"\u662f":"\u5426"),1)])),_:2},1032,["type"])])),_:1}),d(b,{prop:"create_at",label:"\u521b\u5efa\u65f6\u95f4","min-width":"170"}),d(b,{fixed:!m(o)&&"right",label:"\u64cd\u4f5c",width:"130"},{default:p((e=>[d(t,{link:"",type:"primary",onClick:l=>{return t=e.row,void A.confirm(`\u786e\u5b9a\u8981\u5220\u9664\u3010${t.name}\u3011\u4ed3\u5e93\u5417\uff1f`,"\u8b66\u544a",{closeOnClickModal:!1,cancelButtonText:"\u53d6\u6d88",confirmButtonText:"\u786e\u5b9a",type:"warning"}).then((e=>{a.loadingInfo.isLoading=!0,a.loadingInfo.content="\u5220\u9664\u4e2d...",D.DockerReposDelete({id:t.id}).then((e=>{a.loadingInfo.isLoading=!1,a.loadingInfo.content="",2e3==e.code?(L.success(e.msg),G()):L.warning(e.msg)}))})).catch((()=>{}));var t}},{default:p((()=>l[6]||(l[6]=[h("\u5220\u9664")]))),_:2},1032,["onClick"])])),_:1},8,["fixed"])])),_:1},8,["data"])),[[P,m(C)]]),d(k,{small:!0,"child-msg":m(z),onCallFather:E,border:!1,position:"right"},null,8,["child-msg"]),m(I)?(n(),c(R,{key:0,ref_key:"moduleAddFlag",ref:O,onRefreshData:G,onClosed:l[4]||(l[4]=e=>g(I)?I.value=!1:I=!1)},null,512)):f("",!0)])}}},[["__scopeId","data-v-846071ec"]]);export{z as default};
