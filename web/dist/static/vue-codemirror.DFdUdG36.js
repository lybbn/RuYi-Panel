import{b as e}from"./codemirror.BJSsQESG.js";import{z as t,E as n,o,A as r,B as a,C as u,S as i,D as s}from"./@codemirror.BkM7iGym.js";import{d as c,s as l,l as f,k as d,j as m,e as p,W as v,af as b,ab as g}from"./@vue.BluSRtaz.js";var h,y,O=Object.freeze({autofocus:!1,disabled:!1,indentWithTab:!0,tabSize:2,placeholder:"",autoDestroy:!0,extensions:[e]}),j=Symbol("vue-codemirror-global-config"),S=function(e){var t=new s;return{compartment:t,run:function(n){t.get(e.state)?e.dispatch({effects:t.reconfigure(n)}):e.dispatch({effects:i.appendConfig.of(t.of(n))})}}},x=function(e,t){var n=S(e),o=n.compartment,r=n.run;return function(n){var a=o.get(e.state);r((null!=n?n:a!==t)?t:[])}},C={type:Boolean,default:void 0},D={autofocus:C,disabled:C,indentWithTab:C,tabSize:Number,placeholder:String,style:Object,autoDestroy:C,phrases:Object,root:Object,extensions:Array,selection:Object},U={modelValue:{type:String,default:""}},z=Object.assign(Object.assign({},D),U);(y=h||(h={})).Change="change",y.Update="update",y.Focus="focus",y.Blur="blur",y.Ready="ready",y.ModelUpdate="update:modelValue";var B={};B[h.Change]=function(e,t){return!0},B[h.Update]=function(e){return!0},B[h.Focus]=function(e){return!0},B[h.Blur]=function(e){return!0},B[h.Ready]=function(e){return!0};var w={};w[h.ModelUpdate]=B[h.Change];var F=Object.assign(Object.assign({},B),w),P=c({name:"VueCodemirror",props:Object.assign({},z),emits:Object.assign({},F),setup:function(e,i){var s=l(),c=l(),y=l(),C=Object.assign(Object.assign({},O),f(j,{})),D=d((function(){var t={};return Object.keys(g(e)).forEach((function(n){var o;"modelValue"!==n&&(t[n]=null!==(o=e[n])&&void 0!==o?o:C[n])})),t}));return m((function(){var l,f;c.value=function(e){var o=e.onUpdate,r=e.onChange,a=e.onFocus,u=e.onBlur,i=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}(e,["onUpdate","onChange","onFocus","onBlur"]);return n.create({doc:i.doc,selection:i.selection,extensions:(Array.isArray(i.extensions)?i.extensions:[i.extensions]).concat([t.updateListener.of((function(e){o(e),e.docChanged&&r(e.state.doc.toString(),e),e.focusChanged&&(e.view.hasFocus?a(e):u(e))}))])})}({doc:e.modelValue,selection:D.value.selection,extensions:null!==(l=C.extensions)&&void 0!==l?l:[],onFocus:function(e){return i.emit(h.Focus,e)},onBlur:function(e){return i.emit(h.Blur,e)},onUpdate:function(e){return i.emit(h.Update,e)},onChange:function(t,n){t!==e.modelValue&&(i.emit(h.Change,t,n),i.emit(h.ModelUpdate,t,n))}}),y.value=(f={state:c.value,parent:s.value,root:D.value.root},new t(Object.assign({},f)));var d=function(e){var i=function(){return e.state.doc.toString()},s=S(e).run,c=x(e,[t.editable.of(!1),n.readOnly.of(!0)]),l=x(e,o.of([r])),f=S(e).run,d=S(e).run,m=S(e).run,p=S(e).run;return{focus:function(){return e.focus()},getDoc:i,setDoc:function(t){t!==i()&&e.dispatch({changes:{from:0,to:e.state.doc.length,insert:t}})},reExtensions:s,toggleDisabled:c,toggleIndentWithTab:l,setTabSize:function(e){f([n.tabSize.of(e),a.of(" ".repeat(e))])},setPhrases:function(e){d([n.phrases.of(e)])},setPlaceholder:function(e){m(u(e))},setStyle:function(e){void 0===e&&(e={}),p(t.theme({"&":Object.assign({},e)}))}}}(y.value);p((function(){return e.modelValue}),(function(e){e!==d.getDoc()&&d.setDoc(e)})),p((function(){return e.extensions}),(function(e){return d.reExtensions(e||[])}),{immediate:!0}),p((function(){return D.value.disabled}),(function(e){return d.toggleDisabled(e)}),{immediate:!0}),p((function(){return D.value.indentWithTab}),(function(e){return d.toggleIndentWithTab(e)}),{immediate:!0}),p((function(){return D.value.tabSize}),(function(e){return d.setTabSize(e)}),{immediate:!0}),p((function(){return D.value.phrases}),(function(e){return d.setPhrases(e||{})}),{immediate:!0}),p((function(){return D.value.placeholder}),(function(e){return d.setPlaceholder(e)}),{immediate:!0}),p((function(){return D.value.style}),(function(e){return d.setStyle(e)}),{immediate:!0}),D.value.autofocus&&d.focus(),i.emit(h.Ready,{state:c.value,view:y.value,container:s.value})})),v((function(){D.value.autoDestroy&&y.value&&function(e){e.destroy()}(y.value)})),function(){return b("div",{class:"v-codemirror",style:{display:"contents"},ref:s})}}}),T=P;export{T};
