var e=Object.defineProperty,l=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,n=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,o=(e,o)=>{for(var s in o||(o={}))a.call(o,s)&&n(e,s,o[s]);if(l)for(var s of l(o))t.call(o,s)&&n(e,s,o[s]);return e};import{r as s,ag as u,c as i,o as r,P as d,H as c,u as m,G as p,J as f,L as v,t as y,i as h,h as g,W as b,aq as k,a as _,D as C,I as x,M as V,V as w,C as j,O as T,a6 as E,a4 as U,Q as z,T as D,n as O}from"./@vue.CQt2tj-6.js";import{w as L,i as q,A as F,_ as I,t as R,h as S}from"./index.9wSm1W-X.js";import{l as W}from"./index.CwpTJOPX.js";import{L as B}from"./dialog.sg3oaGqx.js";import{E as A,a as P}from"./element-plus.C3E-FvSa.js";import"./axios.BhTbhqQQ.js";import"./crypto-js.BjUPrIIl.js";import"./@xterm.C7qPmoRH.js";import"./js-cookie.Ch5AnFJE.js";import"./vue-clipboard3.c61pm64N.js";import"./clipboard.BBhAuw9K.js";import"./pinia.CWB7oRTw.js";import"./@element-plus.CU4brdXH.js";import"./vue-router.BmPBvlxi.js";import"./nprogress.Dzr5m2b3.js";import"./pinia-plugin-persistedstate.DTf8V5gU.js";import"./destr.ZpApkS-1.js";import"./deep-pick-omit.DP_A4OSP.js";import"./lodash-es.CUM784Py.js";import"./@vueuse.7zPzjEtO.js";import"./@popperjs.DxP-MrnL.js";import"./@ctrl.D-8vaqgC.js";import"./dayjs.BpgH7LzR.js";import"./async-validator.BTKOuuO-.js";import"./memoize-one.Ds0C_khL.js";import"./normalize-wheel-es.BhHBPXsK.js";import"./@floating-ui.D1oRyyfp.js";const M={__name:"moduleServer",emits:["refreshData","closed","refreshConnect"],setup(e,{expose:l,emit:a}){const t=a;let n=s(!1),h=s(!1),g=s(""),b=s({username:"root",port:22,host:"",type:0,remark:"",password:"",pkey_passwd:"",pkey:""}),k=s({host:[{required:!0,validator:L,trigger:"blur"}],port:[{required:!0,message:"\u8bf7\u8f93\u5165\u7aef\u53e3\u53f7",trigger:"blur"}],username:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",trigger:"blur"}]});function _(){t("closed")}let C=s(null);function x(e=!1){C.value.validate((l=>{if(l){h.value=!0;let l=o({},b.value);if("1"===l.type&&""==l.pkey)return h.value=!1,void A.warning("\u79d8\u94a5\u4e0d\u80fd\u4e3a\u7a7a");b.value.id?F.sysTerminalEdit(l).then((l=>{h.value=!1,2e3==l.code?(A.success(l.msg),_(),e?t("refreshConnect",l.data.id,l.data.host):t("refreshData")):A.warning(l.msg)})):F.sysTerminalAdd(l).then((l=>{h.value=!1,2e3==l.code?(A.success(l.msg),_(),e?t("refreshConnect",l.data.id,l.data.host):t("refreshData")):A.warning(l.msg)}))}}))}return l({handleOpen:function(e,l){g.value=l,n.value=!0,e&&(b.value=q(e))}}),(e,l)=>{const a=u("el-input"),t=u("el-form-item"),o=u("el-input-number"),s=u("el-radio-button"),V=u("el-radio-group"),w=u("el-form"),j=u("el-button");return r(),i("div",null,[d(B,{modelValue:m(n),"onUpdate:modelValue":l[10]||(l[10]=e=>y(n)?n.value=e:n=e),title:m(g),width:"560px","before-close":_,showFullScreen:!1},{footer:c((()=>[d(j,{onClick:_,loading:m(h)},{default:c((()=>l[13]||(l[13]=[v("\u53d6\u6d88")]))),_:1},8,["loading"]),d(j,{type:"primary",onClick:l[8]||(l[8]=e=>x(!1)),loading:m(h)},{default:c((()=>l[14]||(l[14]=[v("\u4fdd\u5b58")]))),_:1},8,["loading"]),d(j,{type:"primary",onClick:l[9]||(l[9]=e=>x(!0)),loading:m(h)},{default:c((()=>l[15]||(l[15]=[v("\u4fdd\u5b58\u5e76\u8fde\u63a5")]))),_:1},8,["loading"])])),default:c((()=>[d(w,{inline:!1,model:m(b),rules:m(k),ref_key:"rulesForm",ref:C,"label-position":"right","label-width":"auto"},{default:c((()=>[d(t,{label:"\u670d\u52a1\u5668IP\uff1a",prop:"host"},{default:c((()=>[d(a,{modelValue:m(b).host,"onUpdate:modelValue":l[0]||(l[0]=e=>m(b).host=e),clearable:""},null,8,["modelValue"])])),_:1}),d(t,{label:"\u7aef\u53e3\u53f7\uff1a",prop:"port"},{default:c((()=>[d(o,{modelValue:m(b).port,"onUpdate:modelValue":l[1]||(l[1]=e=>m(b).port=e),min:1,max:65536,style:{width:"100%"}},null,8,["modelValue"])])),_:1}),d(t,{label:"\u7528\u6237\u540d\uff1a",prop:"username"},{default:c((()=>[d(a,{modelValue:m(b).username,"onUpdate:modelValue":l[2]||(l[2]=e=>m(b).username=e),clearable:""},null,8,["modelValue"])])),_:1}),d(t,{label:"\u9a8c\u8bc1\u65b9\u5f0f\uff1a",prop:"type",class:"is-required"},{default:c((()=>[d(V,{modelValue:m(b).type,"onUpdate:modelValue":l[3]||(l[3]=e=>m(b).type=e)},{default:c((()=>[d(s,{value:0},{default:c((()=>l[11]||(l[11]=[v("\u5bc6\u7801\u9a8c\u8bc1")]))),_:1}),d(s,{value:1},{default:c((()=>l[12]||(l[12]=[v("\u79c1\u94a5\u9a8c\u8bc1")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),"0"==m(b).type?(r(),p(t,{key:0,label:"\u5bc6\u7801\uff1a",prop:"password",class:"is-required"},{default:c((()=>[d(a,{modelValue:m(b).password,"onUpdate:modelValue":l[4]||(l[4]=e=>m(b).password=e),"show-password":!0,clearable:""},null,8,["modelValue"])])),_:1})):f("",!0),"1"==m(b).type?(r(),p(t,{key:1,label:"\u79c1\u94a5\uff1a",prop:"pkey",class:"is-required"},{default:c((()=>[d(a,{modelValue:m(b).pkey,"onUpdate:modelValue":l[5]||(l[5]=e=>m(b).pkey=e),type:"textarea",rows:2,clearable:""},null,8,["modelValue"])])),_:1})):f("",!0),"1"==m(b).type?(r(),p(t,{key:2,label:"\u79c1\u94a5\u5bc6\u7801\uff1a",prop:"pkey_passwd"},{default:c((()=>[d(a,{modelValue:m(b).pkey_passwd,"onUpdate:modelValue":l[6]||(l[6]=e=>m(b).pkey_passwd=e),clearable:""},null,8,["modelValue"])])),_:1})):f("",!0),d(t,{label:"\u5907\u6ce8\uff1a",prop:"remark"},{default:c((()=>[d(a,{modelValue:m(b).remark,"onUpdate:modelValue":l[7]||(l[7]=e=>m(b).remark=e),type:"textarea",rows:2},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}},N={__name:"moduleCommonCommand",emits:["refreshData","closed","refreshConnect"],setup(e,{expose:l,emit:a}){const t=a;let n=s(!1),p=s(!1),f=s(""),h=s({username:"",port:22,host:"",type:"0",remark:"",password:"",pkey_passwd:"",pkey:""}),g=s({name:[{required:!0,message:"\u8bf7\u8f93\u5165\u547d\u4ee4\u540d\u79f0",trigger:"blur"}],shell:[{required:!0,message:"\u8bf7\u8f93\u5165\u5e38\u7528\u547d\u4ee4",trigger:"blur"}]});function b(){t("closed")}let k=s(null);function _(){k.value.validate((e=>{if(e){p.value=!0;let e=o({},h.value);h.value.id?F.sysCommonCommandEdit(e).then((e=>{p.value=!1,2e3==e.code?(A.success(e.msg),b(),t("refreshData")):A.warning(e.msg)})):F.sysCommonCommandAdd(e).then((e=>{p.value=!1,2e3==e.code?(A.success(e.msg),b(),t("refreshData")):A.warning(e.msg)}))}}))}return l({handleOpen:function(e,l){f.value=l,n.value=!0,e&&(h.value=q(e))}}),(e,l)=>{const a=u("el-input"),t=u("el-form-item"),o=u("el-form"),s=u("el-button");return r(),i("div",null,[d(B,{modelValue:m(n),"onUpdate:modelValue":l[2]||(l[2]=e=>y(n)?n.value=e:n=e),title:m(f),width:"560px","before-close":b,showFullScreen:!1},{footer:c((()=>[d(s,{onClick:b,loading:m(p)},{default:c((()=>l[3]||(l[3]=[v("\u53d6\u6d88")]))),_:1},8,["loading"]),d(s,{type:"primary",onClick:_,loading:m(p)},{default:c((()=>l[4]||(l[4]=[v("\u4fdd\u5b58")]))),_:1},8,["loading"])])),default:c((()=>[d(o,{inline:!1,model:m(h),rules:m(g),ref_key:"rulesForm",ref:k,"label-position":"right","label-width":"auto"},{default:c((()=>[d(t,{label:"\u547d\u4ee4\u540d\u79f0\uff1a",prop:"name"},{default:c((()=>[d(a,{modelValue:m(h).name,"onUpdate:modelValue":l[0]||(l[0]=e=>m(h).name=e),clearable:""},null,8,["modelValue"])])),_:1}),d(t,{label:"\u5e38\u7528\u547d\u4ee4\uff1a",prop:"shell"},{default:c((()=>[d(a,{modelValue:m(h).shell,"onUpdate:modelValue":l[1]||(l[1]=e=>m(h).shell=e),type:"textarea",autosize:{minRows:4,maxRows:8}},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}},X={class:"lyterminal-container-left"},$={class:"common-head"},Y={class:"custom-tree-node"},K={class:"label icon-linux"},G={class:"dotips"},H={key:0,class:"commoncmd-list"},J={class:"common-head"},Q={class:"custom-tree-node"},Z={class:"label"},ee={class:"dotips"},le={class:"lyterminal-container-right"},ae={class:"ruyi-tabs-label"},te={class:"select-command"},ne={key:3,class:"emptyTips"},oe=I({__name:"index",setup(e){let l=s(!1),a=s(!1),t=s(""),n=s(""),o=s("serverList"),L=s(""),q=s([]),I=s(0),B=s(!0),oe=s(null),se=s(!1),ue=s(null),ie=s(""),re=s(""),de=s({label:"host"}),ce=s({label:"name"}),me=s([]),pe=s(!1),fe=s(0),ve=s(0),ye=s(-1);function he(){pe.value=!1}function ge(e){O((()=>{we.value[je(e)].handleXtermResize()}))}function be(e,l){if("add"!==l&&"remove"===l){we.value[je(e)].onClose();const l=q.value;let a=L.value;a===e&&l.forEach(((t,n)=>{if(t.index===e){const e=l[n+1]||l[n-1];e&&(a=e.index)}})),L.value=a,q.value=l.filter((l=>l.index!==e))}}function ke(){if(ye.value>=0)for(let e=0;e<q.value.length;e++)if(q.value[e].index==ye.value){Me({id:q.value[e].id,host:q.value[e].title}),he();break}}function _e(e){if(ye.value>=0)if("all"===e){for(const e in we.value)we.value[e].onClose();L.value="",q.value=[],we.value={}}else if("other"===e){for(const l in we.value)je(ye.value)!==l&&we.value[l].onClose();const e=q.value;L.value=ye.value,q.value=e.filter((e=>e.index===ye.value))}else be(ye.value,"remove");he()}function Ce(e){const l=document.querySelector(".contextmenu"),a=!!l&&l.contains(e.target),t=e.target.classList.contains("contextmenu");a||t||he()}let xe=s(!1),Ve=s(!1),we=s({});const je=e=>`lyxterm-${e}`;function Te(){B.value=!B.value,setTimeout((()=>{window.dispatchEvent(new Event("resize"))}),600)}function Ee(e){"commonCmd"===e.props.name?(Le.value=[],Ie()):"serverList"===e.props.name&&(me.value=[],De())}let Ue=s(null);function ze(){xe.value=!0,O((()=>{Ue.value.handleOpen(null,"\u6dfb\u52a0\u670d\u52a1\u5668")}))}function De(){se.value=!0,F.sysTerminal({page:1,limit:999}).then((e=>{se.value=!1,2e3===e.code&&(me.value=e.data.data)}))}let Oe=s(!1),Le=s([]),qe=s(null),Fe=s(null);function Ie(){Oe.value=!0,F.sysCommonCommand({page:1,limit:999}).then((e=>{Oe.value=!1,2e3===e.code&&(Le.value=e.data.data)}))}function Re(e,l){"add"===l?(Ve.value=!0,O((()=>{qe.value.handleOpen(null,"\u6dfb\u52a0\u5e38\u7528\u547d\u4ee4")}))):"edit"===l?(Ve.value=!0,O((()=>{qe.value.handleOpen(e,"\u7f16\u8f91\u5e38\u7528\u547d\u4ee4")}))):"del"===l&&P.confirm(`\u786e\u5b9a\u5220\u9664 ${e.name} \u9879\u5417\uff1f`,"\u63d0\u793a",{type:"warning",confirmButtonText:"\u786e\u5b9a",cancelButtonText:"\u53d6\u6d88"}).then((()=>{Oe.value=!0,F.sysCommonCommandDelete({id:e.id}).then((l=>{if(Oe.value=!1,2e3==l.code){var a=Fe.value.getCurrentKey();Fe.value.remove(e.id),a==e.id&&(Ie(),A.success("\u5220\u9664\u6210\u529f"))}else P.alert(l.msg,"\u63d0\u793a",{type:"error"})}))})).catch((()=>{}))}function Se(e,l){return!e||-1!==(l.host+l.value).indexOf(e)}function We(e,l){return!e||-1!==(l.name+l.value).indexOf(e)}function Be(e){Me(e)}function Ae(e){if("addNewTabs"===e)return ze(),!1}function Pe(){q.value.length>0&&q.value.forEach((e=>{let l=we.value[je(e.index)];l&&(e.status=l.isWebSocketOpen()?"online":"closed",e.delayTime=l.getDelay()||0)}))}function Me(e){const l=e.id,a=e.host;q.value.push({id:l,index:I.value,title:a,status:"online",delayTime:0}),L.value=I.value,O((()=>{we.value[je(L.value)].init("api/webssh/",`id=${l}`,"","")})),Pe(),I.value++,Le.value.length<1&&Ie()}function Ne(e,l){let a={id:e,host:l};De(),Me(a)}function Xe(e){if(""!==e&&we.value)if(a.value){for(const e in we.value)we.value[e].sendMsg(t.value+"\n");t.value=""}else we.value[je(L.value)]&&we.value[je(L.value)].sendMsg(t.value+"\n"),t.value=""}function $e(){if(""!==n.value&&we.value)if(a.value){for(const e in we.value)we.value[e].sendMsg(n.value+"\n");n.value=""}else we.value[je(L.value)]&&we.value[je(L.value)].sendMsg(n.value+"\n"),n.value=""}let Ye=s(null);function Ke(){R(Ye.value),l.value=!0}function Ge(){S(),l.value=!1}function He(){l.value=!!(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)}return h((()=>ie.value),(e=>{ue.value.filter(e)}),{deep:!0}),h((()=>re.value),(e=>{Fe.value.filter(e)}),{deep:!0}),g((()=>{De(),oe.value=setInterval((()=>{Pe()}),5e3),document.addEventListener("click",Ce),document.addEventListener("fullscreenchange",He)})),b((()=>{document.removeEventListener("click",Ce),document.removeEventListener("fullscreenchange",He),clearInterval(oe.value),oe.value=null,q.value.length>0&&q.value.forEach((e=>{e.delayTime=we.value[je(e.index)].onClose()}))})),(e,s)=>{const h=u("ArrowLeftBold"),g=u("ArrowRightBold"),b=u("el-icon"),I=u("el-button"),R=u("el-input"),S=u("el-empty"),oe=u("el-tooltip"),Ce=u("el-button-group"),Oe=u("el-tree"),He=u("el-main"),Je=u("el-container"),Qe=u("el-tab-pane"),Ze=u("el-tabs"),el=u("FullScreen"),ll=u("Minus"),al=u("circleCheck"),tl=u("el-option"),nl=u("el-select"),ol=u("el-checkbox"),sl=u("Plus"),ul=u("CopyDocument"),il=u("CircleClose"),rl=u("Delete"),dl=u("CircleCloseFilled"),cl=u("Close"),ml=k("loading");return r(),i("div",{class:"lyterminal-container",ref_key:"ruyiTerminal",ref:Ye},[_("div",X,[_("div",{class:C(["lyterminal-hide-action",{active:!m(B)}]),onClick:Te},[d(b,{style:{"vertical-align":"middle"}},{default:c((()=>[m(B)?(r(),p(h,{key:0})):(r(),p(g,{key:1}))])),_:1})],2),d(Ze,{class:"tab-nav",type:"card",stretch:"",modelValue:m(o),"onUpdate:modelValue":s[3]||(s[3]=e=>y(o)?o.value=e:o=e),style:j(B.value?"overflow: auto;height:100%;flex-grow:1":"width: 0px;overflow: hidden;height:100%"),onTabChange:Ee},{default:c((()=>[d(Qe,{label:"\u670d\u52a1\u5668\u5217\u8868",name:"serverList",style:{height:"100%"}},{default:c((()=>["serverList"==m(o)?(r(),p(I,{key:0,type:"primary",style:{"margin-left":"10px"},onClick:ze,size:"small"},{default:c((()=>s[15]||(s[15]=[v("\u6dfb\u52a0\u670d\u52a1\u5668")]))),_:1})):f("",!0),"serverList"==m(o)?(r(),p(Je,{key:1,class:"leftct"},{default:c((()=>[_("div",$,[d(R,{placeholder:"\u8f93\u5165\u5173\u952e\u5b57\u8fdb\u884c\u8fc7\u6ee4",modelValue:m(ie),"onUpdate:modelValue":s[0]||(s[0]=e=>y(ie)?ie.value=e:ie=e),clearable:"",size:"small"},null,8,["modelValue"])]),x((r(),p(He,{class:"nopadding"},{default:c((()=>[d(Oe,{ref_key:"serverListRef",ref:ue,class:"menu","node-key":"id",data:m(me),props:m(de),"highlight-current":!0,"expand-on-click-node":!1,"filter-node-method":Se,onNodeClick:Be},{empty:c((()=>[d(S,{description:"\u6682\u65e0\u6570\u636e"})])),default:c((({node:e,data:l})=>[_("div",Y,[_("div",K,V(e.label),1),_("div",G,[d(Ce,null,{default:c((()=>[d(oe,{effect:"dark",content:"\u8fde\u63a5\u7ec8\u7aef",placement:"top-start"},{default:c((()=>[d(I,{icon:"Connection",size:"small",onClick:w((e=>function(e){Me(e)}(l)),["stop"])},null,8,["onClick"])])),_:2},1024),d(oe,{effect:"dark",content:"\u7f16\u8f91",placement:"top-start"},{default:c((()=>[d(I,{icon:"edit",size:"small",onClick:w((e=>function(e){xe.value=!0,O((()=>{Ue.value.handleOpen(e,"\u7f16\u8f91\u670d\u52a1\u5668")}))}(l)),["stop"])},null,8,["onClick"])])),_:2},1024),d(oe,{effect:"dark",content:"\u5220\u9664",placement:"top-start"},{default:c((()=>[d(I,{icon:"delete",size:"small",onClick:w((e=>function(e,l){P.confirm(`\u786e\u5b9a\u5220\u9664 ${l.host} \u9879\u5417\uff1f`,"\u63d0\u793a",{type:"warning",confirmButtonText:"\u786e\u5b9a",cancelButtonText:"\u53d6\u6d88"}).then((()=>{se.value=!0,F.sysTerminalDelete({id:l.id}).then((e=>{if(se.value=!1,2e3==e.code){var a=ue.value.getCurrentKey();ue.value.remove(l.id),a==l.id&&(De(),A.success("\u5220\u9664\u6210\u529f"))}else P.alert(e.msg,"\u63d0\u793a",{type:"error"})}))})).catch((()=>{}))}(0,l)),["stop"])},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])])])),_:1},8,["data","props"])])),_:1})),[[ml,m(se)]])])),_:1})):f("",!0)])),_:1}),d(Qe,{label:"\u5e38\u7528\u547d\u4ee4",name:"commonCmd",style:{height:"100%"}},{default:c((()=>["commonCmd"==m(o)?(r(),i("div",H,[d(I,{type:"primary",style:{"margin-left":"10px"},onClick:s[1]||(s[1]=e=>Re(null,"add")),size:"small"},{default:c((()=>s[16]||(s[16]=[v("\u6dfb\u52a0\u547d\u4ee4")]))),_:1}),d(Je,{class:"leftct"},{default:c((()=>[_("div",J,[d(R,{placeholder:"\u8f93\u5165\u5173\u952e\u5b57\u8fdb\u884c\u8fc7\u6ee4",modelValue:m(re),"onUpdate:modelValue":s[2]||(s[2]=e=>y(re)?re.value=e:re=e),clearable:"",size:"small"},null,8,["modelValue"])]),x((r(),p(He,{class:"nopadding"},{default:c((()=>[d(Oe,{ref_key:"commonCommandRef",ref:Fe,class:"menu","node-key":"id",data:m(Le),props:m(ce),"highlight-current":!0,"expand-on-click-node":!1,"filter-node-method":We},{empty:c((()=>[d(S,{description:"\u6682\u65e0\u6570\u636e"})])),default:c((({node:e,data:l})=>[_("span",Q,[_("div",Z,V(e.label),1),_("div",ee,[d(Ce,null,{default:c((()=>[d(oe,{effect:"dark",content:"\u7f16\u8f91",placement:"top-start"},{default:c((()=>[d(I,{icon:"edit",size:"small",onClick:w((e=>Re(l,"edit")),["stop"])},null,8,["onClick"])])),_:2},1024),d(oe,{effect:"dark",content:"\u5220\u9664",placement:"top-start"},{default:c((()=>[d(I,{icon:"delete",size:"small",onClick:w((e=>Re(l,"del")),["stop"])},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])])])),_:1},8,["data","props"])])),_:1})),[[ml,m(se)]])])),_:1})])):f("",!0)])),_:1})])),_:1},8,["modelValue","style"])]),_("div",le,[m(q)&&m(q).length>0&&!m(l)?(r(),p(b,{key:0,class:"set-full-screen",onClick:Ke},{default:c((()=>[d(el)])),_:1})):f("",!0),m(q)&&m(q).length>0&&m(l)?(r(),p(b,{key:1,class:"set-full-screen",onClick:Ge},{default:c((()=>[d(ll)])),_:1})):f("",!0),m(q)&&m(q).length>0?(r(),p(Ze,{key:2,type:"card",modelValue:m(L),"onUpdate:modelValue":s[7]||(s[7]=e=>y(L)?L.value=e:L=e),onContextmenu:s[8]||(s[8]=e=>function(e){var l=e.srcElement?e.srcElement:e.target;if("tab"==l.role){e.preventDefault();const a=l.id.match(/\d+/);ye.value=a?parseInt(a[0]):-1,pe.value=!0,fe.value=e.clientX+1,ve.value=e.clientY+1,O((()=>{let l=document.getElementById("lycontextmenu");document.body.offsetWidth-e.clientX<l.offsetWidth&&(fe.value=document.body.offsetWidth-l.offsetWidth-1,ve.value=e.clientY+1)}))}else if("SPAN"==l.tagName&&"tabinner"==l.role){e.preventDefault();const a=l.className.match(/\d+/);ye.value=a?parseInt(a[0]):-1,pe.value=!0,fe.value=e.clientX+1,ve.value=e.clientY+1,O((()=>{let l=document.getElementById("lycontextmenu");document.body.offsetWidth-e.clientX<l.offsetWidth&&(fe.value=document.body.offsetWidth-l.offsetWidth-1,ve.value=e.clientY+1)}))}else ye.value=-1}(e)),"before-leave":Ae,onTabChange:ge,onTabClick:s[9]||(s[9]=e=>{}),onEdit:be},{default:c((()=>[(r(!0),i(T,null,E(m(q),(e=>(r(),p(Qe,{key:e.index,closable:!0,label:e.title,name:e.index},{label:c((()=>[_("div",ae,["online"===e.status?(r(),i("span",{key:0,role:"tabinner",class:C("ruyitabinner-"+e.index),style:"color: #33d94f; display: inline-flex; align-items: center"},[d(b,null,{default:c((()=>[d(al)])),_:1})],2)):f("",!0),"closed"===e.status?(r(),p(oe,{key:1,content:"\u91cd\u65b0\u8fde\u63a5",placement:"top-start"},{default:c((()=>[d(I,{icon:"Refresh",style:{color:"var(--el-color-warning)"},size:"default",link:"",onClick:l=>function(e){let l=we.value[je(e.index)];l.onClose(!1),O((()=>{l.init("api/webssh/",`id=${e.id}`,"","")})),Pe()}(e)},null,8,["onClick"])])),_:2},1024)):f("",!0),_("span",{role:"tabinner",class:C("ruyitabinner-"+e.index)},"\xa0"+V(e.title),3)])])),default:c((()=>[d(W,{ref_for:!0,ref:l=>((e,l)=>{e&&(we.value[je(l.index)]=e)})(l,e),onClosed:Pe},null,512),_("div",te,[d(nl,{persistent:!1,"popper-class":"select-cmd",teleported:!1,clearable:"",filterable:"",placeholder:"\u8bf7\u9009\u62e9",modelValue:m(t),"onUpdate:modelValue":s[4]||(s[4]=e=>y(t)?t.value=e:t=e),onChange:Xe},{prefix:c((()=>s[17]||(s[17]=[v("\u5e38\u7528\u547d\u4ee4")]))),default:c((()=>[(r(!0),i(T,null,E(m(Le),(e=>(r(),p(tl,{key:e.id,label:e.name,value:e.shell},null,8,["label","value"])))),128))])),_:2},1032,["modelValue"]),d(R,{placeholder:"\u53d1\u9001\u81ea\u5b9a\u4e49\u547d\u4ee4",modelValue:m(n),"onUpdate:modelValue":s[6]||(s[6]=e=>y(n)?n.value=e:n=e),onKeyup:U($e,["enter"])},{prepend:c((()=>[d(ol,{label:"\u6240\u6709\u7ec8\u7aef",modelValue:m(a),"onUpdate:modelValue":s[5]||(s[5]=e=>y(a)?a.value=e:a=e)},null,8,["modelValue"])])),_:1},8,["modelValue"])])])),_:2},1032,["label","name"])))),128)),d(Qe,{closable:!1,name:"addNewTabs"},{label:c((()=>[d(b,null,{default:c((()=>[d(sl)])),_:1})])),_:1})])),_:1},8,["modelValue"])):(r(),i("div",ne,s[18]||(s[18]=[_("ul",null,[_("li",null,[_("span",{class:"emptyTips-main"},"\u670d\u52a1\u5668\u5217\u8868 \u2192 \u70b9\u51fb\u670d\u52a1\u5668 "),_("span",null,"\u53ef\u8fdb\u884c\u670d\u52a1\u5668\u7ec8\u7aef\u8fde\u63a5")]),_("li",null,[_("span",{class:"emptyTips-main"},"\u670d\u52a1\u5668\u5217\u8868 \u2192 \u6dfb\u52a0/\u7f16\u8f91/\u5220\u9664\u6309\u94ae "),_("span",null,"\u53ef\u7ba1\u7406\u670d\u52a1\u5668\uff1a\u65b0\u589e/\u5220\u9664/\u7f16\u8f91\u7ec8\u7aef\u670d\u52a1\u5668")]),_("li",null,[_("span",{class:"emptyTips-main"},"\u5feb\u6377\u952e \u2192 CTRL + \u6eda\u52a8\u9f20\u6807 "),v("\u53ef\u8c03\u8282\u7ec8\u7aef\u5b57\u4f53\u5927\u5c0f")])],-1)])))]),d(D,{name:"el-zoom-in-top"},{default:c((()=>[x(_("ul",{style:j({left:m(fe)+"px",top:m(ve)+"px"}),class:"contextmenu",id:"lycontextmenu"},[_("li",{onClick:ke},[d(b,null,{default:c((()=>[d(ul)])),_:1}),s[19]||(s[19]=_("span",{class:"contextmenu-text"},"\u590d\u5236\u7a97\u53e3",-1))]),_("li",{onClick:s[10]||(s[10]=e=>_e("current"))},[d(b,null,{default:c((()=>[d(il)])),_:1}),s[20]||(s[20]=_("span",{class:"contextmenu-text"},"\u5173\u95ed\u5f53\u524d",-1))]),_("li",{onClick:s[11]||(s[11]=e=>_e("other"))},[d(b,null,{default:c((()=>[d(rl)])),_:1}),s[21]||(s[21]=_("span",{class:"contextmenu-text"},"\u5173\u95ed\u5176\u4ed6",-1))]),_("li",{onClick:s[12]||(s[12]=e=>_e("all"))},[d(b,null,{default:c((()=>[d(dl)])),_:1}),s[22]||(s[22]=_("span",{class:"contextmenu-text"},"\u5173\u95ed\u6240\u6709",-1))]),_("li",{onClick:he},[d(b,null,{default:c((()=>[d(cl)])),_:1}),s[23]||(s[23]=_("span",{class:"contextmenu-text"},"\u53d6\u6d88\u64cd\u4f5c",-1))])],4),[[z,m(pe)]])])),_:1}),m(xe)?(r(),p(M,{key:0,ref_key:"moduleServerFlag",ref:Ue,onRefreshConnect:Ne,onRefreshData:De,onClosed:s[13]||(s[13]=e=>y(xe)?xe.value=!1:xe=!1)},null,512)):f("",!0),m(Ve)?(r(),p(N,{key:1,ref_key:"moduleCommandFlag",ref:qe,onRefreshData:Ie,onClosed:s[14]||(s[14]=e=>y(Ve)?Ve.value=!1:Ve=!1)},null,512)):f("",!0)],512)}}},[["__scopeId","data-v-5d9f21ad"]]);export{oe as default};
