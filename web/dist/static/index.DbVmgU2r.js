import{j as e,A as l,c as a,l as t,i as o,_ as n}from"./index.D1mG68-9.js";import{L as s}from"./dialog.DfP35yxJ.js";import{E as d,a as i}from"./element-plus.WT5mSVn7.js";import{b as r,ai as u,o as p,c as m,U as c,O as f,u as g,S as v,D as _,a as h,I as b,F as y,a8 as w,M as V,T as k,R as x,j as S,n as P}from"./@vue.BMBj57q3.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{l as C}from"./fileList.BzS4nfDf.js";import{_ as I}from"./index.D8xw0uSc.js";import"./axios.3Xbkft1r.js";import"./crypto-js.CCePG2on.js";import"./@xterm.8vZnc5Va.js";import"./js-cookie.Ch5AnFJE.js";import"./vue-clipboard3.CjTOZN0C.js";import"./clipboard.55ERAcYO.js";import"./pinia.CfJUVU3l.js";import"./@element-plus.BcDOhvuq.js";import"./vue-router.CzFCPhwq.js";import"./nprogress.B5M_jmCc.js";import"./pinia-plugin-persistedstate.DTf8V5gU.js";import"./destr.ZpApkS-1.js";import"./deep-pick-omit.DP_A4OSP.js";import"./lodash-es.CjrOehCd.js";import"./@vueuse.B2CPJC1D.js";import"./@popperjs.CpAfbxx4.js";import"./@ctrl.D-8vaqgC.js";import"./dayjs.VYhIaz1R.js";import"./async-validator.Cuo4gI4y.js";import"./memoize-one.Ds0C_khL.js";import"./normalize-wheel-es.CUoAWVRo.js";import"./@floating-ui.yzr8CaSr.js";import"./Pagination.AJTPZh6u.js";const U={__name:"moduleSetUsername",emits:["refreshData","closed"],setup(a,{expose:t,emit:o}){const n=o;let i=r(!1),h=r(!1),b=r("\u9762\u677f\u7528\u6237"),y=r({username:""}),w=r({username:[{required:!0,message:"\u8bf7\u8f93\u5165\u9762\u677f\u7528\u6237",trigger:"blur"}]});function V(){n("closed")}let k=r(null);function x(){k.value.validate((e=>{if(e){h.value=!0;let e={action:"save_username",username:y.value.username};l.sysSettingsSave(e).then((e=>{h.value=!1,2e3==e.code?(d.success(e.msg),V(),n("refreshData")):d.warning(e.msg)}))}}))}return t({handleOpen:function(l,a){if(b.value=a,i.value=!0,l){let a=e(l);y.value.username=a}}}),(e,l)=>{const a=u("el-input"),t=u("el-form-item"),o=u("el-form"),n=u("el-button");return p(),m("div",null,[c(s,{modelValue:g(i),"onUpdate:modelValue":l[1]||(l[1]=e=>_(i)?i.value=e:i=e),title:g(b),width:"560px","before-close":V},{footer:f((()=>[c(n,{onClick:V,loading:g(h)},{default:f((()=>l[2]||(l[2]=[v("\u53d6\u6d88")]))),_:1},8,["loading"]),c(n,{type:"primary",onClick:x,loading:g(h)},{default:f((()=>l[3]||(l[3]=[v("\u4fdd\u5b58")]))),_:1},8,["loading"])])),default:f((()=>[c(o,{inline:!1,model:g(y),rules:g(w),ref_key:"rulesForm",ref:k,"label-position":"right","label-width":"auto"},{default:f((()=>[c(t,{label:"\u9762\u677f\u7528\u6237\uff1a",prop:"username"},{default:f((()=>[c(a,{modelValue:g(y).username,"onUpdate:modelValue":l[0]||(l[0]=e=>g(y).username=e),clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}},D={class:"ly-password-strength"};const L=j({props:{modelValue:{type:String,default:""}},data:()=>({level:0}),watch:{modelValue(){this.strength(this.modelValue)}},mounted(){this.strength(this.modelValue)},methods:{strength(e){var l=0,a=e.length>=6,t=/\d/.test(e),o=/[a-z]/.test(e),n=/[A-Z]/.test(e),s=!/(\w)\1{2}/.test(e),d=/[`~!@#$%^&*()_+<>?:"{},./;'[\]]/.test(e);return e.length<=0?(l=0,this.level=l,!1):a?(t&&(l+=1),o&&(l+=1),n&&(l+=1),s&&(l+=1),d&&(l+=1),void(this.level=l)):(l=1,this.level=l,!1)}}},[["render",function(e,l,a,t,o,n){return p(),m("div",D,[h("div",{class:b(["ly-password-strength-bar",`ly-password-strength-level-${o.level}`])},null,2)])}],["__scopeId","data-v-7c47c3fa"]]),E={__name:"moduleSetPssword",emits:["refreshData","closed"],setup(a,{expose:t,emit:o}){const n=o;let i=r(!1),b=r(!1),y=r("\u9762\u677f\u5bc6\u7801"),w=r({oldPassword:"",newPassword:"",newPassword2:""});var V=/^(?=.*[0-9])(?=.*[a-zA-Z]).{8,20}$/;let k=r({oldPassword:[{required:!0,message:"\u8bf7\u8f93\u5165\u5f53\u524d\u5bc6\u7801"}],newPassword:[{required:!0,message:"\u8bf7\u8f93\u5165\u65b0\u5bc6\u7801"},{min:8,max:20,message:"\u5bc6\u7801\u957f\u5ea6\u5e94\u5927\u4e8e\u7b49\u4e8e8\u4e2a\u5c0f\u4e8e20\u4f4d",trigger:"blur"},{required:!0,validator:(e,l,a)=>{V.test(w.value.newPassword)?a():a(new Error("\u7528\u6237\u5bc6\u7801\u5fc5\u987b\u5305\u542b\u5b57\u6bcd\u3001\u6570\u5b57"))},trigger:"blur"}],newPassword2:[{required:!0,message:"\u8bf7\u518d\u6b21\u8f93\u5165\u65b0\u5bc6\u7801"},{validator:(e,l,a)=>{l!==w.value.newPassword?a(new Error("\u4e24\u6b21\u8f93\u5165\u5bc6\u7801\u4e0d\u4e00\u81f4")):a()}}]});function x(){n("closed")}let S=r(null);function P(){S.value.validate((e=>{if(e){b.value=!0;let e={action:"save_password",oldpass:w.value.oldPassword,newpass:w.value.newPassword};l.sysSettingsSave(e).then((e=>{b.value=!1,2e3==e.code?(d.success(e.msg),x(),n("refreshData")):d.warning(e.msg)}))}}))}return t({handleOpen:function(l,a){if(y.value=a,i.value=!0,l){let a=e(l);w.value.username=a}}}),(e,l)=>{const a=u("el-input"),t=u("el-form-item"),o=u("el-form"),n=u("el-button");return p(),m("div",null,[c(s,{modelValue:g(i),"onUpdate:modelValue":l[4]||(l[4]=e=>_(i)?i.value=e:i=e),title:g(y),width:"560px","before-close":x},{footer:f((()=>[c(n,{onClick:x,loading:g(b)},{default:f((()=>l[6]||(l[6]=[v("\u53d6\u6d88")]))),_:1},8,["loading"]),c(n,{type:"primary",onClick:P,loading:g(b)},{default:f((()=>l[7]||(l[7]=[v("\u4fdd\u5b58")]))),_:1},8,["loading"])])),default:f((()=>[c(o,{inline:!1,model:g(w),rules:g(k),ref_key:"rulesForm",ref:S,"label-position":"right","label-width":"auto"},{default:f((()=>[c(t,{label:"\u5f53\u524d\u5bc6\u7801",prop:"oldPassword"},{default:f((()=>[c(a,{modelValue:g(w).oldPassword,"onUpdate:modelValue":l[0]||(l[0]=e=>g(w).oldPassword=e),type:"password","show-password":"",placeholder:"\u8bf7\u8f93\u5165\u5f53\u524d\u5bc6\u7801"},null,8,["modelValue"])])),_:1}),c(t,{label:"\u65b0\u5bc6\u7801",prop:"newPassword"},{default:f((()=>[c(a,{modelValue:g(w).newPassword,"onUpdate:modelValue":l[1]||(l[1]=e=>g(w).newPassword=e),type:"password","show-password":"",placeholder:"\u8bf7\u8f93\u5165\u65b0\u5bc6\u7801"},null,8,["modelValue"]),c(L,{modelValue:g(w).newPassword,"onUpdate:modelValue":l[2]||(l[2]=e=>g(w).newPassword=e)},null,8,["modelValue"]),l[5]||(l[5]=h("div",{class:"el-form-item-msg"},"\u8bf7\u8f93\u51658-20\u4f4d\u5305\u542b\u82f1\u6587\u3001\u6570\u5b57\u7684\u5bc6\u7801",-1))])),_:1}),c(t,{label:"\u786e\u8ba4\u65b0\u5bc6\u7801",prop:"newPassword2"},{default:f((()=>[c(a,{modelValue:g(w).newPassword2,"onUpdate:modelValue":l[3]||(l[3]=e=>g(w).newPassword2=e),type:"password","show-password":"",placeholder:"\u8bf7\u518d\u6b21\u8f93\u5165\u65b0\u5bc6\u7801"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}},A={__name:"moduleSetPanelPort",emits:["refreshData","closed"],setup(a,{expose:t,emit:o}){const n=o;let i=r(!1),h=r(!1),b=r("\u9762\u677f\u7aef\u53e3"),y=r({port:""}),w=r({port:[{required:!0,message:"\u8bf7\u8f93\u5165\u9762\u677f\u7aef\u53e3",trigger:"blur"}]});function V(){n("closed")}let k=r(null);function x(){k.value.validate((e=>{if(e){h.value=!0;let e={action:"save_panelport",port:y.value.port};l.sysSettingsSave(e).then((e=>{h.value=!1,2e3==e.code?(d.success(e.msg),V(),n("refreshData")):d.warning(e.msg)}))}}))}return t({handleOpen:function(l,a){if(b.value=a,i.value=!0,l){let a=e(l);y.value.port=a}}}),(e,l)=>{const a=u("el-input"),t=u("el-form-item"),o=u("el-form"),n=u("el-button");return p(),m("div",null,[c(s,{modelValue:g(i),"onUpdate:modelValue":l[1]||(l[1]=e=>_(i)?i.value=e:i=e),title:g(b),width:"560px","before-close":V},{footer:f((()=>[c(n,{onClick:V,loading:g(h)},{default:f((()=>l[2]||(l[2]=[v("\u53d6\u6d88")]))),_:1},8,["loading"]),c(n,{type:"primary",onClick:x,loading:g(h)},{default:f((()=>l[3]||(l[3]=[v("\u4fdd\u5b58")]))),_:1},8,["loading"])])),default:f((()=>[c(o,{inline:!1,model:g(y),rules:g(w),ref_key:"rulesForm",ref:k,"label-position":"right","label-width":"auto"},{default:f((()=>[c(t,{label:"\u9762\u677f\u7aef\u53e3\uff1a",prop:"port"},{default:f((()=>[c(a,{modelValue:g(y).port,"onUpdate:modelValue":l[0]||(l[0]=e=>g(y).port=e),clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}},O={__name:"moduleSetPanelBindAddress",emits:["refreshData","closed"],setup(a,{expose:t,emit:o}){const n=o;let i=r(!1),h=r(!1),b=r("\u76d1\u542c\u5730\u5740"),k=r({bindAddress:""}),x=r(["0.0.0.0","127.0.0.1"]),S=r({bindAddress:[{required:!0,message:"\u8bf7\u8f93\u5165/\u9009\u62e9\u9762\u677f\u76d1\u542c\u5730\u5740",trigger:"blur"}]});function P(){n("closed")}let j=r(null);function C(){j.value.validate((e=>{if(e){h.value=!0;let e={action:"save_panelbindaddress",host:k.value.host};l.sysSettingsSave(e).then((e=>{h.value=!1,2e3==e.code?(d.success(e.msg),P(),n("refreshData")):d.warning(e.msg)}))}}))}return t({handleOpen:function(a,t){if(b.value=t,i.value=!0,l.sysGetInterfaces().then((e=>{2e3===e.code&&(x.value=e.data)})),a){let l=e(a);k.value.bindAddress=l}}}),(e,l)=>{const a=u("el-option"),t=u("el-select"),o=u("el-form-item"),n=u("el-form"),d=u("el-button");return p(),m("div",null,[c(s,{modelValue:g(i),"onUpdate:modelValue":l[1]||(l[1]=e=>_(i)?i.value=e:i=e),title:g(b),width:"560px","before-close":P},{footer:f((()=>[c(d,{onClick:P,loading:g(h)},{default:f((()=>l[2]||(l[2]=[v("\u53d6\u6d88")]))),_:1},8,["loading"]),c(d,{type:"primary",onClick:C,loading:g(h)},{default:f((()=>l[3]||(l[3]=[v("\u4fdd\u5b58")]))),_:1},8,["loading"])])),default:f((()=>[c(n,{inline:!1,model:g(k),rules:g(S),ref_key:"rulesForm",ref:j,"label-position":"right","label-width":"auto"},{default:f((()=>[c(o,{label:"\u76d1\u542c\u5730\u5740\uff1a",prop:"bindAddress"},{default:f((()=>[c(t,{modelValue:g(k).bindAddress,"onUpdate:modelValue":l[0]||(l[0]=e=>g(k).bindAddress=e),filterable:"","allow-create":"",placeholder:"\u8bf7\u9009\u62e9/\u8f93\u5165",style:{width:"100%"}},{default:f((()=>[(p(!0),m(y,null,w(g(x),(e=>(p(),V(a,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}},z={__name:"moduleSecurityPath",emits:["refreshData","closed"],setup(a,{expose:t,emit:o}){const n=o;let b=r(!1),y=r(!1),w=r("\u4fee\u6539\u9762\u677f\u5b89\u5168\u5165\u53e3"),V=r({path:"",oldpath:""}),k=r({path:[{required:!0,message:"\u8bf7\u8f93\u5165\u5b89\u5168\u5165\u53e3",trigger:"blur"},{pattern:/^\/[a-zA-Z0-9_]+$/,message:'\u5b89\u5168\u5165\u53e3\u5fc5\u987b\u4ee5 "/" \u5f00\u5934\uff0c \u540e\u9762\u4e3a\u6570\u5b57\u3001\u5b57\u6bcd\u6216\u4e0b\u5212\u7ebf',trigger:"blur"}]});function x(){n("closed")}let S=r(null);function P(){S.value.validate((e=>{if(e){if(V.value.path==V.value.oldpath)return void d.warning("\u60a8\u8fd8\u6ca1\u6709\u4fee\u6539\u5b89\u5168\u5165\u53e3\uff01\uff01\uff01");i.confirm(`\u786e\u5b9a\u8981\u4fee\u6539\u9762\u677f\u5b89\u5168\u5165\u53e3\u5417\uff1f\u4fee\u6539\u540e\u53ea\u80fd\u901a\u8fc7\u6307\u5b9a\u5b89\u5168\u5165\u53e3${V.value.path}\u767b\u5f55\u9762\u677f\uff01\uff01\uff01`,"\u8b66\u544a",{closeOnClickModal:!1,cancelButtonText:"\u53d6\u6d88",confirmButtonText:"\u786e\u5b9a",type:"warning"}).then((e=>{y.value=!0;let a={action:"save_panelsecuritypath",path:V.value.path};l.sysSettingsSave(a).then((e=>{y.value=!1,2e3==e.code?(d.success(e.msg),x(),n("refreshData")):d.warning(e.msg)}))})).catch((()=>{}))}}))}return t({handleOpen:function(l,a){if(w.value=a,b.value=!0,l){let a=e(l);V.value.path=a,V.value.oldpath=a}}}),(e,l)=>{const a=u("el-input"),t=u("el-form-item"),o=u("el-form"),n=u("el-button");return p(),m("div",null,[c(s,{modelValue:g(b),"onUpdate:modelValue":l[1]||(l[1]=e=>_(b)?b.value=e:b=e),title:g(w),width:"560px","before-close":x},{footer:f((()=>[c(n,{onClick:x,loading:g(y)},{default:f((()=>l[3]||(l[3]=[v("\u53d6\u6d88")]))),_:1},8,["loading"]),c(n,{type:"primary",onClick:P,loading:g(y)},{default:f((()=>l[4]||(l[4]=[v("\u4fdd\u5b58")]))),_:1},8,["loading"])])),default:f((()=>[c(o,{inline:!1,model:g(V),rules:g(k),ref_key:"rulesForm",ref:S,"label-position":"right","label-width":"auto"},{default:f((()=>[c(t,{label:"\u5b89\u5168\u5165\u53e3\uff1a",prop:"path"},{default:f((()=>[c(a,{modelValue:g(V).path,"onUpdate:modelValue":l[0]||(l[0]=e=>g(V).path=e),clearable:""},null,8,["modelValue"]),l[2]||(l[2]=h("span",{class:"ryhelp-tips"},"\u683c\u5f0f\u5982\uff1a/ruyi_lybbn_cn",-1))])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}},F={style:{display:"flex","align-items":"center",width:"100%"}},R={key:1,style:{display:"flex","align-items":"center",width:"100%"}},B=j({__name:"moduleSSL",emits:["refreshData","closed"],setup(o,{expose:n,emit:i}){const b=a(),y=i;let w=r(!1),S=r(!1),P=r("\u4fee\u6539\u9762\u677f\u5b89\u5168\u5165\u53e3"),j=r({key:"",cert:"",certinfo:{},sslEnable:!1,root_password:""}),C=r({key:[{required:!0,message:"\u79c1\u94a5(KEY)",trigger:"blur"}],cert:[{required:!0,message:"\u8bc1\u4e66(PEM\u683c\u5f0f)",trigger:"blur"}]});function U(){y("closed")}function D(){l.sysRuyiSSLRootDownload({action:"download_ruyiroot_pfx"}).then((e=>{if("application/json"==e.headers["content-type"]){const l=new FileReader;l.readAsText(e.data),l.onload=()=>{const e=JSON.parse(l.result);d.warning(e.msg)}}else t(e.data,"ruyi_root.pfx")}))}let L=r(null);function E(){L.value.validate((e=>{if(e){S.value=!0;let e={action:"save_ruyi_ssl",enable:j.value.sslEnable,private_key:j.value.key,certificate:j.value.cert};l.sysSettingsSave(e).then((e=>{S.value=!1,2e3==e.code?(d.success(e.msg),U(),y("refreshData",j.value.sslEnable)):d.warning(e.msg)}))}}))}return n({handleOpen:function(a,t){if(P.value=t,w.value=!0,b.loadingInfo.isLoading=!0,b.loadingInfo.content="\u52a0\u8f7d\u4e2d...",l.sysSettingsSave({action:"get_ruyi_sslinfo"}).then((e=>{b.loadingInfo.isLoading=!1,b.loadingInfo.content="",2e3==e.code?(j.value.key=e.data.private_key,j.value.cert=e.data.certificate,j.value.root_password=e.data.root_password,j.value.certinfo=e.data.certinfo):d.warning(e.msg)})),a){let l=e(a);j.value.sslEnable=l}}}),(e,l)=>{const a=u("el-switch"),t=u("el-form-item"),o=u("el-descriptions-item"),n=u("el-tag"),d=u("el-button"),i=u("el-input"),r=u("el-descriptions"),b=u("el-alert"),y=u("el-col"),A=u("el-row"),O=u("el-form");return p(),m("div",null,[c(s,{modelValue:g(w),"onUpdate:modelValue":l[4]||(l[4]=e=>_(w)?w.value=e:w=e),title:g(P),width:"60%","before-close":U},{footer:f((()=>[c(d,{onClick:U,loading:g(S)},{default:f((()=>l[10]||(l[10]=[v("\u53d6\u6d88")]))),_:1},8,["loading"]),c(d,{type:"primary",onClick:E,loading:g(S)},{default:f((()=>l[11]||(l[11]=[v("\u4fdd\u5b58")]))),_:1},8,["loading"])])),default:f((()=>[c(O,{inline:!1,model:g(j),rules:g(C),ref_key:"rulesForm",ref:L,"label-position":"top","label-width":"auto"},{default:f((()=>[c(t,{label:"\u542f\u7528\u9762\u677fSSL",prop:"sslEnable","label-position":"right"},{default:f((()=>[c(a,{modelValue:g(j).sslEnable,"onUpdate:modelValue":l[0]||(l[0]=e=>g(j).sslEnable=e)},null,8,["modelValue"])])),_:1}),c(r,{border:!0,column:2,style:{"margin-bottom":"15px"}},{default:f((()=>[c(o,{label:"\u7b7e\u540d"},{default:f((()=>[v(k(g(j).certinfo.organization_name||""),1)])),_:1}),c(o,{label:"\u8ba4\u8bc1\u57df\u540d/IP"},{default:f((()=>{return[v(k((e=g(j).certinfo,e?e.san_names&&e.san_names.length>0?e.san_names.join("\u3001"):e.common_name:"-")),1)];var e})),_:1}),c(o,{label:"\u8fc7\u671f\u65f6\u95f4"},{default:f((()=>[v(k(g(j).certinfo.not_valid_after||""),1)])),_:1}),c(o,{label:"\u8bc1\u4e66\u7c7b\u578b"},{default:f((()=>[h("div",F,[c(n,null,{default:f((()=>[v(k(g(j).certinfo.type||""),1)])),_:1}),"\u81ea\u7b7e\u8bc1\u4e66"==g(j).certinfo.type?(p(),V(d,{key:0,size:"small",type:"primary",style:{"margin-left":"10px","margin-right":"10px"},onClick:D},{default:f((()=>l[5]||(l[5]=[v("\u70b9\u51fb\u4e0b\u8f7d\u6839\u8bc1\u4e66")]))),_:1})):x("",!0),"\u81ea\u7b7e\u8bc1\u4e66"==g(j).certinfo.type?(p(),m("div",R,[l[6]||(l[6]=v(" \u8bc1\u4e66\u5bc6\u7801\uff1a ")),c(i,{modelValue:g(j).root_password,"onUpdate:modelValue":l[1]||(l[1]=e=>g(j).root_password=e),size:"small",style:{width:"100px"},disabled:!0},null,8,["modelValue"]),c(I,{content:g(j).root_password,size:"small"},null,8,["content"])])):x("",!0)])])),_:1})])),_:1}),"\u81ea\u7b7e\u8bc1\u4e66"==g(j).certinfo.type?(p(),V(b,{key:0,type:"success",style:{"margin-bottom":"20px"}},{default:f((()=>l[7]||(l[7]=[v("\u3010\u81ea\u7b7e\u8bc1\u4e66\u3011\u4e0d\u88ab\u6d4f\u89c8\u5668\u4fe1\u4efb\uff0c\u6d4f\u89c8\u5668\u4f1a\u663e\u793a\u3010\u4e0d\u5b89\u5168...\u3011\u63d0\u793a\uff0c\u4e0b\u8f7d\u6839\u8bc1\u4e66\u6216\u3010\u7ee7\u7eed\u524d\u5f80...\u3011\u5373\u53ef")]))),_:1})):x("",!0),c(A,{gutter:20},{default:f((()=>[c(y,{xs:24,sm:24,md:12,lg:12,xl:12},{default:f((()=>[c(t,{prop:"key"},{label:f((()=>l[8]||(l[8]=[h("span",null,"\u79c1\u94a5(KEY)\uff1a",-1),h("span",{class:"right-tips"},"\u6539\u524d\u8bf7\u5907\u4efd",-1)]))),default:f((()=>[c(i,{modelValue:g(j).key,"onUpdate:modelValue":l[2]||(l[2]=e=>g(j).key=e),autosize:{minRows:5,maxRows:10},type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1}),c(y,{xs:24,sm:24,md:12,lg:12,xl:12},{default:f((()=>[c(t,{prop:"cert"},{label:f((()=>l[9]||(l[9]=[h("span",null,"\u8bc1\u4e66(PEM\u683c\u5f0f)\uff1a",-1),h("span",{class:"right-tips"},"\u6539\u524d\u8bf7\u5907\u4efd",-1)]))),default:f((()=>[c(i,{modelValue:g(j).cert,"onUpdate:modelValue":l[3]||(l[3]=e=>g(j).cert=e),autosize:{minRows:5,maxRows:10},type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}},[["__scopeId","data-v-63acb5ed"]]),T={class:"rydescriptions"},q={key:0},M={key:1},$={class:"ruyi-lic-line"},G={class:"ruyi-lic-line"},Z={class:"ruyi-lic-line"},K=j({__name:"moduleLicense",setup(e,{expose:t}){const n=a();let s=r({userid:"",username:"",role:"",expire:"",active_state:""}),i={1:"\u5df2\u6fc0\u6d3b",0:"\u672a\u6fc0\u6d3b",2:"\u5df2\u79bb\u7ebf"};function _(e=""){return"pro"==e?"\u4e13\u4e1a\u7248":"enterprise"==e?"\u4f01\u4e1a\u7248":"\u514d\u8d39\u7248"}return t({refreshData:function(){n.loadingInfo.isLoading=!0,n.loadingInfo.content="\u52a0\u8f7d\u4e2d...",l.sysGetLicenses().then((e=>{if(n.loadingInfo.isLoading=!1,n.loadingInfo.content="",2e3==e.code){let l=e.data;o(l.expire)&&(l.expire="\u957f\u671f"),s.value=l}else d.warning(e.msg)}))}}),(e,l)=>{const a=u("el-descriptions-item"),t=u("el-tag"),o=u("el-tooltip"),n=u("el-descriptions"),d=u("el-col"),r=u("el-button"),b=u("el-row"),y=u("el-card");return p(),V(b,{gutter:20},{default:f((()=>[c(d,{xs:24,sm:24,md:15,lg:15,xl:15},{default:f((()=>[h("div",T,[c(n,{column:1,direction:"horizontal",size:"large",border:""},{default:f((()=>[c(a,{label:"\u6388\u6743ID"},{default:f((()=>[v(k(g(s).userid||"-"),1)])),_:1}),c(a,{label:"\u6388\u6743\u7ed9"},{default:f((()=>[v(k(g(s).username||"-"),1)])),_:1}),c(a,{label:"\u6388\u6743\u7c7b\u578b"},{default:f((()=>[v(k(_(g(s).role)||"-"),1)])),_:1}),c(a,{label:"\u8fc7\u671f\u65f6\u95f4"},{default:f((()=>[v(k(g(s).expire||"-"),1)])),_:1}),"public"!=g(s).role?(p(),V(a,{key:0,label:"\u6388\u6743\u72b6\u6001"},{default:f((()=>[g(s).active_state?(p(),m("div",q,["-2"==g(s).active_state?(p(),V(o,{key:0,content:"\u8bb8\u53ef\u8bc1\u9700\u5b9a\u65f6\u540c\u6b65\u786e\u8ba4\u662f\u5426\u53ef\u7528\uff0c\u8bf7\u4fdd\u8bc1\u670d\u52a1\u5668\u6b63\u5e38\u5916\u7f51\u8bbf\u95ee"},{default:f((()=>[c(t,{type:"info"},{default:f((()=>[v(k(g(i)[e.active_state]),1)])),_:1})])),_:1})):(p(),V(t,{key:1},{default:f((()=>[v(k(g(i)[e.active_state]),1)])),_:1}))])):(p(),m("span",M,"-"))])),_:1})):x("",!0)])),_:1})])])),_:1}),c(d,{xs:24,sm:24,md:9,lg:9,xl:9},{default:f((()=>[c(y,{header:"\u83b7\u53d6\u8bb8\u53ef",shadow:"hover"},{default:f((()=>[h("div",$,[c(b,null,{default:f((()=>[c(d,{span:15},{default:f((()=>l[0]||(l[0]=[h("div",{class:"ruyi-lic-txt"},"\u83b7\u53d6\u8bb8\u53ef\uff1a",-1)]))),_:1}),c(d,{span:9},{default:f((()=>[c(r,{type:"primary",plain:"",round:"",size:"small"},{default:f((()=>l[1]||(l[1]=[v(" \u83b7\u53d6 ")]))),_:1})])),_:1})])),_:1})]),h("div",G,[c(b,null,{default:f((()=>[c(d,{span:15},{default:f((()=>l[2]||(l[2]=[h("div",{class:"ruyi-lic-txt"},"\u5bfc\u5165\u8bb8\u53ef\u8bc1\uff1a",-1)]))),_:1}),c(d,{span:9},{default:f((()=>[c(r,{type:"primary",plain:"",round:"",size:"small"},{default:f((()=>l[3]||(l[3]=[v(" \u5bfc\u5165 ")]))),_:1})])),_:1})])),_:1})]),h("div",Z,[c(b,null,{default:f((()=>[c(d,{span:15},{default:f((()=>l[4]||(l[4]=[h("div",{class:"ruyi-lic-txt"},"\u6280\u672f\u54a8\u8be2\uff1a",-1)]))),_:1}),c(d,{span:9},{default:f((()=>[c(r,{type:"primary",plain:"",round:"",size:"small"},{default:f((()=>l[5]||(l[5]=[v(" \u54a8\u8be2 ")]))),_:1})])),_:1})])),_:1})])])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-74b26c52"]]),N={class:"aboutTop"},Y={class:"aboutTop-info"},J=j({__name:"moduleAbout",setup(e){const l=a();return(e,a)=>(p(),m("div",N,[h("div",Y,[a[0]||(a[0]=h("img",{src:n},null,-1)),a[1]||(a[1]=h("h2",null,"\u670d\u52a1\u5668\u8fd0\u7ef4\u7ba1\u7406\u9762\u677f",-1)),h("p",null,"\u5f53\u524d\u8fd0\u884c\u7248\u672c\uff1a"+k(g(l).sysConfig.sysVersion),1)])]))}},[["__scopeId","data-v-7de4525b"]]),Q=j({__name:"index",setup(e){const t=a();r(!1);let o=r("panelSettings"),n=r(!1),s=r(null),m=r(null),b=r(!1),y=r(!1),w=r(null),k=r(!1),j=r(null),I=r({username:"",password:"******",sslEnable:!1,panelPort:6789,panelBindAddress:"0.0.0.0",securityPath:"/ruyi",wwwrootPath:"",backupPath:""}),D=r(!1),L=r(null);function F(){D.value=!0,P((()=>{L.value.handleOpen(I.value.username,"\u8bbe\u7f6e\u9762\u677f\u7528\u6237")}))}let R=r(!1),T=r(null);function q(){R.value=!0,P((()=>{T.value.handleOpen(null,"\u8bbe\u7f6e\u9762\u677f\u5bc6\u7801")}))}let M=r(!1),$=r(null);function G(){M.value=!0,P((()=>{$.value.handleOpen(I.value.panelPort,"\u8bbe\u7f6e\u9762\u677f\u7aef\u53e3")}))}let Z=r(!1),N=r(null);function Y(){Z.value=!0,P((()=>{N.value.handleOpen(I.value.panelBindAddress,"\u8bbe\u7f6e\u76d1\u542c\u5730\u5740")}))}function Q(){t.loadingInfo.isLoading=!0,t.loadingInfo.content="\u52a0\u8f7d\u4e2d...",l.sysGetSettings().then((e=>{t.loadingInfo.isLoading=!1,t.loadingInfo.content="",2e3==e.code?I.value=e.data:d.warning(e.msg)}))}function X(){n.value=!0,P((()=>{s.value.handleOpen({path:I.value.wwwrootPath,isDir:!0},"\u76ee\u5f55\u9009\u62e9")}))}function H(e){i.confirm(`\u786e\u5b9a\u8981\u4fee\u6539\u5907\u4efd\u76ee\u5f55\u5417\uff1f\u4fee\u6539\u540e\u65b0\u5efa\u5907\u4efd\u6587\u4ef6\u4f1a\u628a${e}\u4f5c\u4e3a\u5907\u4efd\u6839\u76ee\u5f55\uff01\uff01\uff01`,"\u8b66\u544a",{closeOnClickModal:!1,cancelButtonText:"\u53d6\u6d88",confirmButtonText:"\u786e\u5b9a",type:"warning"}).then((a=>{t.loadingInfo.isLoading=!0,t.loadingInfo.content="\u4fdd\u5b58\u914d\u7f6e\u4e2d...",l.sysSettingsSave({action:"save_backup_path",path:e}).then((l=>{t.loadingInfo.isLoading=!1,t.loadingInfo.content="",2e3==l.code?(d.success("\u8bbe\u7f6e\u6210\u529f"),I.value.backupPath=e):d.warning(l.msg)}))})).catch((()=>{}))}function W(){b.value=!0,P((()=>{m.value.handleOpen({path:I.value.backupPath,isDir:!0},"\u76ee\u5f55\u9009\u62e9")}))}function ee(e){i.confirm(`\u786e\u5b9a\u8981\u4fee\u6539\u7f51\u7ad9\u76ee\u5f55\u5417\uff1f\u4fee\u6539\u540e\u65b0\u5efa\u7684\u7ad9\u70b9\u4f1a\u628a${e}\u4f5c\u4e3a\u7f51\u7ad9\u6839\u76ee\u5f55\uff01\uff01\uff01`,"\u8b66\u544a",{closeOnClickModal:!1,cancelButtonText:"\u53d6\u6d88",confirmButtonText:"\u786e\u5b9a",type:"warning"}).then((a=>{t.loadingInfo.isLoading=!0,t.loadingInfo.content="\u4fdd\u5b58\u914d\u7f6e\u4e2d...",l.sysSettingsSave({action:"save_wwwroot_path",path:e}).then((l=>{t.loadingInfo.isLoading=!1,t.loadingInfo.content="",2e3==l.code?(d.success("\u8bbe\u7f6e\u6210\u529f"),I.value.wwwrootPath=e):d.warning(l.msg)}))})).catch((()=>{}))}function le(){y.value=!0,P((()=>{w.value.handleOpen(I.value.securityPath,"\u4fee\u6539\u9762\u677f\u5b89\u5168\u5165\u53e3")}))}function ae(e){I.value.securityPath=e}function te(e){I.value.sslEnable=e}let oe=r(null);function ne(e){"panelSettings"==e.props.name||"panelSafeSettings"==e.props.name?Q():"panelLicense"==e.props.name&&P((()=>{oe.value.refreshData()}))}return S((()=>{Q()})),(e,l)=>{const a=u("el-button"),t=u("el-input"),d=u("el-form-item"),i=u("el-col"),r=u("el-row"),S=u("el-form"),se=u("el-tab-pane"),de=u("el-switch"),ie=u("el-tabs"),re=u("el-card"),ue=u("el-main");return p(),V(ue,{class:"ruyi-settings"},{default:f((()=>[c(re,{shadow:"never",header:"\u9762\u677f\u8bbe\u7f6e"},{default:f((()=>[c(ie,{modelValue:g(o),"onUpdate:modelValue":l[10]||(l[10]=e=>_(o)?o.value=e:o=e),onTabClick:ne},{default:f((()=>[c(se,{label:"\u9762\u677f\u8bbe\u7f6e",name:"panelSettings"},{default:f((()=>[c(S,{model:g(I),"label-width":"130px",style:{"margin-top":"20px"},"label-position":"right"},{default:f((()=>[c(r,null,{default:f((()=>[c(i,{xs:24,sm:20,md:15,lg:12,xl:12},{default:f((()=>[c(d,{label:"\u9762\u677f\u8d26\u53f7"},{default:f((()=>[c(t,{modelValue:g(I).username,"onUpdate:modelValue":l[0]||(l[0]=e=>g(I).username=e),disabled:!0},{append:f((()=>[c(a,{onClick:F,icon:"Setting",class:"panelsave"},{default:f((()=>l[19]||(l[19]=[v("\u8bbe\u7f6e")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),c(d,{label:"\u9762\u677f\u5bc6\u7801"},{default:f((()=>[c(t,{modelValue:g(I).password,"onUpdate:modelValue":l[1]||(l[1]=e=>g(I).password=e),disabled:!0},{append:f((()=>[c(a,{onClick:q,icon:"Setting",class:"panelsave"},{default:f((()=>l[20]||(l[20]=[v("\u8bbe\u7f6e")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),c(d,{label:"\u5efa\u7ad9\u76ee\u5f55"},{default:f((()=>[c(t,{modelValue:g(I).wwwrootPath,"onUpdate:modelValue":l[2]||(l[2]=e=>g(I).wwwrootPath=e),disabled:!0},{append:f((()=>[c(a,{onClick:X,icon:"Folder",class:"panelsave"},{default:f((()=>l[21]||(l[21]=[v("\u9009\u62e9")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),c(d,{label:"\u5907\u4efd\u76ee\u5f55"},{default:f((()=>[c(t,{modelValue:g(I).backupPath,"onUpdate:modelValue":l[3]||(l[3]=e=>g(I).backupPath=e),disabled:!0},{append:f((()=>[c(a,{onClick:W,icon:"Folder",class:"panelsave"},{default:f((()=>l[22]||(l[22]=[v("\u9009\u62e9")]))),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1}),c(se,{label:"\u5b89\u5168\u8bbe\u7f6e",name:"panelSafeSettings"},{default:f((()=>[c(S,{model:g(I),"label-position":"right","label-width":"130px",style:{"margin-top":"20px"}},{default:f((()=>[c(r,null,{default:f((()=>[c(i,{xs:24,sm:20,md:15,lg:12,xl:12},{default:f((()=>[c(d,{label:"\u9762\u677fSSL"},{default:f((()=>[c(de,{modelValue:g(I).sslEnable,"onUpdate:modelValue":l[4]||(l[4]=e=>g(I).sslEnable=e),disabled:!0,onChange:l[5]||(l[5]=e=>{return(l=g(I)).sslEnable=!l.sslEnable,k.value=!0,void P((()=>{j.value.handleOpen(l.sslEnable,"\u8bbe\u7f6e\u9762\u677fSSL")}));var l})},null,8,["modelValue"]),c(a,{plain:"",size:"small",style:{"margin-left":"15px"},onClick:l[6]||(l[6]=e=>{return l=g(I),k.value=!0,void P((()=>{j.value.handleOpen(l.sslEnable,"\u8bbe\u7f6e\u9762\u677fSSL")}));var l})},{default:f((()=>l[23]||(l[23]=[v("SSL\u914d\u7f6e")]))),_:1}),l[24]||(l[24]=h("div",{class:"right-tips"},"\u4e3a\u5982\u610f\u9762\u677f\u8bbe\u7f6ehttps\u534f\u8bae\u8bbf\u95ee\uff0c\u63d0\u5347\u9762\u677f\u8bbf\u95ee\u5b89\u5168\u6027\uff08\u91cd\u542f\u5982\u610f\u9762\u677f\u751f\u6548\uff09",-1))])),_:1}),c(d,{label:"\u9762\u677f\u7aef\u53e3"},{default:f((()=>[c(t,{modelValue:g(I).panelPort,"onUpdate:modelValue":l[7]||(l[7]=e=>g(I).panelPort=e),modelModifiers:{number:!0},disabled:!0},{append:f((()=>[c(a,{onClick:G,icon:"Setting",class:"panelsave"},{default:f((()=>l[25]||(l[25]=[v("\u8bbe\u7f6e")]))),_:1})])),_:1},8,["modelValue"]),l[26]||(l[26]=h("span",{class:"ryhelp-tips"},"\u6307\u5b9a\u9762\u677f\u76d1\u542c\u672c\u5730\u7aef\u53e3\uff08\u91cd\u542f\u5982\u610f\u9762\u677f\u751f\u6548\uff09",-1))])),_:1}),c(d,{label:"\u76d1\u542c\u5730\u5740"},{default:f((()=>[c(t,{modelValue:g(I).panelBindAddress,"onUpdate:modelValue":l[8]||(l[8]=e=>g(I).panelBindAddress=e),modelModifiers:{number:!0},disabled:!0},{append:f((()=>[c(a,{onClick:Y,icon:"Setting",class:"panelsave"},{default:f((()=>l[27]||(l[27]=[v("\u8bbe\u7f6e")]))),_:1})])),_:1},8,["modelValue"]),l[28]||(l[28]=h("span",{class:"ryhelp-tips"},"\u6307\u5b9a\u9762\u677f\u76d1\u542c\u672c\u5730ip\u5730\u5740\uff08\u91cd\u542f\u5982\u610f\u9762\u677f\u751f\u6548\uff09",-1))])),_:1}),c(d,{label:"\u5b89\u5168\u5165\u53e3"},{default:f((()=>[c(t,{modelValue:g(I).securityPath,"onUpdate:modelValue":l[9]||(l[9]=e=>g(I).securityPath=e),disabled:!0},{append:f((()=>[c(a,{onClick:le,icon:"Setting",class:"panelsave"},{default:f((()=>l[29]||(l[29]=[v("\u8bbe\u7f6e")]))),_:1})])),_:1},8,["modelValue"]),l[30]||(l[30]=h("span",{class:"ryhelp-tips"},"\u5f00\u542f\u5b89\u5168\u5165\u53e3\u540e\u53ea\u80fd\u901a\u8fc7\u6307\u5b9a\u5b89\u5168\u5165\u53e3\u767b\u5f55\u9762\u677f\uff08/ry\u8868\u793a\u65e0\u9700\u9762\u677f\u5b89\u5168\u5165\u53e3\uff09",-1))])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1}),c(se,{label:"\u8bb8\u53ef\u8bc1(LICENSE)",name:"panelLicense"},{default:f((()=>[c(K,{ref_key:"licenseRef",ref:oe},null,512)])),_:1}),c(se,{label:"\u5173\u4e8e\u9762\u677f",name:"panelAbout"},{default:f((()=>["panelAbout"==g(o)?(p(),V(J,{key:0})):x("",!0)])),_:1})])),_:1},8,["modelValue"])])),_:1}),g(D)?(p(),V(U,{key:0,ref_key:"moduleSetUsernameFlag",ref:L,onRefreshData:Q,onClosed:l[11]||(l[11]=e=>_(D)?D.value=!1:D=!1)},null,512)):x("",!0),g(R)?(p(),V(E,{key:1,ref_key:"moduleSetPsswordFlag",ref:T,onRefreshData:Q,onClosed:l[12]||(l[12]=e=>_(R)?R.value=!1:R=!1)},null,512)):x("",!0),g(M)?(p(),V(A,{key:2,ref_key:"moduleSetPanelPortFlag",ref:$,onRefreshData:Q,onClosed:l[13]||(l[13]=e=>_(M)?M.value=!1:M=!1)},null,512)):x("",!0),g(Z)?(p(),V(O,{key:3,ref_key:"moduleSetPanelBindAddressFlag",ref:N,onRefreshData:Q,onClosed:l[14]||(l[14]=e=>_(Z)?Z.value=!1:Z=!1)},null,512)):x("",!0),g(y)?(p(),V(z,{key:4,ref_key:"chooseSecurityPathFlag",ref:w,onRefreshData:ae,onClosed:l[15]||(l[15]=e=>_(y)?y.value=!1:y=!1)},null,512)):x("",!0),g(k)?(p(),V(B,{key:5,ref_key:"chooseSSLFlag",ref:j,onRefreshData:te,onClosed:l[16]||(l[16]=e=>_(k)?k.value=!1:k=!1)},null,512)):x("",!0),g(n)?(p(),V(C,{key:6,ref_key:"chooseDirShowFlag",ref:s,onChange:ee,onClosed:l[17]||(l[17]=e=>_(n)?n.value=!1:n=!1)},null,512)):x("",!0),g(b)?(p(),V(C,{key:7,ref_key:"chooseBackupPathShowFlag",ref:m,onChange:H,onClosed:l[18]||(l[18]=e=>_(b)?b.value=!1:b=!1)},null,512)):x("",!0)])),_:1})}}},[["__scopeId","data-v-4ef0f7d0"]]);export{Q as default};
