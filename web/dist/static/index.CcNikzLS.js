import{_ as e,d as t,u as s,A as o}from"./index.FQhv3U_5.js";import{l as i}from"./configEditor.DVr6iize.js";import{E as a,a as n}from"./element-plus.C3E-FvSa.js";import{k as l,r,h as d,ag as m,c as p,o as c,a as u,P as g,G as f,J as y,H as j,u as v,L as _,M as h,C as k,O as x,n as b}from"./@vue.CQt2tj-6.js";import"./axios.BhTbhqQQ.js";import"./crypto-js.BjUPrIIl.js";import"./@xterm.C7qPmoRH.js";import"./js-cookie.Ch5AnFJE.js";import"./vue-clipboard3.c61pm64N.js";import"./clipboard.BBhAuw9K.js";import"./pinia.CWB7oRTw.js";import"./@element-plus.CU4brdXH.js";import"./vue-router.BmPBvlxi.js";import"./nprogress.Dzr5m2b3.js";import"./pinia-plugin-persistedstate.DTf8V5gU.js";import"./destr.ZpApkS-1.js";import"./deep-pick-omit.DP_A4OSP.js";import"./lodash-es.CUM784Py.js";import"./@vueuse.7zPzjEtO.js";import"./@popperjs.DxP-MrnL.js";import"./@ctrl.D-8vaqgC.js";import"./dayjs.BpgH7LzR.js";import"./async-validator.BTKOuuO-.js";import"./memoize-one.Ds0C_khL.js";import"./normalize-wheel-es.BhHBPXsK.js";import"./@floating-ui.D1oRyyfp.js";import"./dialog.Bsrh65Nu.js";import"./index.CLtx-Eae.js";import"./vue-codemirror.CkyLiK-7.js";import"./codemirror.Fbop2eii.js";import"./@codemirror.CIOe3mu6.js";import"./@lezer.CQ-BhAmV.js";import"./crelt.DSg10-ms.js";import"./@marijn.Df4efayV.js";import"./style-mod.Dj2YSJ7-.js";import"./w3c-keyname.f-y9tSbI.js";const w={style:{"margin-bottom":"15px"},class:"lystatuscard"},I={class:"lyflex"},C={class:"lyflex"},L={style:{display:"flex","align-items":"end",width:"100%"}},M=e({__name:"index",setup(e){const M=t(),O=s();let S=l((()=>O.ismobile)),A=r({id:"",installed:!1,version:"",status:!1,name:""}),z=r({registry_mirrors:""});function B(){o.sysGetDockerMg({action:"get_settings"}).then((e=>{if(2e3==e.code){let t=e.data.registry_mirrors;z.value.registry_mirrors=t.join("\n")}else a.warning(e.msg)}))}function D(e="stop"){let t="\u786e\u5b9a\u8981\u505c\u6b62\u5417\uff1f",s=!1,i="\u542f\u52a8\u6210\u529f";"stop"==e?(M.loadingInfo.content="\u6b63\u5728\u505c\u6b62\u4e2d...",s=!1,i="\u505c\u6b62\u6210\u529f"):"reload"==e?(M.loadingInfo.content="\u6b63\u5728\u91cd\u8f7d\u914d\u7f6e\u4e2d...",t="\u786e\u5b9a\u8981\u91cd\u8f7d\u914d\u7f6e\u5417\uff1f",s=A.value.status,i="\u91cd\u8f7d\u914d\u7f6e\u6210\u529f"):"restart"==e&&(M.loadingInfo.content=A.value.status?"\u6b63\u5728\u91cd\u542f\u4e2d...":"\u6b63\u5728\u542f\u52a8\u4e2d...",t=A.value.status?"\u786e\u5b9a\u8981\u91cd\u542f\u5417\uff1f":"\u786e\u5b9a\u8981\u542f\u52a8\u5417\uff1f",s=!0,i=A.value.status?"\u91cd\u542f\u6210\u529f":"\u542f\u52a8\u6210\u529f"),n.confirm(`${t}`,"\u8b66\u544a",{closeOnClickModal:!1,cancelButtonText:"\u53d6\u6d88",confirmButtonText:"\u786e\u5b9a",type:"warning"}).then((t=>{M.loadingInfo.isLoading=!0,o.sysSoftManage({id:A.value.id,status:e,action:"status"}).then((e=>{M.loadingInfo.isLoading=!1,M.loadingInfo.content="",2e3==e.code?(a.success(i),A.value.status=s):a.warning(e.msg)}))})).catch((()=>{}))}let E=r(null),T=r(!1);function V(){T.value=!0,b((()=>{let e={id:A.value.id,action:"get_conf"},t={id:A.value.id,action:"save_conf"};E.value.handleOpen(e,t,"json","\u7f16\u8f91\u914d\u7f6e")}))}function F(){M.loadingInfo.isLoading=!0,M.loadingInfo.content="\u4fdd\u5b58\u4e2d...",o.sysDockerMg({cont:z.value.registry_mirrors,action:"set_registry_mirrors"}).then((e=>{M.loadingInfo.isLoading=!1,M.loadingInfo.content="",2e3==e.code?a.success("\u4fdd\u5b58\u6210\u529f"):a.warning(e.msg)}))}function G(){T.value=!1,B()}return d((()=>{!function(e="docker"){M.loadingInfo.isLoading=!0,M.loadingInfo.content="\u6b63\u5728\u83b7\u53d6...",o.sysSoftinfoMg({name:e,action:"get_soft_info"}).then((e=>{M.loadingInfo.isLoading=!1,M.loadingInfo.content="",2e3==e.code?A.value=e.data:a.warning(e.msg)}))}(),B()})),(e,t)=>{const s=m("el-tag"),a=m("el-button"),n=m("el-divider"),l=m("el-card"),r=m("el-input"),d=m("el-form-item"),b=m("el-col"),M=m("el-row"),O=m("el-form");return c(),p(x,null,[u("div",w,[g(l,{shadow:"hover",style:k({overflowX:v(S)?"auto":"none"})},{default:j((()=>[u("div",I,[v(A).installed?(c(),f(s,{key:0,style:{"margin-right":"20px"},effect:"dark",type:"success"},{default:j((()=>[_(h(v(A).name),1)])),_:1})):y("",!0),v(A).installed?y("",!0):(c(),f(s,{key:1,style:{"margin-right":"20px"},type:v(A).installed?"success":"info"},{default:j((()=>[_(h(v(A).installed?"\u5df2\u5b89\u88c5":"\u672a\u5b89\u88c5"),1)])),_:1},8,["type"])),g(s,{style:{"margin-right":"20px"}},{default:j((()=>[_("\u7248\u672c: "+h(v(A).version||"\u672a\u77e5"),1)])),_:1}),g(s,{style:{"margin-right":"20px"},type:v(A).status?"success":"danger"},{default:j((()=>[_("\u72b6\u6001: "+h(v(A).status?"\u5df2\u542f\u52a8":"\u672a\u542f\u52a8"),1)])),_:1},8,["type"]),u("div",C,[g(a,{type:"primary",link:"",onClick:t[0]||(t[0]=e=>D("stop")),disabled:!v(A).installed},{default:j((()=>t[3]||(t[3]=[_("\u505c\u6b62")]))),_:1},8,["disabled"]),g(n,{direction:"vertical"}),g(a,{type:"primary",link:"",onClick:t[1]||(t[1]=e=>D("restart")),disabled:!v(A).installed},{default:j((()=>t[4]||(t[4]=[_("\u91cd\u542f")]))),_:1},8,["disabled"])])])])),_:1},8,["style"])]),g(l,{shadow:"never",header:"\u5168\u5c40\u914d\u7f6e"},{default:j((()=>[g(O,{model:v(z),"label-width":"130px",style:{"margin-top":"20px"},"label-position":"right"},{default:j((()=>[g(M,null,{default:j((()=>[g(b,{xs:24,sm:20,md:15,lg:12,xl:12},{default:j((()=>[g(d,{label:"\u955c\u50cf\u52a0\u901f"},{default:j((()=>[u("div",L,[g(r,{type:"textarea",modelValue:v(z).registry_mirrors,"onUpdate:modelValue":t[2]||(t[2]=e=>v(z).registry_mirrors=e),rows:3,placeholder:"\u8bf7\u8f93\u5165\u955c\u50cf\u52a0\u901fURL\u5730\u5740\uff0c\u4e00\u884c\u4e00\u4e2a"},null,8,["modelValue"]),g(a,{type:"primary",icon:"Setting",onClick:F},{default:j((()=>t[5]||(t[5]=[_("\u4fdd\u5b58")]))),_:1})]),t[6]||(t[6]=u("span",{class:"ryhelp-tips"},"\u7528\u4e8e\u52a0\u901f\u955c\u50cf\u62c9\u53d6\uff0c\u4e00\u884c\u4e00\u4e2a\uff0c\u4e3a\u7a7a\u5219\u4e0d\u4f7f\u7528\u955c\u50cf\u52a0\u901f\uff08\u4fee\u6539\u540e\u91cd\u542fdocker\u751f\u6548\uff09",-1))])),_:1}),g(d,{label:"\u914d\u7f6e\u6587\u4ef6"},{default:j((()=>[g(a,{icon:"Tickets",type:"primary",onClick:V},{default:j((()=>t[7]||(t[7]=[_("\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6")]))),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1}),v(T)?(c(),f(i,{key:0,ref_key:"lyFileEditorFlag",ref:E,apiObj:v(o).sysSoftManage,saveApiObj:v(o).sysSoftManage,saveContentKey:"conf",canSave:!0,onClosed:G,width:"70%",top:"5vh"},null,8,["apiObj","saveApiObj"])):y("",!0)],64)}}},[["__scopeId","data-v-83ea6c43"]]);export{M as default};
