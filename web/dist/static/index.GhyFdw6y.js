import{T as e}from"./vue-codemirror.DFdUdG36.js";import{F as a,G as l,H as o,I as t,J as s,K as u,L as n,M as r,N as d,O as i,P as m,Q as p,R as v,E as c,T as h,z as f}from"./@codemirror.BkM7iGym.js";import{_ as g}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{k as y,b,e as j,j as x,n as S,o as V,G as _,C as w,D as N,u as z}from"./@vue.BluSRtaz.js";const B=g({__name:"index",props:{modelValue:{type:String,default:""},mode:{type:String,default:"javascript"},height:{type:[String,Number],default:"auto"},placeholder:{type:String,default:""},theme:{type:String,default:"dark"},readOnly:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},lineWrapping:{type:Boolean,default:!1},showLineNums:{type:Boolean,default:!0},fontSize:{type:String,default:"14px"}},emits:["update:modelValue","change"],setup(g,{expose:B,emit:C}){const W=C,O=g;let k=y((()=>Number(O.height)?Number(O.height)+"px":O.height));const I=y({get:()=>O.modelValue,set(e){W("change",e),W("update:modelValue",e)}});function L(e,a){if(null==e||null==e.state)return!1;if(!/^\d+$/.test(a)||+a<=0||+a>e.state.doc.lines)return!1;let l=e.state.doc.line(+a).from;return e.dispatch({selection:{anchor:l},userEvent:"select",scrollIntoView:!0}),!0}let D=b(null);const E=e=>{D.value=e.view},G=()=>D.value?D.value.state.doc.lines:0;b(G());let Q=y((()=>"javascript"==O.mode?a():"json"==O.mode?l():"css"==O.mode?o():"python"==O.mode?t():"vue"==O.mode?s():"php"==O.mode?u():"java"==O.mode?n():"go"==O.mode?r():"yaml"==O.mode?d():"xml"==O.mode?i():"markdown"==O.mode?m():"html"==O.mode?p():"sql"==O.mode?v():"log"==O.mode?null:a())),R=y((()=>c.readOnly.of(O.readOnly))),T=b([h,R.value]);function q(){const e=[h,R.value];Q.value&&null!==Q.value&&e.push(Q.value),O.lineWrapping&&e.push(f.lineWrapping),T.value=e}return j(O,((e,a)=>{q()}),{deep:!0}),x((()=>{if(O.bottom&&D.value&&S((()=>{L(D.value,G())})),Q.value&&null!==Q.value&&!T.value.some((e=>e===Q.value))){T.value.push(Q.value);const e=[...T.value];T.value=[],T.value=e}O.lineWrapping&&T.value.push(f.lineWrapping)})),j((()=>I.value),(e=>{O.bottom&&D.value&&S((()=>{L(D.value,G())}))})),B({scrollToBottom:function(){D.value&&L(D.value,G())},reloadConfig:q}),(a,l)=>(V(),_(z(e),{ref:"lyCodemirror",class:w(["lyCodemirror",g.showLineNums?"":"lyCodemirrorDynamic"]),modelValue:I.value,"onUpdate:modelValue":l[0]||(l[0]=e=>I.value=e),placeholder:g.placeholder,style:N({height:z(k),fontSize:g.fontSize}),autofocus:!0,"indent-with-tab":!0,"tab-size":4,extensions:z(T),onReady:E},null,8,["class","modelValue","placeholder","style","extensions"]))}},[["__scopeId","data-v-463778d1"]]);export{B as l};
