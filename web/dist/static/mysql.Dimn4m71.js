import{_ as e,d as a,K as l,e as t,A as o}from"./index.FQhv3U_5.js";import{l as s}from"./index.CLtx-Eae.js";import{a as n,E as i}from"./element-plus.C3E-FvSa.js";import{r as d,h as r,ag as _,G as u,o as f,H as c,P as p,a as m,M as b,u as g,D as z,L as h,J as v,t as y,c as x,O as k,a6 as j,n as V}from"./@vue.CQt2tj-6.js";import"./axios.BhTbhqQQ.js";import"./crypto-js.BjUPrIIl.js";import"./@xterm.C7qPmoRH.js";import"./js-cookie.Ch5AnFJE.js";import"./vue-clipboard3.c61pm64N.js";import"./clipboard.BBhAuw9K.js";import"./pinia.CWB7oRTw.js";import"./@element-plus.CU4brdXH.js";import"./vue-router.BmPBvlxi.js";import"./nprogress.Dzr5m2b3.js";import"./pinia-plugin-persistedstate.DTf8V5gU.js";import"./destr.ZpApkS-1.js";import"./deep-pick-omit.DP_A4OSP.js";import"./lodash-es.CUM784Py.js";import"./@vueuse.7zPzjEtO.js";import"./@popperjs.DxP-MrnL.js";import"./@ctrl.D-8vaqgC.js";import"./dayjs.BpgH7LzR.js";import"./async-validator.BTKOuuO-.js";import"./memoize-one.Ds0C_khL.js";import"./normalize-wheel-es.BhHBPXsK.js";import"./@floating-ui.D1oRyyfp.js";import"./vue-codemirror.CkyLiK-7.js";import"./codemirror.Fbop2eii.js";import"./@codemirror.CIOe3mu6.js";import"./@lezer.CQ-BhAmV.js";import"./crelt.DSg10-ms.js";import"./@marijn.Df4efayV.js";import"./style-mod.Dj2YSJ7-.js";import"./w3c-keyname.f-y9tSbI.js";const I=[{id:1,name:"Mem 1-2GB",data:{key_buffer_size:128,query_cache_size:64,tmp_table_size:64,innodb_buffer_pool_size:256,sort_buffer_size:768,read_buffer_size:768,read_rnd_buffer_size:512,join_buffer_size:1024,thread_stack:256,binlog_cache_size:64,thread_cache_size:64,table_open_cache:128,max_connections:100}},{id:2,name:"Mem 2-4GB",data:{key_buffer_size:256,query_cache_size:128,tmp_table_size:384,innodb_buffer_pool_size:384,sort_buffer_size:768,read_buffer_size:768,read_rnd_buffer_size:512,join_buffer_size:2048,thread_stack:256,binlog_cache_size:64,thread_cache_size:96,table_open_cache:192,max_connections:200}},{id:3,name:"Mem 4-8GB",data:{key_buffer_size:384,query_cache_size:192,tmp_table_size:512,innodb_buffer_pool_size:512,sort_buffer_size:1024,read_buffer_size:1024,read_rnd_buffer_size:768,join_buffer_size:2048,thread_stack:256,binlog_cache_size:128,thread_cache_size:128,table_open_cache:384,max_connections:300}},{id:4,name:"Mem 8-16GB",data:{key_buffer_size:512,query_cache_size:256,tmp_table_size:1024,innodb_buffer_pool_size:1024,sort_buffer_size:2048,read_buffer_size:2048,read_rnd_buffer_size:1024,join_buffer_size:4096,thread_stack:384,binlog_cache_size:192,thread_cache_size:192,table_open_cache:1024,max_connections:400}},{id:5,name:"Mem 16-32GB",data:{key_buffer_size:1024,query_cache_size:384,tmp_table_size:2048,innodb_buffer_pool_size:4096,innodb_log_buffer_size:32,sort_buffer_size:4096,read_buffer_size:4096,read_rnd_buffer_size:2048,join_buffer_size:8192,thread_stack:512,binlog_cache_size:256,thread_cache_size:256,table_open_cache:2048,max_connections:500}}],M={class:"statusc"},w={class:"lyflex status"},B={class:"lyflex opbtn"},C={class:"lyflex",style:{"justify-content":"left"}},L={class:"lyflex"},S={class:"lyflex"},U={class:"lyflex"},q={class:"lyflex"},T={class:"lyflex"},F={class:"lyflex"},K={class:"lyflex"},N={class:"lyflex"},G={class:"lyflex"},O={class:"lyflex"},P={class:"lyflex"},Q=e({__name:"mysql",props:{data:{type:Object}},emits:["refreshStatus"],setup(e,{emit:Q}){const R=a(),D=Q,W=e;let $=d({id:null,name:"",error_log:"",slow_log:"",status:!1,loadstatus:{},conf:"",oldConf:""}),A=d("status"),E=d(""),J=d({key_buffer_size:0,query_cache_size:0,tmp_table_size:0,innodb_buffer_pool_size:0,innodb_log_buffer_size:0,sort_buffer_size:0,read_buffer_size:0,read_rnd_buffer_size:0,join_buffer_size:0,thread_stack:0,binlog_cache_size:0,thread_cache_size:0,table_open_cache:0,max_connections:0});function H(e){for(let a=0;a<I.length;a++)if(I[a].id==e){J.value.key_buffer_size=I[a].data.key_buffer_size,J.value.query_cache_size=I[a].data.query_cache_size,J.value.tmp_table_size=I[a].data.tmp_table_size,J.value.innodb_buffer_pool_size=I[a].data.innodb_buffer_pool_size,J.value.sort_buffer_size=I[a].data.sort_buffer_size,J.value.read_buffer_size=I[a].data.read_buffer_size,J.value.read_rnd_buffer_size=I[a].data.read_rnd_buffer_size,J.value.join_buffer_size=I[a].data.join_buffer_size,J.value.thread_stack=I[a].data.thread_stack,J.value.binlog_cache_size=I[a].data.binlog_cache_size,J.value.thread_cache_size=I[a].data.thread_cache_size,J.value.table_open_cache=I[a].data.table_open_cache,J.value.max_connections=I[a].data.max_connections;break}}function X(e,a){return{required:!0,trigger:"blur",min:e,max:a,type:"number",message:`\u6570\u5b57\u53ef\u9009\u8303\u56f4${e}\u5230${a}`}}let Y={required:!0,trigger:"blur",min:0,type:"number",message:"\u53ea\u80fd\u4e3a\u6b63\u6574\u6570\u548c0"},Z=d({key_buffer_size:[Y,X(1,102400)],tmp_table_size:[Y,X(1,102400)],innodb_buffer_pool_size:[Y,X(1,102400)],innodb_log_buffer_size:[Y,X(8,102400)],sort_buffer_size:[Y,X(1,102400)],read_buffer_size:[Y,X(1,102400)],read_rnd_buffer_size:[Y,X(1,102400)],join_buffer_size:[Y,X(1,102400)],thread_stack:[Y,X(1,102400)],binlog_cache_size:[Y,X(1,102400)],thread_cache_size:[Y,X(1,1e4)],table_open_cache:[Y,X(1,1e4)],max_connections:[Y,X(1,1e4)]}),ee=d(null);function ae(){ee.value.validate((e=>{if(e){R.loadingInfo.isLoading=!0,R.loadingInfo.content="\u6b63\u5728\u4fdd\u5b58...";let e={id:$.value.id,cont:J.value,action:"set_performance"};o.sysSoftManage(e).then((e=>{R.loadingInfo.isLoading=!1,R.loadingInfo.content="",2e3==e.code?i.success(e.msg):i.warning(e.msg)}))}}))}function le(e="stop"){let a="\u786e\u5b9a\u8981\u505c\u6b62\u5417\uff1f",l=!1,t="\u542f\u52a8\u6210\u529f";"stop"==e?(R.loadingInfo.content="\u6b63\u5728\u505c\u6b62\u4e2d...",l=!1,t="\u505c\u6b62\u6210\u529f"):"reload"==e?(R.loadingInfo.content="\u6b63\u5728\u91cd\u8f7d\u914d\u7f6e\u4e2d...",a="\u786e\u5b9a\u8981\u91cd\u8f7d\u914d\u7f6e\u5417\uff1f",l=!0,t="\u91cd\u8f7d\u914d\u7f6e\u6210\u529f"):"restart"==e&&(R.loadingInfo.content=$.value.status?"\u6b63\u5728\u91cd\u542f\u4e2d...":"\u6b63\u5728\u542f\u52a8\u4e2d...",a=$.value.status?"\u786e\u5b9a\u8981\u91cd\u542f\u5417\uff1f":"\u786e\u5b9a\u8981\u542f\u52a8\u5417\uff1f",l=!0,t=$.value.status?"\u91cd\u542f\u6210\u529f":"\u542f\u52a8\u6210\u529f"),n.confirm(`${a}`,"\u8b66\u544a",{closeOnClickModal:!1,cancelButtonText:"\u53d6\u6d88",confirmButtonText:"\u786e\u5b9a",type:"warning"}).then((a=>{R.loadingInfo.isLoading=!0,o.sysSoftManage({id:$.value.id,status:e,action:"status"}).then((e=>{R.loadingInfo.isLoading=!1,R.loadingInfo.content="",2e3==e.code?(i.success(t),$.value.status=l,D("refreshStatus",{id:$.value.id,status:l})):i.warning(e.msg)}))})).catch((()=>{}))}function te(e,a){return isNaN(e)?a:e}function oe(e){let a=e+"%";return"NaN%"==a&&(a="OFF"),a}let se=d(null);let ne=d(null);function ie(e){"error_log"==e.props.name?(R.loadingInfo.isLoading=!0,R.loadingInfo.content="\u6b63\u5728\u83b7\u53d6\u9519\u8bef\u65e5\u5fd7...",o.sysSoftManage({id:$.value.id,action:"get_error_log"}).then((e=>{R.loadingInfo.isLoading=!1,R.loadingInfo.content="",2e3==e.code?($.value.error_log=e.data,V((()=>{se.value&&se.value.scrollToBottom()}))):i.warning(e.msg)}))):"slow_log"==e.props.name?(R.loadingInfo.isLoading=!0,R.loadingInfo.content="\u6b63\u5728\u83b7\u53d6\u6162\u65e5\u5fd7...",o.sysSoftManage({id:$.value.id,action:"get_slow_log"}).then((e=>{R.loadingInfo.isLoading=!1,R.loadingInfo.content="",2e3==e.code?($.value.slow_log=e.data,V((()=>{ne.value&&ne.value.scrollToBottom()}))):i.warning(e.msg)}))):"loadstatus"===e.props.name?(R.loadingInfo.isLoading=!0,R.loadingInfo.content="\u6b63\u5728\u83b7\u53d6\u8d1f\u8f7d\u72b6\u6001...",o.sysSoftManage({id:$.value.id,action:"get_loadstatus"}).then((e=>{R.loadingInfo.isLoading=!1,R.loadingInfo.content="",2e3==e.code?$.value.loadstatus=e.data:i.warning(e.msg)}))):"edit_conf"===e.props.name?(R.loadingInfo.isLoading=!0,R.loadingInfo.content="\u6b63\u5728\u83b7\u53d6\u914d\u7f6e\u6587\u4ef6...",o.sysSoftManage({id:$.value.id,action:"get_conf"}).then((e=>{R.loadingInfo.isLoading=!1,R.loadingInfo.content="",2e3==e.code?($.value.conf=e.data,$.value.oldConf=e.data):i.warning(e.msg)}))):"performanceSettings"===e.props.name&&(R.loadingInfo.isLoading=!0,R.loadingInfo.content="",o.sysSoftManage({id:$.value.id,action:"get_performance"}).then((e=>{R.loadingInfo.isLoading=!1,2e3==e.code?J.value=e.data:i.warning(e.msg)})),ee.value&&ee.value.resetFields())}function de(){if($.value.oldConf==$.value.conf)return void i.warning("\u914d\u7f6e\u6587\u4ef6\u672a\u53d8\u52a8\uff0c\u65e0\u9700\u4fdd\u5b58!!!");if(""==$.value.conf||null==$.value.conf)return void i.warning("\u914d\u7f6e\u6587\u4ef6\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u914d\u7f6e");n.confirm("\u786e\u5b9a\u8981\u4fdd\u5b58\u914d\u7f6e\u6587\u4ef6\u5417\uff1f","\u8b66\u544a",{closeOnClickModal:!1,cancelButtonText:"\u53d6\u6d88",confirmButtonText:"\u786e\u5b9a",type:"warning"}).then((e=>{R.loadingInfo.isLoading=!0,R.loadingInfo.content="\u6b63\u5728\u4fdd\u5b58\u914d\u7f6e\u6587\u4ef6...",o.sysSoftManage({id:$.value.id,conf:$.value.conf,action:"save_conf"}).then((e=>{R.loadingInfo.isLoading=!1,R.loadingInfo.content="",2e3==e.code?i.success("\u4fdd\u5b58\u6210\u529f\uff0c\u8bf7\u624b\u52a8\u91cd\u8f7d\u914d\u7f6e!!!"):i.warning(e.msg)}))})).catch((()=>{}))}function re(){let e=W.data.version;if(!e)return!1;const a=e.match(/^(\d+)/);if(a){return parseInt(a[1],10)>=8}return!1}return r((()=>{$.value.id=W.data.id,$.value.name=W.data.name,$.value.status=W.data.status})),(e,a)=>{const o=_("CaretRight"),n=_("el-icon"),i=_("el-button"),d=_("el-tab-pane"),r=_("el-option"),V=_("el-select"),Q=_("el-divider"),R=_("el-input"),D=_("el-form-item"),W=_("el-col"),_e=_("el-row"),ue=_("el-form"),fe=_("el-descriptions-item"),ce=_("InfoFilled"),pe=_("el-tooltip"),me=_("el-descriptions"),be=_("el-tabs");return f(),u(be,{"tab-position":"left",modelValue:g(A),"onUpdate:modelValue":a[21]||(a[21]=e=>y(A)?A.value=e:A=e),onTabClick:ie},{default:c((()=>[p(d,{label:"\u670d\u52a1\u72b6\u6001",name:"status"},{default:c((()=>[m("div",M,[m("div",w,[m("div",null,"\u5f53\u524d\u72b6\u6001\uff1a"+b(g($).status?"\u542f\u52a8":"\u505c\u6b62"),1),p(n,{class:z(g($).status?"on":"off")},{default:c((()=>[p(o)])),_:1},8,["class"])]),m("div",B,[p(i,{onClick:a[0]||(a[0]=e=>le("restart"))},{default:c((()=>[h(b(g($).status?"\u91cd\u542f":"\u542f\u52a8"),1)])),_:1}),p(i,{onClick:a[1]||(a[1]=e=>le("stop")),disabled:!g($).status},{default:c((()=>a[22]||(a[22]=[h("\u505c\u6b62")]))),_:1},8,["disabled"]),p(i,{onClick:a[2]||(a[2]=e=>le("reload")),disabled:!g($).status},{default:c((()=>a[23]||(a[23]=[h("\u91cd\u8f7d\u914d\u7f6e")]))),_:1},8,["disabled"])])])])),_:1}),p(d,{label:"\u6027\u80fd\u8c03\u6574",name:"performanceSettings"},{default:c((()=>["performanceSettings"==g(A)?(f(),u(ue,{key:0,model:g(J),rules:g(Z),ref_key:"performanceRef",ref:ee,"label-position":"top"},{default:c((()=>[m("div",C,[a[24]||(a[24]=h(" \u4f18\u5316\u5efa\u8bae\uff1a ")),p(V,{onChange:H,placeholder:"\u8bf7\u9009\u62e9",clearable:"",modelValue:g(E),"onUpdate:modelValue":a[3]||(a[3]=e=>y(E)?E.value=e:E=e),style:{width:"200px"}},{default:c((()=>[(f(!0),x(k,null,j(g(I),(e=>(f(),u(r,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),p(Q,{style:{margin:"12px 0 20px 0"},class:"xntips","content-position":"left"},{default:c((()=>a[25]||(a[25]=[h("\u6027\u80fd\u8c03\u6574")]))),_:1}),p(_e,{gutter:20},{default:c((()=>[p(W,{xs:24,sm:12,md:8,lg:8,xl:8},{default:c((()=>[p(D,{label:"key_buffer_size",prop:"key_buffer_size"},{default:c((()=>[p(R,{clearable:"",modelValue:g(J).key_buffer_size,"onUpdate:modelValue":a[4]||(a[4]=e=>g(J).key_buffer_size=e),modelModifiers:{number:!0}},{append:c((()=>a[26]||(a[26]=[h("MB")]))),_:1},8,["modelValue"]),a[27]||(a[27]=m("span",{class:"right-tips"},"\u7d22\u5f15\u7f13\u51b2\u533a\u5927\u5c0f",-1))])),_:1}),p(D,{label:"join_buffer_size",prop:"join_buffer_size"},{default:c((()=>[p(R,{clearable:"",modelValue:g(J).join_buffer_size,"onUpdate:modelValue":a[5]||(a[5]=e=>g(J).join_buffer_size=e),modelModifiers:{number:!0}},{append:c((()=>a[28]||(a[28]=[h("KB")]))),_:1},8,["modelValue"]),a[29]||(a[29]=m("span",{class:"right-tips"},"join\u8054\u8868\u65f6\u7f13\u5b58\u5927\u5c0f",-1))])),_:1}),p(D,{label:"tmp_table_size",prop:"tmp_table_size"},{default:c((()=>[p(R,{clearable:"",modelValue:g(J).tmp_table_size,"onUpdate:modelValue":a[6]||(a[6]=e=>g(J).tmp_table_size=e),modelModifiers:{number:!0}},{append:c((()=>a[30]||(a[30]=[h("MB")]))),_:1},8,["modelValue"]),a[31]||(a[31]=m("span",{class:"right-tips"},"\u4e34\u65f6\u8868\u7f13\u5b58\u5927\u5c0f",-1))])),_:1}),p(D,{label:"innodb_buffer_pool_size",prop:"innodb_buffer_pool_size"},{default:c((()=>[p(R,{clearable:"",modelValue:g(J).innodb_buffer_pool_size,"onUpdate:modelValue":a[7]||(a[7]=e=>g(J).innodb_buffer_pool_size=e),modelModifiers:{number:!0}},{append:c((()=>a[32]||(a[32]=[h("MB")]))),_:1},8,["modelValue"]),a[33]||(a[33]=m("span",{class:"right-tips"},"InnoDB\u7f13\u51b2\u533a\u5927\u5c0f",-1))])),_:1}),p(D,{label:"innodb_log_buffer_size",prop:"innodb_log_buffer_size"},{default:c((()=>[p(R,{clearable:"",modelValue:g(J).innodb_log_buffer_size,"onUpdate:modelValue":a[8]||(a[8]=e=>g(J).innodb_log_buffer_size=e),modelModifiers:{number:!0}},{append:c((()=>a[34]||(a[34]=[h("MB")]))),_:1},8,["modelValue"]),a[35]||(a[35]=m("span",{class:"right-tips"},"InnoDB\u65e5\u5fd7\u7f13\u51b2\u533a\u5927\u5c0f",-1))])),_:1})])),_:1}),p(W,{xs:24,sm:12,md:8,lg:8,xl:8},{default:c((()=>[p(D,{label:"read_rnd_buffer_size",prop:"read_rnd_buffer_size"},{default:c((()=>[p(R,{clearable:"",modelValue:g(J).read_rnd_buffer_size,"onUpdate:modelValue":a[9]||(a[9]=e=>g(J).read_rnd_buffer_size=e),modelModifiers:{number:!0}},{append:c((()=>a[36]||(a[36]=[h("KB")]))),_:1},8,["modelValue"]),a[37]||(a[37]=m("span",{class:"right-tips"},"\u968f\u673a\u8bfb\u53d6\u6bcf\u4e2a\u8fde\u63a5\u5185\u5b58\u5927\u5c0f",-1))])),_:1}),p(D,{label:"query_cache_size",prop:"query_cache_size",rules:re()?[]:[g(Y),X(0,102400)]},{default:c((()=>[p(R,{clearable:"",modelValue:g(J).query_cache_size,"onUpdate:modelValue":a[10]||(a[10]=e=>g(J).query_cache_size=e),modelModifiers:{number:!0},disabled:re()},{append:c((()=>a[38]||(a[38]=[h("MB")]))),_:1},8,["modelValue","disabled"]),a[39]||(a[39]=m("span",{class:"right-tips"},"\u67e5\u8be2\u7f13\u5b58(v8.x\u4e0d\u652f\u6301),0\u5173\u95ed\u7f13\u5b58",-1))])),_:1},8,["rules"]),p(D,{label:"thread_stack",prop:"thread_stack"},{default:c((()=>[p(R,{clearable:"",modelValue:g(J).thread_stack,"onUpdate:modelValue":a[11]||(a[11]=e=>g(J).thread_stack=e),modelModifiers:{number:!0}},{append:c((()=>a[40]||(a[40]=[h("KB")]))),_:1},8,["modelValue"]),a[41]||(a[41]=m("span",{class:"right-tips"},"\u6bcf\u4e2a\u7ebf\u7a0b\u7684\u6808\u5927\u5c0f",-1))])),_:1}),p(D,{label:"binlog_cache_size",prop:"binlog_cache_size"},{default:c((()=>[p(R,{clearable:"",modelValue:g(J).binlog_cache_size,"onUpdate:modelValue":a[12]||(a[12]=e=>g(J).binlog_cache_size=e),modelModifiers:{number:!0}},{append:c((()=>a[42]||(a[42]=[h("KB")]))),_:1},8,["modelValue"]),a[43]||(a[43]=m("span",{class:"right-tips"},"\u6bcf\u7ebf\u7a0b\u5199\u5165binlog\u7684\u7f13\u5b58\u5927\u5c0f",-1))])),_:1}),p(D,{label:"sort_buffer_size",prop:"sort_buffer_size"},{default:c((()=>[p(R,{clearable:"",modelValue:g(J).sort_buffer_size,"onUpdate:modelValue":a[13]||(a[13]=e=>g(J).sort_buffer_size=e),modelModifiers:{number:!0}},{append:c((()=>a[44]||(a[44]=[h("KB")]))),_:1},8,["modelValue"]),a[45]||(a[45]=m("span",{class:"right-tips"},"\u6392\u5e8f\u65f6\u6bcf\u4e2a\u8fde\u63a5\u5185\u5b58\u5927\u5c0f",-1))])),_:1})])),_:1}),p(W,{xs:24,sm:12,md:8,lg:8,xl:8},{default:c((()=>[p(D,{label:"read_buffer_size",prop:"read_buffer_size"},{default:c((()=>[p(R,{clearable:"",modelValue:g(J).read_buffer_size,"onUpdate:modelValue":a[14]||(a[14]=e=>g(J).read_buffer_size=e),modelModifiers:{number:!0}},{append:c((()=>a[46]||(a[46]=[h("KB")]))),_:1},8,["modelValue"]),a[47]||(a[47]=m("span",{class:"right-tips"},"\u626b\u8868\u65f6\u6bcf\u4e2a\u8fde\u63a5\u5185\u5b58\u5927\u5c0f",-1))])),_:1}),p(D,{label:"max_connections",prop:"max_connections"},{default:c((()=>[p(R,{clearable:"",modelValue:g(J).max_connections,"onUpdate:modelValue":a[15]||(a[15]=e=>g(J).max_connections=e),modelModifiers:{number:!0}},null,8,["modelValue"]),a[48]||(a[48]=m("span",{class:"right-tips"},"\u6700\u5927\u8fde\u63a5\u6570",-1))])),_:1}),p(D,{label:"table_open_cache",prop:"table_open_cache"},{default:c((()=>[p(R,{clearable:"",modelValue:g(J).table_open_cache,"onUpdate:modelValue":a[16]||(a[16]=e=>g(J).table_open_cache=e),modelModifiers:{number:!0}},null,8,["modelValue"]),a[49]||(a[49]=m("span",{class:"right-tips"},"\u8868\u7f13\u5b58\u5927\u5c0f",-1))])),_:1}),p(D,{label:"thread_cache_size",prop:"thread_cache_size"},{default:c((()=>[p(R,{clearable:"",modelValue:g(J).thread_cache_size,"onUpdate:modelValue":a[17]||(a[17]=e=>g(J).thread_cache_size=e),modelModifiers:{number:!0}},null,8,["modelValue"]),a[50]||(a[50]=m("span",{class:"right-tips"},"\u7ebf\u7a0b\u7f13\u5b58\u5927\u5c0f",-1))])),_:1}),p(D,{label:" \xa0"},{default:c((()=>[p(i,{type:"primary",onClick:ae,disabled:!g($).status},{default:c((()=>a[51]||(a[51]=[h(" \u4fdd\u5b58\u5e76\u91cd\u8f7d ")]))),_:1},8,["disabled"]),a[52]||(a[52]=m("span",{class:"right-tips"},"Mysql\u672a\u8fd0\u884c\uff0c\u4e0d\u5efa\u8bae\u4fdd\u5b58\u914d\u7f6e",-1))])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])):v("",!0)])),_:1}),p(d,{label:"\u8d1f\u8f7d\u72b6\u6001",name:"loadstatus"},{default:c((()=>[p(me,{border:!0,column:3,direction:"vertical",title:"\u8fd0\u884c\u8d1f\u8f7d"},{default:c((()=>[p(fe,{label:"\u542f\u52a8\u65f6\u95f4"},{default:c((()=>[h(b(g($).loadstatus.RunTime?g(l)(1e3*g($).loadstatus.RunTime):""),1)])),_:1}),p(fe,{label:"\u603b\u8fde\u63a5\u6b21\u6570"},{default:c((()=>[h(b(g($).loadstatus.Connections||0),1)])),_:1}),p(fe,{label:"\u6bcf\u79d2\u67e5\u8be2(QPS)"},{default:c((()=>[h(b(parseInt(g($).loadstatus.Questions/g($).loadstatus.Uptime)||0),1)])),_:1}),p(fe,{label:"\u6bcf\u79d2\u6b21\u6570(TPS)"},{default:c((()=>[h(b(parseInt((parseInt(g($).loadstatus.Com_commit)+parseInt(g($).loadstatus.Com_rollback))/g($).loadstatus.Uptime)||0),1)])),_:1}),p(fe,{label:"\u53d1\u9001/\u63a5\u6536"},{default:c((()=>[h(b(g(t)(g($).loadstatus.Bytes_sent)+"/"+g(t)(g($).loadstatus.Bytes_received)||""),1)])),_:1}),p(fe,{label:"File/Position"},{default:c((()=>[h(b(g($).loadstatus.File+"/"+g($).loadstatus.Position||""),1)])),_:1}),p(fe,null,{label:c((()=>[m("div",L,[a[53]||(a[53]=h(" \u6d3b\u52a8/\u6700\u9ad8\u8fde\u63a5\u6570 ")),p(pe,{effect:"dark",content:"\u82e5\u503c\u8fc7\u5927\uff0c\u914d\u7f6e\u6587\u4ef6\u589e\u52a0 thread_cache_size/max_connections",placement:"top-start"},{default:c((()=>[p(n,null,{default:c((()=>[p(ce)])),_:1})])),_:1})])])),default:c((()=>[h(" "+b(g($).loadstatus.Threads_running+"/"+g($).loadstatus.Max_used_connections||""),1)])),_:1}),p(fe,null,{label:c((()=>[m("div",S,[a[54]||(a[54]=h(" \u7ebf\u7a0b\u7f13\u5b58\u547d\u4e2d\u7387 ")),p(pe,{effect:"dark",content:"\u82e5\u503c\u8fc7\u4f4e\uff0c\u914d\u7f6e\u6587\u4ef6\u589e\u52a0 thread_cache_size",placement:"top-start"},{default:c((()=>[p(n,null,{default:c((()=>[p(ce)])),_:1})])),_:1})])])),default:c((()=>[h(" "+b((100*(1-g($).loadstatus.Threads_created/g($).loadstatus.Connections)).toFixed(2)+"%"||0),1)])),_:1}),p(fe,null,{label:c((()=>[m("div",U,[a[55]||(a[55]=h(" \u7d22\u5f15\u547d\u4e2d\u7387 ")),p(pe,{effect:"dark",content:"\u82e5\u503c\u8fc7\u4f4e\uff0c\u914d\u7f6e\u6587\u4ef6\u589e\u52a0 key_buffer_size",placement:"top-start"},{default:c((()=>[p(n,null,{default:c((()=>[p(ce)])),_:1})])),_:1})])])),default:c((()=>[h(" "+b(te((100*(1-g($).loadstatus.Key_reads/g($).loadstatus.Key_read_requests)).toFixed(2),"0")+"%"||""),1)])),_:1}),p(fe,null,{label:c((()=>[m("div",q,[a[56]||(a[56]=h(" Innodb\u7d22\u5f15\u547d\u4e2d\u7387 ")),p(pe,{effect:"dark",content:"\u82e5\u503c\u8fc7\u4f4e\uff0c\u914d\u7f6e\u6587\u4ef6\u589e\u52a0 innodb_buffer_pool_size",placement:"top-start"},{default:c((()=>[p(n,null,{default:c((()=>[p(ce)])),_:1})])),_:1})])])),default:c((()=>[h(" "+b(te((100*(1-g($).loadstatus.Innodb_buffer_pool_reads/g($).loadstatus.Innodb_buffer_pool_read_requests)).toFixed(2),"0")+"%"||""),1)])),_:1}),p(fe,null,{label:c((()=>[m("div",T,[a[57]||(a[57]=h(" \u67e5\u8be2\u7f13\u5b58\u547d\u4e2d\u7387 ")),p(pe,{effect:"dark",content:"\u82e5\u503c\u8fc7\u4f4e\uff0c\u914d\u7f6e\u6587\u4ef6\u589e\u52a0 query_cache_size",placement:"top-start"},{default:c((()=>[p(n,null,{default:c((()=>[p(ce)])),_:1})])),_:1})])])),default:c((()=>[h(" "+b(oe((parseInt(g($).loadstatus.Qcache_hits)/(parseInt(g($).loadstatus.Qcache_hits)+parseInt(g($).loadstatus.Qcache_inserts))*100).toFixed(2))||""),1)])),_:1}),p(fe,null,{label:c((()=>[m("div",F,[a[58]||(a[58]=h(" \u521b\u5efa\u4e34\u65f6\u8868\u5230\u78c1\u76d8 ")),p(pe,{effect:"dark",content:"\u82e5\u503c\u8fc7\u5927\uff0c\u914d\u7f6e\u6587\u4ef6\u589e\u52a0 tmp_table_size",placement:"top-start"},{default:c((()=>[p(n,null,{default:c((()=>[p(ce)])),_:1})])),_:1})])])),default:c((()=>[h(" "+b(te((g($).loadstatus.Created_tmp_disk_tables/g($).loadstatus.Created_tmp_tables*100).toFixed(2),"0")+"%"||""),1)])),_:1}),p(fe,null,{label:c((()=>[m("div",K,[a[59]||(a[59]=h(" \u5df2\u6253\u5f00\u7684\u8868 ")),p(pe,{effect:"dark",content:"\u914d\u7f6e\u6587\u4ef6 table_open_cache \u503c\u5e94 >= \u6b64\u503c",placement:"top-start"},{default:c((()=>[p(n,null,{default:c((()=>[p(ce)])),_:1})])),_:1})])])),default:c((()=>[h(" "+b(g($).loadstatus.Open_tables||0),1)])),_:1}),p(fe,null,{label:c((()=>[m("div",N,[a[60]||(a[60]=h(" \u5168\u8fde\u63a5\u67e5\u8be2\u91cf(Full Join) ")),p(pe,{effect:"dark",content:"\u82e5\u503c\u8fc7\u5927\uff0c\u8bf7\u907f\u514d\u4f7f\u7528\u5168\u8fde\u63a5\u3001\u53ef\u901a\u8fc7\u5176\u4ed6\u8fde\u63a5\u65b9\u5f0f\uff08\u5982\u5185\u8fde\u63a5\u3001\u5de6\u8fde\u63a5\uff09\u66ff\u4ee3\u5168\u8fde\u63a5",placement:"top-start"},{default:c((()=>[p(n,null,{default:c((()=>[p(ce)])),_:1})])),_:1})])])),default:c((()=>[h(" "+b(g($).loadstatus.Select_full_join||0),1)])),_:1}),p(fe,null,{label:c((()=>[m("div",G,[a[61]||(a[61]=h(" \u8303\u56f4\u67e5\u8be2\u7d22\u5f15\u68c0\u67e5\u6b21\u6570 ")),p(pe,{effect:"dark",content:"\u82e5\u503c\u8fc7\u5927\uff0c\u8bf7\u4f18\u5316\u7d22\u5f15\u3001\u5c3d\u91cf\u51cf\u5c11\u5728\u67e5\u8be2\u4e2d\u4f7f\u7528\u590d\u6742\u7684\u6761\u4ef6\u6216\u591a\u4e2a\u8303\u56f4\u64cd\u4f5c\uff0c\u4ee5\u964d\u4f4e\u9700\u8981\u68c0\u67e5\u7684\u8303\u56f4\u5927\u5c0f",placement:"top-start"},{default:c((()=>[p(n,null,{default:c((()=>[p(ce)])),_:1})])),_:1})])])),default:c((()=>[h(" "+b(g($).loadstatus.Select_range_check||0),1)])),_:1}),p(fe,null,{label:c((()=>[m("div",O,[a[62]||(a[62]=h(" \u6392\u5e8f\u540e\u7684\u5408\u5e76\u6b21\u6570 ")),p(pe,{effect:"dark",content:"\u82e5\u503c\u8fc7\u5927\uff0c\u914d\u7f6e\u6587\u4ef6\u589e\u52a0 sort_buffer_size",placement:"top-start"},{default:c((()=>[p(n,null,{default:c((()=>[p(ce)])),_:1})])),_:1})])])),default:c((()=>[h(" "+b(g($).loadstatus.Sort_merge_passes||0),1)])),_:1}),p(fe,null,{label:c((()=>[m("div",P,[a[63]||(a[63]=h(" \u9501\u8868\u7b49\u5f85\u6b21\u6570 ")),p(pe,{effect:"dark",content:"\u82e5\u503c\u8fc7\u5927\uff0c\u8bf7\u4f18\u5316\u67e5\u8be2\u8bed\u53e5\uff0c\u51cf\u5c11\u9501\u7ade\u4e89",placement:"top-start"},{default:c((()=>[p(n,null,{default:c((()=>[p(ce)])),_:1})])),_:1})])])),default:c((()=>[h(" "+b(g($).loadstatus.Table_locks_waited||0),1)])),_:1})])),_:1})])),_:1}),p(d,{label:"\u914d\u7f6e\u4fee\u6539",name:"edit_conf"},{default:c((()=>[p(s,{modelValue:g($).conf,"onUpdate:modelValue":a[18]||(a[18]=e=>g($).conf=e),fontSize:"13px",placeholder:g($).conf?"":"\u672a\u83b7\u53d6\u914d\u7f6e\u6587\u4ef6",showLineNums:!0,lineWrapping:!0,mode:"javascript",height:"60vh","read-only":!1,ref:"lyCodemirrorConf"},null,8,["modelValue","placeholder"]),p(i,{type:"primary",style:{"margin-top":"10px","margin-bottom":"10px"},onClick:de},{default:c((()=>a[64]||(a[64]=[h("\u4fdd\u5b58")]))),_:1}),a[65]||(a[65]=m("div",{class:"ry-cj-care"},[m("li",null,"\u82e5\u60a8\u4e0d\u4e86\u89e3Nginx\u7684\u914d\u7f6e\u6587\u4ef6\u89c4\u5219\uff0c\u8bf7\u52ff\u968f\u610f\u4fee\u6539!!!"),m("li",null,"\u5feb\u6377\u952e CTRL+F \u67e5\u627e\u548c\u66ff\u6362\u5185\u5bb9")],-1))])),_:1}),p(d,{label:"\u9519\u8bef\u65e5\u5fd7",name:"error_log"},{default:c((()=>[p(s,{modelValue:g($).error_log,"onUpdate:modelValue":a[19]||(a[19]=e=>g($).error_log=e),fontSize:"13px",placeholder:g($).error_log?"":"\u5f53\u524d\u6ca1\u6709\u9519\u8bef\u65e5\u5fd7\uff01",showLineNums:!1,lineWrapping:!1,mode:"log",height:"68vh","read-only":!0,ref_key:"lyCodemirrorErrorLog",ref:se},null,8,["modelValue","placeholder"])])),_:1}),p(d,{label:"\u6162\u65e5\u5fd7",name:"slow_log"},{default:c((()=>[p(s,{modelValue:g($).slow_log,"onUpdate:modelValue":a[20]||(a[20]=e=>g($).slow_log=e),fontSize:"13px",placeholder:g($).slow_log?"":"\u5f53\u524d\u6ca1\u6709\u6162\u65e5\u5fd7\uff01",showLineNums:!1,lineWrapping:!1,mode:"log",height:"68vh","read-only":!0,ref_key:"lyCodemirrorSlowLog",ref:ne},null,8,["modelValue","placeholder"])])),_:1})])),_:1},8,["modelValue"])}}},[["__scopeId","data-v-da7b982f"]]);export{Q as default};
