import{T as e}from"./vue-codemirror.BiWnDJmD.js";import{F as a,G as l,H as o,I as t,J as s,K as u,L as n,M as r,N as d,O as i,P as m,Q as p,R as v,E as c,T as h,z as f}from"./@codemirror.BkM7iGym.js";import{_ as g}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{k as y,b,e as j,j as x,n as S,o as V,M as _,I as w,J as N,u as z}from"./@vue.BMBj57q3.js";const B=g({__name:"index",props:{modelValue:{type:String,default:""},mode:{type:String,default:"javascript"},height:{type:[String,Number],default:"auto"},placeholder:{type:String,default:""},theme:{type:String,default:"dark"},readOnly:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},lineWrapping:{type:Boolean,default:!1},showLineNums:{type:Boolean,default:!0},fontSize:{type:String,default:"14px"}},emits:["update:modelValue","change"],setup(g,{expose:B,emit:W}){const C=W,I=g;let O=y((()=>Number(I.height)?Number(I.height)+"px":I.height));const k=y({get:()=>I.modelValue,set(e){C("change",e),C("update:modelValue",e)}});function L(e,a){if(null==e||null==e.state)return!1;if(!/^\d+$/.test(a)||+a<=0||+a>e.state.doc.lines)return!1;let l=e.state.doc.line(+a).from;return e.dispatch({selection:{anchor:l},userEvent:"select",scrollIntoView:!0}),!0}let E=b(null);const J=e=>{E.value=e.view},M=()=>E.value?E.value.state.doc.lines:0;b(M());let Q=y((()=>"javascript"==I.mode?a():"json"==I.mode?l():"css"==I.mode?o():"python"==I.mode?t():"vue"==I.mode?s():"php"==I.mode?u():"java"==I.mode?n():"go"==I.mode?r():"yaml"==I.mode?d():"xml"==I.mode?i():"markdown"==I.mode?m():"html"==I.mode?p():"sql"==I.mode?v():"log"==I.mode?null:a())),R=y((()=>c.readOnly.of(I.readOnly))),T=b([h,R.value]);function q(){const e=[h,R.value];Q.value&&null!==Q.value&&e.push(Q.value),I.lineWrapping&&e.push(f.lineWrapping),T.value=e}return j(I,((e,a)=>{q()}),{deep:!0}),x((()=>{if(I.bottom&&E.value&&S((()=>{L(E.value,M())})),Q.value&&null!==Q.value&&!T.value.some((e=>e===Q.value))){T.value.push(Q.value);const e=[...T.value];T.value=[],T.value=e}I.lineWrapping&&T.value.push(f.lineWrapping)})),j((()=>k.value),(e=>{I.bottom&&E.value&&S((()=>{L(E.value,M())}))})),B({scrollToBottom:function(){E.value&&L(E.value,M())},reloadConfig:q}),(a,l)=>(V(),_(z(e),{ref:"lyCodemirror",class:w(["lyCodemirror",g.showLineNums?"":"lyCodemirrorDynamic"]),modelValue:k.value,"onUpdate:modelValue":l[0]||(l[0]=e=>k.value=e),placeholder:g.placeholder,style:N({height:z(O),fontSize:g.fontSize}),autofocus:!0,"indent-with-tab":!0,"tab-size":4,extensions:z(T),onReady:J},null,8,["class","modelValue","placeholder","style","extensions"]))}},[["__scopeId","data-v-463778d1"]]);export{B as l};
