var e=Object.defineProperty,l=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(l,t,a)=>t in l?e(l,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[t]=a;import{r,ag as n,c as i,o as s,P as d,H as u,L as p,M as m,u as f,t as c,k as b,h as v,S as _,aq as h,a as y,I as w,a4 as g,G as x,n as j}from"./@vue.CQt2tj-6.js";import{_ as k,d as V,e as C,x as I,i as O,u as P,A as z}from"./index.9wSm1W-X.js";import{b as L}from"./vue-router.BmPBvlxi.js";import{T as S}from"./vue-codemirror.k2zwy4VA.js";import{F as A,G as D}from"./@codemirror.BTYdMWAS.js";import{a as H,E as U}from"./element-plus.C3E-FvSa.js";import"./axios.BhTbhqQQ.js";import"./crypto-js.BjUPrIIl.js";import"./@xterm.C7qPmoRH.js";import"./js-cookie.Ch5AnFJE.js";import"./vue-clipboard3.c61pm64N.js";import"./clipboard.BBhAuw9K.js";import"./pinia.CWB7oRTw.js";import"./@element-plus.CU4brdXH.js";import"./nprogress.Dzr5m2b3.js";import"./pinia-plugin-persistedstate.DTf8V5gU.js";import"./destr.ZpApkS-1.js";import"./deep-pick-omit.DP_A4OSP.js";import"./lodash-es.CUM784Py.js";import"./@vueuse.7zPzjEtO.js";import"./@popperjs.DxP-MrnL.js";import"./@ctrl.D-8vaqgC.js";import"./dayjs.BpgH7LzR.js";import"./async-validator.BTKOuuO-.js";import"./memoize-one.Ds0C_khL.js";import"./normalize-wheel-es.BhHBPXsK.js";import"./@floating-ui.D1oRyyfp.js";import"./codemirror.DMTwtLMy.js";import"./@lezer.CQ-BhAmV.js";import"./crelt.DSg10-ms.js";import"./@marijn.Df4efayV.js";import"./style-mod.Dj2YSJ7-.js";import"./w3c-keyname.f-y9tSbI.js";const E={style:{padding:"10px"}},B=k({__name:"detail",emits:["refreshData","closed"],setup(e,{expose:l,emit:t}){V();const a=[A(),D];let o=r(""),b=r(!1),v=r("basic"),_=r({cmdline:[],open_files:[]});function h(e){if(!Array.isArray(e))return"";return e.map((e=>null==e||""===e?"":e.trim())).join(" ")}return l({handleOpen:function(e){if(b.value=!0,e){_.value=O(e);let l=_.value.open_files,t=[];l.forEach(((e,l)=>{t.push({path:e[0],fd:e[1],mode:e[3]})})),_.value.open_files=t,o.value=JSON.stringify(_.value.environ,null,4)}}}),(e,l)=>{const t=n("el-descriptions-item"),r=n("el-descriptions"),b=n("el-tab-pane"),y=n("el-table-column"),w=n("el-table"),g=n("el-tabs");return s(),i("div",E,[d(g,{modelValue:f(v),"onUpdate:modelValue":l[1]||(l[1]=e=>c(v)?v.value=e:v=e),type:"card"},{default:u((()=>[d(b,{label:"\u57fa\u7840\u4fe1\u606f",name:"basic"},{default:u((()=>[d(r,{column:2,border:""},{default:u((()=>[d(t,{label:"\u540d\u79f0","min-width":"100px"},{default:u((()=>[p(m(f(_).name),1)])),_:1}),d(t,{label:"\u72b6\u6001"},{default:u((()=>[p(m(f(_).status),1)])),_:1}),d(t,{label:"PID"},{default:u((()=>[p(m(f(_).pid),1)])),_:1}),d(t,{label:"\u7236\u8fdb\u7a0bID"},{default:u((()=>[p(m(f(_).ppid),1)])),_:1}),d(t,{label:"\u7ebf\u7a0b\u6570"},{default:u((()=>[p(m(f(_).num_threads),1)])),_:1}),d(t,{label:"\u8fde\u63a5\u6570"},{default:u((()=>[p(m(f(_).connections?f(_).connections.length:0),1)])),_:1}),d(t,{label:"\u78c1\u76d8\u8bfb"},{default:u((()=>[p(m(f(C)(f(_).io_read)),1)])),_:1}),d(t,{label:"\u78c1\u76d8\u5199"},{default:u((()=>[p(m(f(C)(f(_).io_write)),1)])),_:1}),d(t,{label:"\u7528\u6237"},{default:u((()=>[p(m(f(_).username),1)])),_:1}),d(t,{label:"\u542f\u52a8\u65f6\u95f4"},{default:u((()=>[p(m(f(I)(f(_).create_time)),1)])),_:1}),d(t,{label:"cmdline\u547d\u4ee4\u884c"},{default:u((()=>[p(m(h(f(_).cmdline)),1)])),_:1})])),_:1})])),_:1}),d(b,{label:"\u5185\u5b58\u4fe1\u606f",name:"mem"},{default:u((()=>[d(r,{column:2,border:""},{default:u((()=>[d(t,{label:"rss"},{default:u((()=>{var e;return[p(m(f(C)(null==(e=f(_).memory_info)?void 0:e.rss)),1)]})),_:1}),d(t,{label:"swap"},{default:u((()=>{var e;return[p(m(f(C)(null==(e=f(_).memory_info)?void 0:e.swap)),1)]})),_:1}),d(t,{label:"vms"},{default:u((()=>{var e;return[p(m(f(C)(null==(e=f(_).memory_info)?void 0:e.vms)),1)]})),_:1}),d(t,{label:"pss"},{default:u((()=>{var e;return[p(m(f(C)(null==(e=f(_).memory_info)?void 0:e.pss)),1)]})),_:1}),d(t,{label:"data"},{default:u((()=>{var e;return[p(m(f(C)(null==(e=f(_).memory_info)?void 0:e.data)),1)]})),_:1}),d(t,{label:"shared"},{default:u((()=>{var e;return[p(m(f(C)(null==(e=f(_).memory_info)?void 0:e.shared)),1)]})),_:1}),d(t,{label:"lib"},{default:u((()=>{var e;return[p(m(f(C)(null==(e=f(_).memory_info)?void 0:e.lib)),1)]})),_:1}),d(t,{label:"dirty"},{default:u((()=>{var e;return[p(m(f(C)(null==(e=f(_).memory_info)?void 0:e.dirty)),1)]})),_:1}),d(t,{label:"text"},{default:u((()=>{var e;return[p(m(f(C)(null==(e=f(_).memory_info)?void 0:e.text)),1)]})),_:1})])),_:1})])),_:1}),d(b,{label:"\u6253\u5f00\u6587\u4ef6",name:"openFiles"},{default:u((()=>[d(w,{data:f(_).open_files,border:"",style:{width:"100%"}},{default:u((()=>[d(y,{prop:"path",label:"\u6587\u4ef6","show-overflow-tooltip":""}),d(y,{prop:"mode",label:"\u6a21\u5f0f",width:"100px"}),d(y,{prop:"fd",label:"fd",width:"100px"})])),_:1},8,["data"])])),_:1}),d(b,{label:"\u73af\u5883\u53d8\u91cf",name:"env"},{default:u((()=>[d(f(S),{autofocus:!0,"indent-with-tab":!0,tabSize:4,style:{height:"calc(100vh - 200px)"},lineWrapping:!0,matchBrackets:!0,theme:"cobalt",styleActiveLine:!0,extensions:a,modelValue:f(o),"onUpdate:modelValue":l[0]||(l[0]=e=>c(o)?o.value=e:o=e),disabled:!0},null,8,["modelValue"])])),_:1}),d(b,{label:"\u7f51\u7edc\u8fde\u63a5",name:"net"},{default:u((()=>[d(w,{data:f(_).connections,border:"",style:{width:"100%"}},{default:u((()=>[d(y,{prop:"laddr",label:"\u672c\u5730\u5730\u5740:\u7aef\u53e3"}),d(y,{prop:"raddr",label:"\u8fdc\u7aef\u5730\u5740:\u7aef\u53e3"}),d(y,{prop:"status",label:"\u72b6\u6001",width:"140px"})])),_:1},8,["data"])])),_:1})])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-0935233e"]]),K={style:{"margin-left":"15px"}},M={class:"search-input"},T=k({__name:"moduleTableLinux",setup(e){L();const k=V(),O=P();let S=b((()=>O.ismobile)),A=r(!1),D=r(300),E=r(null),T=r(null),$=r(null),q=r(null),F=r(!1),G=r(""),J=r(null),N=r({}),R=r([]),W=[{text:"\u7a7a\u95f2",value:"idle"},{text:"\u7761\u7720",value:"sleeping"},{text:"\u8fdb\u884c\u4e2d",value:"running"},{text:"\u7b49\u5f85\u4e2d",value:"waiting"},{text:"\u5524\u9192\u4e2d",value:"waking"},{text:"\u7ec8\u6b62",value:"dead"},{text:"\u50f5\u5c38",value:"zombie"},{text:"\u7b49\u5f85\u78c1\u76d8IO",value:"disk-sleep"},{text:"\u9501\u5b9a",value:"locked"},{text:"\u505c\u6b62",value:"stopped"},{text:"\u6682\u505c",value:"parked"}];function Q(e){const l=W.find((l=>l.value===e));return l?l.text:e}function X(e,l){return l.status===e}function Y(){A.value=!0;let e=((e,r)=>{for(var n in r||(r={}))t.call(r,n)&&o(e,n,r[n]);if(l)for(var n of l(r))a.call(r,n)&&o(e,n,r[n]);return e})({},N.value);z.sysProcessList(e).then((e=>{A.value=!1,2e3===e.code&&(R.value=e.data)}))}function Z(){Y()}function ee(e=!1){let l=q.value?q.value.offsetHeight:0,t=$.value?$.value.offsetHeight:0,a=T.value?T.value.offsetHeight:0;D.value=function(e,l=!1){var t=l?60:0;let a=(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)-e;var o=navigator.userAgent;return o&&/Android/.test(o)||o&&/iPhone|ipad|ipod|ios/.test(o)?600:a-t}(a+t+l+180,e)}function le(){j((()=>{ee()}))}return v((()=>{Y(),window.addEventListener("resize",le),le()})),_((()=>{window.removeEventListener("resize",le)})),(e,l)=>{const t=n("el-button"),a=n("el-col"),o=n("el-input"),r=n("el-row"),b=n("el-table-column"),v=n("el-table"),_=n("el-drawer"),V=h("loading");return s(),i("div",null,[y("div",{class:"handle-top",ref_key:"tableSelect",ref:T},[d(r,null,{default:u((()=>[d(a,{xs:24,sm:16,md:16,lg:16,xl:16},{default:u((()=>[d(t,{icon:"refresh",circle:"",onClick:Z}),y("span",K,"\u8fdb\u7a0b\u6570\u91cf\uff1a"+m(f(R).length),1)])),_:1}),d(a,{xs:24,sm:8,md:8,lg:8,xl:8},{default:u((()=>[y("div",M,[d(o,{modelValue:f(N).pid_filter,"onUpdate:modelValue":l[0]||(l[0]=e=>f(N).pid_filter=e),"suffix-icon":"Search",clearable:"",onClear:l[1]||(l[1]=e=>Z()),onKeyup:l[2]||(l[2]=g((e=>Z()),["enter"])),onChange:l[3]||(l[3]=e=>Z()),placeholder:"\u8fdb\u7a0bPID"},null,8,["modelValue"]),d(o,{modelValue:f(N).name_filter,"onUpdate:modelValue":l[4]||(l[4]=e=>f(N).name_filter=e),"suffix-icon":"Search",clearable:"",onClear:l[5]||(l[5]=e=>Z()),onKeyup:l[6]||(l[6]=g((e=>Z()),["enter"])),onChange:l[7]||(l[7]=e=>Z()),placeholder:"\u8fdb\u7a0b\u540d",style:{"margin-left":"5px","margin-right":"5px"}},null,8,["modelValue"]),d(o,{modelValue:f(N).user_filter,"onUpdate:modelValue":l[8]||(l[8]=e=>f(N).user_filter=e),"suffix-icon":"Search",clearable:"",onClear:l[9]||(l[9]=e=>Z()),onKeyup:l[10]||(l[10]=g((e=>Z()),["enter"])),onChange:l[11]||(l[11]=e=>Z()),placeholder:"\u7528\u6237"},null,8,["modelValue"])])])),_:1})])),_:1})],512),w((s(),x(v,{data:f(R),ref_key:"ruyitableRef",ref:E,height:f(D),style:{width:"100%","border-top":"1px solid var(--el-border-color-lighter)"},"header-cell-class-name":"table-header-style"},{default:u((()=>[d(b,{prop:"pid",label:"PID","min-width":"60",sortable:""}),d(b,{prop:"name",label:"\u540d\u79f0","min-width":"160","show-overflow-tooltip":""}),d(b,{prop:"ppid",label:"\u7236\u8fdb\u7a0bID","min-width":"90",sortable:""}),d(b,{prop:"num_threads",label:"\u7ebf\u7a0b","min-width":"60"}),d(b,{prop:"username",label:"\u7528\u6237","min-width":"80"}),d(b,{prop:"cpu_percent",label:"CPU","min-width":"80",sortable:""},{default:u((({row:e})=>{return[p(m((l=e.cpu_percent,`${l}%`)),1)];var l})),_:1}),d(b,{prop:"memory_info.rss",label:"\u5185\u5b58","min-width":"80",sortable:""},{default:u((({row:e})=>[p(m(f(C)(e.memory_info.rss)),1)])),_:1}),d(b,{prop:"connections",label:"\u8fde\u63a5","min-width":"80",sortable:""},{default:u((({row:e})=>[y("span",null,m(e.connections?e.connections.length:0),1)])),_:1}),d(b,{prop:"status",label:"\u72b6\u6001",width:"100",filters:f(W),"filter-method":X},{default:u((({row:e})=>[y("span",null,m(Q(e.status)),1)])),_:1},8,["filters"]),d(b,{prop:"create_time",label:"\u542f\u52a8\u65f6\u95f4","min-width":"170"},{default:u((({row:e})=>[p(m(f(I)(e.create_time)),1)])),_:1}),d(b,{fixed:!f(S)&&"right",label:"\u64cd\u4f5c",width:"150"},{default:u((e=>[d(t,{link:"",type:"primary",onClick:l=>{return t=e.row,F.value=!0,G.value=`\u3010${t.name}\u3011\u8fdb\u7a0b\u8be6\u60c5`,void j((()=>{J.value.handleOpen(t)}));var t}},{default:u((()=>l[13]||(l[13]=[p("\u8fdb\u7a0b\u8be6\u60c5")]))),_:2},1032,["onClick"]),d(t,{link:"",type:"primary",onClick:l=>{return t=e.row,void H.confirm(`\u786e\u5b9a\u8981\u7ed3\u675f\u3010${t.name}\u3011\u8fdb\u7a0b\u5417\uff1f`,"\u8b66\u544a",{closeOnClickModal:!1,cancelButtonText:"\u53d6\u6d88",confirmButtonText:"\u786e\u5b9a",type:"warning"}).then((e=>{k.loadingInfo.isLoading=!0,k.loadingInfo.content="\u7ed3\u675f\u4e2d...",z.sysProcessMg({pid:t.pid,action:"kill"}).then((e=>{k.loadingInfo.isLoading=!1,k.loadingInfo.content="",2e3==e.code?(U.success(e.msg),Y()):U.warning(e.msg)}))})).catch((()=>{}));var t}},{default:u((()=>l[14]||(l[14]=[p("\u7ed3\u675f")]))),_:2},1032,["onClick"])])),_:1},8,["fixed"])])),_:1},8,["data","height"])),[[V,f(A)]]),d(_,{modelValue:f(F),"onUpdate:modelValue":l[12]||(l[12]=e=>c(F)?F.value=e:F=e),size:"50%","append-to-body":"",title:f(G),"destroy-on-close":"",class:"lytask-drawer"},{default:u((()=>[d(B,{ref_key:"pdetailref",ref:J},null,512)])),_:1},8,["modelValue","title"])])}}},[["__scopeId","data-v-8e908fb0"]]),$={__name:"index",setup(e){const l=V();return b((()=>"windows"==l.sysConfig.currentOs)),v((()=>{})),(e,l)=>(s(),x(T))}};export{$ as default};
