var e=(e,t,a)=>new Promise(((l,n)=>{var o=e=>{try{s(a.next(e))}catch(t){n(t)}},i=e=>{try{s(a.throw(e))}catch(t){n(t)}},s=e=>e.done?l(e.value):Promise.resolve(e.value).then(o,i);s((a=a.apply(e,t)).next())}));import{ai as t,o as a,c as l,U as n,R as o,F as i,a8 as s,M as r,O as u,a as d,T as c,a2 as m,Q as p,b as f,j as h,aq as v,P as y,u as g,D as k,S as _,n as b,e as w,k as x,V as C,I,J as L,H as j,A as M,az as T,W as S}from"./@vue.BMBj57q3.js";import{u as B,a as R,_ as E,b as z,c as V,A,f as H,g as $,d as D,i as N}from"./index.D1mG68-9.js";import{u as O,b as P}from"./vue-router.CzFCPhwq.js";import{_ as U}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{a as F,E as W}from"./element-plus.WT5mSVn7.js";import{i as Y}from"./installLog.CeAyKd6A.js";import{P as q}from"./Pagination.AJTPZh6u.js";import{d as Q}from"./pinia.CfJUVU3l.js";import"./axios.3Xbkft1r.js";import"./crypto-js.CCePG2on.js";import"./@xterm.8vZnc5Va.js";import"./js-cookie.Ch5AnFJE.js";import"./vue-clipboard3.CjTOZN0C.js";import"./clipboard.55ERAcYO.js";import"./@element-plus.BcDOhvuq.js";import"./nprogress.B5M_jmCc.js";import"./pinia-plugin-persistedstate.DTf8V5gU.js";import"./destr.ZpApkS-1.js";import"./deep-pick-omit.DP_A4OSP.js";import"./lodash-es.CjrOehCd.js";import"./@vueuse.B2CPJC1D.js";import"./@popperjs.CpAfbxx4.js";import"./@ctrl.D-8vaqgC.js";import"./dayjs.VYhIaz1R.js";import"./async-validator.Cuo4gI4y.js";import"./memoize-one.Ds0C_khL.js";import"./normalize-wheel-es.CUoAWVRo.js";import"./@floating-ui.yzr8CaSr.js";import"./dialog.DfP35yxJ.js";import"./index.BNOrQDSs.js";import"./vue-codemirror.BiWnDJmD.js";import"./codemirror.BJSsQESG.js";import"./@codemirror.BkM7iGym.js";import"./@lezer.CzslrRCj.js";import"./crelt.DSg10-ms.js";import"./style-mod.Dj2YSJ7-.js";import"./w3c-keyname.f-y9tSbI.js";const X={key:0,style:{padding:"20px"}},G=["href"],J={__name:"NavMenu",props:{navMenus:{type:Array,default:[]}},emits:["contextmenuClick"],setup(e,{emit:f}){const h=f;function v(e,t){h("contextmenuClick",e,t)}return(f,h)=>{const y=t("el-alert"),g=t("el-icon"),k=t("el-menu-item"),_=t("NavMenu",!0),b=t("el-sub-menu");return a(),l(i,null,[e.navMenus.length<=0?(a(),l("div",X,[n(y,{title:"\u65e0\u83dc\u5355",center:"",type:"info",closable:!1})])):o("",!0),(a(!0),l(i,null,s(e.navMenus,(e=>{return a(),l(i,{key:e},[(t=e,!t.children||t.children.every((e=>e.meta.hidden))?(a(),r(k,{key:0,index:e.path,"data-id":e.path,onContextmenu:t=>v(t,e.path)},{title:u((()=>[d("span",null,c(e.meta.title),1)])),default:u((()=>[e.meta&&"link"==e.meta.type?(a(),l("a",{key:0,href:e.path,target:"_blank",onClick:m((()=>{}),["stop"])},null,8,G)):o("",!0),e.meta&&e.meta.icon?(a(),r(g,{key:1},{default:u((()=>[(a(),r(p(e.meta.icon||"menu")))])),_:2},1024)):o("",!0)])),_:2},1032,["index","data-id","onContextmenu"])):(a(),r(b,{key:1,index:e.path,"data-id":e.path,onContextmenu:t=>v(t,e.path)},{title:u((()=>[e.meta&&e.meta.icon?(a(),r(g,{key:0},{default:u((()=>[(a(),r(p(e.meta.icon||"menu")))])),_:2},1024)):o("",!0),d("span",null,c(e.meta.title),1)])),default:u((()=>[n(_,{navMenus:e.children},null,8,["navMenus"])])),_:2},1032,["index","data-id","onContextmenu"])))],64);var t})),128))],64)}}},K=U({__name:"sideMobile",setup(e){const o=B(),s=O(),r=R();let c=f(!1),m=f([]);let p=f(null);function _(){p.value.handleClose()}return h((()=>{m.value=function(e){var t=[];return e&&e.forEach((e=>{if(e.meta=e.meta?e.meta:{},e.meta.hidden||"button"==e.meta.type)return!1;"iframe"==e.meta.type&&(e.path=`/i/${e.name}`),e.children&&e.children.length>0&&(e.children=this.filterUrl(e.children)),t.push(e)})),t}(r.routesList)})),(e,r)=>{const f=t("Menu"),h=t("el-icon"),b=t("el-header"),w=t("el-menu"),x=t("el-scrollbar"),C=t("el-main"),I=t("el-container"),L=t("el-drawer"),j=v("drag");return a(),l(i,null,[y((a(),l("div",{ref:"",class:"mobile-nav-button",onClick:r[0]||(r[0]=e=>function(e){if("true"==e.currentTarget.getAttribute("drag-flag"))return!1;c.value=!0}(e))},[n(h,null,{default:u((()=>[n(f)])),_:1})])),[[j]]),n(L,{ref_key:"mobileNavMenuBox",ref:p,title:"\u79fb\u52a8\u7aef\u83dc\u5355",size:200,modelValue:g(c),"onUpdate:modelValue":r[1]||(r[1]=e=>k(c)?c.value=e:c=e),direction:"ltr","with-header":!1,"destroy-on-close":""},{default:u((()=>[n(I,{class:"mobile-nav"},{default:u((()=>[n(b,null,{default:u((()=>r[2]||(r[2]=[d("div",{class:"logo-bar"},[d("img",{class:"logo",src:E})],-1)]))),_:1}),n(C,null,{default:u((()=>[n(x,{class:"lyruyimobilenavside"},{default:u((()=>[n(w,{"default-active":g(s).meta.active||g(s).fullPath,onSelect:_,router:"","background-color":"dark"==g(o).siteTheme?"#141414":"#272E39","text-color":"#fff","active-text-color":"#008040"},{default:u((()=>[n(J,{navMenus:g(m)},null,8,["navMenus"])])),_:1},8,["default-active","background-color"])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}},[["__scopeId","data-v-e06ce1fc"]]),Z={class:"lysearch"},ee={key:0,class:"lysearch-history"},te={class:"lysearch-result"},ae={key:0,class:"lysearch-no-result"},le={key:1},ne=["onClick"],oe={class:"title"},ie=U({__name:"search",emits:["success"],setup(e,{emit:m}){const v=m,y=P();let b=f(null),w=f(""),x=f([]),C=f([]),I=f([]);function L(e){var t,a,l,n;C.value=e?(t=e,a=[],l=x.value.filter((e=>e.meta.title.toLowerCase().indexOf(t.toLowerCase())>=0||e.name.toLowerCase().indexOf(t.toLowerCase())>=0||void 0)),n=n.getRoutes(),l.map((e=>"link"==e.meta.type?n.find((t=>t.path=="/"+e.path)):n.find((t=>t.path==e.path)))).forEach((e=>{a.push({name:e.name,type:e.meta.type,path:"link"==e.meta.type?e.path.slice(1):e.path,icon:e.meta.icon,title:e.meta.title,breadcrumb:e.meta.breadcrumb.map((e=>e.meta.title)).join(" - ")})})),a):[]}function j(e){e.forEach((e=>{if(e.meta.hidden||"button"==e.meta.type)return!1;"iframe"==e.meta.type&&(e.path=`/i/${e.name}`),e.children&&e.children.length>0&&!e.component?j(e.children):x.value.push(e)}))}return h((()=>{var e=z.get("SEARCH_HISTORY")||[];I.value=e,j(y.getRoutes()),b.value.focus()})),(e,m)=>{const f=t("el-input"),h=t("el-tag"),x=t("el-icon"),j=t("el-scrollbar");return a(),l("div",Z,[n(f,{ref_key:"refInput",ref:b,modelValue:g(w),"onUpdate:modelValue":m[0]||(m[0]=e=>k(w)?w.value=e:w=e),placeholder:"\u641c\u7d22",size:"large",clearable:"","prefix-icon":"search","trigger-on-focus":!1,onInput:L},null,8,["modelValue"]),g(I).length>0?(a(),l("div",ee,[(a(!0),l(i,null,s(g(I),((e,t)=>(a(),r(h,{closable:"",effect:"dark",type:"info",key:e,onClick:t=>{return a=e,w.value=a,void L(a);var a},onClose:e=>function(e){I.value.splice(e,1),I.value.length<=0?z.remove("SEARCH_HISTORY"):z.set("SEARCH_HISTORY",this.history)}(t)},{default:u((()=>[_(c(e),1)])),_:2},1032,["onClick","onClose"])))),128))])):o("",!0),d("div",te,[g(C).length<=0?(a(),l("div",ae,"\u6682\u65e0\u641c\u7d22\u7ed3\u679c")):(a(),l("ul",le,[n(j,{"max-height":"366px"},{default:u((()=>[(a(!0),l(i,null,s(g(C),(e=>(a(),l("li",{key:e.path,onClick:t=>function(e){I.value.includes(this.input)||(I.value.push(this.input),z.set("SEARCH_HISTORY",this.history)),"link"==e.type?setTimeout((()=>{let t=document.createElement("a");t.style="display: none",t.target="_blank",t.href=e.path,document.body.appendChild(t),t.click(),document.body.removeChild(t)}),10):y.push({path:e.path}),v("success",!0)}(e)},[n(x,null,{default:u((()=>[(a(),r(p(e.icon||"menu")))])),_:2},1024),d("span",oe,c(e.breadcrumb),1)],8,ne)))),128))])),_:1})]))])])}}},[["__scopeId","data-v-dcb9c94e"]]),se={class:"lyshutdown"},re=U({__name:"shutdown",emits:["success"],setup(e,{emit:o}){const i=V();function s(){F.confirm("\u5373\u5c06\u91cd\u542f\u670d\u52a1\u5668\uff0c\u786e\u8ba4\u91cd\u542f\u5417\uff1f","\u63d0\u9192",{closeOnClickModal:!1,cancelButtonText:"\u53d6\u6d88",confirmButtonText:"\u786e\u5b9a",type:"warning"}).then((e=>{i.loadingInfo.isLoading=!0,i.loadingInfo.content="\u6b63\u5728\u91cd\u542f\u670d\u52a1\u5668...",i.loadingInfo.restartMode=!0,i.loadingInfo.delay=18;let t=!1;A.sysServmanage({action:"restart",type:"server"}).then((e=>{2e3===e.code||(i.loadingInfo.isLoading=!1,i.loadingInfo.content="",i.loadingInfo.delay=6,t=!0,W.error(e.msg))})),setTimeout((()=>{t||(i.loadingInfo.isLoading=!1,i.loadingInfo.content="",i.loadingInfo.restartMode=!1,i.loadingInfo.delay=6,window.location.reload())}),6e3)})).catch((()=>{}))}function r(){F.confirm("\u5373\u5c06\u91cd\u542f\u5982\u610f\u9762\u677f\uff0c\u786e\u8ba4\u91cd\u542f\u5417\uff1f","\u63d0\u9192",{closeOnClickModal:!1,cancelButtonText:"\u53d6\u6d88",confirmButtonText:"\u786e\u5b9a",type:"warning"}).then((e=>{i.loadingInfo.isLoading=!0,i.loadingInfo.content="\u6b63\u5728\u91cd\u542f\u5982\u610f\u9762\u677f...",i.loadingInfo.restartMode=!0,i.loadingInfo.delay=6;let t=!1;A.sysServmanage({action:"restart",type:"panel"}).then((e=>{2e3===e.code||(i.loadingInfo.isLoading=!1,i.loadingInfo.content="",i.loadingInfo.delay=6,t=!0,W.error(e.msg))})),setTimeout((()=>{t||(i.loadingInfo.isLoading=!1,i.loadingInfo.content="",i.loadingInfo.restartMode=!1,i.loadingInfo.delay=6,window.location.reload())}),6e3)})).catch((()=>{}))}return(e,o)=>{const i=t("el-button");return a(),l("div",se,[n(i,{dark:"",size:"large",bg:"",onClick:s},{default:u((()=>o[0]||(o[0]=[_("\u91cd\u542f\u670d\u52a1\u5668")]))),_:1}),n(i,{dark:"",size:"large",bg:"",onClick:r},{default:u((()=>o[1]||(o[1]=[_("\u91cd\u542f\u5982\u610f\u9762\u677f")]))),_:1})])}}},[["__scopeId","data-v-8db00d30"]]),ue={class:"tasks-item-body"},de={class:"taskMain"},ce={class:"title"},me={class:"bottom"},pe={class:"state"},fe={class:"handler"},he={class:"tasks-item-body"},ve={class:"taskMain"},ye={class:"title"},ge={style:{"margin-left":"20px"}},ke={class:"bottom"},_e={class:"state"},be={class:"handler"},we=U({__name:"tasks",setup(m,{expose:p}){const h=V();let w=f("1"),x=f(!1),C=f([]),I=f({action:"end",page:1,limit:10}),L=f({page:1,limit:10,total:0});function j(t){return e(this,null,(function*(){I.value.page=t.page,I.value.limit=t.limit,yield M()}))}function M(){return e(this,null,(function*(){x.value=!0,C.value=[],A.sysTaskcenter(I.value).then((e=>{x.value=!1,2e3==e.code&&(C.value=e.data.data,L.value.page=e.data.page,L.value.limit=e.data.limit,L.value.total=e.data.total)}))}))}function T(t){return e(this,null,(function*(){"1"==t.props.name?B():yield M()}))}function S(){return e(this,null,(function*(){x.value=!0,yield h.getSystemTaskIngInfo(),x.value=!1}))}function B(){S()}let R=f(!1),E=f(null);function z(e){let t=e.id;R.value=!0;let a=2==e.status||3==e.status?"all":"new_lines";b((()=>{let l={id:t,action:a};E.value.handleOpen(l,e.name+"\u65e5\u5fd7\u8be6\u60c5")}))}return p({refresh:B}),(m,p)=>{const f=t("el-tab-pane"),b=t("el-tabs"),I=t("el-empty"),V=t("el-tag"),D=t("el-button"),N=t("el-card"),O=t("el-main"),P=t("el-footer"),U=t("el-container"),Q=v("loading");return y((a(),r(U,null,{default:u((()=>[n(b,{modelValue:g(w),"onUpdate:modelValue":p[0]||(p[0]=e=>k(w)?w.value=e:w=e),type:"card",style:{width:"100%",padding:"0 15px 0 15px"},onTabClick:T},{default:u((()=>[n(f,{label:"\u6b63\u5728\u6267\u884c\u7684\u4efb\u52a1",name:"1"}),n(f,{label:"\u4efb\u52a1\u5386\u53f2\u5217\u8868",name:"2"})])),_:1},8,["modelValue"]),"1"==g(w)?(a(),r(O,{key:0},{default:u((()=>[0==g(h).taskInfo.taskList.length?(a(),r(I,{key:0,"image-size":120},{default:u((()=>p[2]||(p[2]=[d("p",{style:{"font-size":"14px",color:"#999","line-height":"1.5",margin:"0 40px"}},"\u6ca1\u6709\u6b63\u5728\u6267\u884c\u7684\u4efb\u52a1",-1)]))),_:1})):o("",!0),(a(!0),l(i,null,s(g(h).taskInfo.taskList,(t=>(a(),r(N,{key:t.id,shadow:"hover",class:"tasks-item"},{default:u((()=>[d("div",ue,[d("div",de,[d("div",ce,[d("h2",null,c(t.name),1),d("p",null," \u521b\u5efa\u65f6\u95f4\uff1a"+c(t.create_at),1)]),d("div",me,[d("div",pe,[0==t.status?(a(),r(V,{key:0,type:"info"},{default:u((()=>p[3]||(p[3]=[_("\u7b49\u5f85\u4e2d")]))),_:1})):o("",!0),1==t.status?(a(),r(V,{key:1,type:"primary"},{default:u((()=>p[4]||(p[4]=[_("\u6267\u884c\u4e2d")]))),_:1})):o("",!0),2==t.status?(a(),r(V,{key:2,type:"danger"},{default:u((()=>p[5]||(p[5]=[_("\u5df2\u5931\u8d25")]))),_:1})):o("",!0),3==t.status?(a(),r(V,{key:3},{default:u((()=>p[6]||(p[6]=[_("\u5df2\u5b8c\u6210")]))),_:1})):o("",!0)]),d("div",fe,[n(D,{plain:"",type:"danger",icon:"delete",onClick:a=>function(t){return e(this,null,(function*(){F.confirm(`\u786e\u5b9a\u8981\u5220\u9664\u3010${t.name}\u3011\u4efb\u52a1\u5417\uff1f`,"\u8b66\u544a",{closeOnClickModal:!1,cancelButtonText:"\u53d6\u6d88",confirmButtonText:"\u786e\u5b9a",type:"warning"}).then((e=>{h.loadingInfo.isLoading=!0,h.loadingInfo.content="\u6b63\u5728\u5220\u9664\u4e2d...";let a={action:"del_task",id:t.id};A.sysTaskcenterMg(a).then((e=>{h.loadingInfo.isLoading=!1,h.loadingInfo.content="",2e3==e.code?(W.success(e.msg),"1"==w.value?S():M()):W.warning(e.msg)}))})).catch((()=>{}))}))}(t)},{default:u((()=>p[7]||(p[7]=[_("\u5220\u9664\u4efb\u52a1")]))),_:2},1032,["onClick"]),n(D,{plain:"",type:"primary",icon:"Document",onClick:e=>z(t)},{default:u((()=>p[8]||(p[8]=[_("\u67e5\u770b\u65e5\u5fd7")]))),_:2},1032,["onClick"])])])])])])),_:2},1024)))),128))])),_:1})):o("",!0),"1"==g(w)?(a(),r(P,{key:1,style:{padding:"10px","text-align":"left"}},{default:u((()=>[n(D,{circle:"",icon:"refresh",onClick:B})])),_:1})):o("",!0),"2"==g(w)?(a(),r(O,{key:2},{default:u((()=>[0==g(C).length?(a(),r(I,{key:0,"image-size":120},{default:u((()=>p[9]||(p[9]=[d("p",{style:{"font-size":"14px",color:"#999","line-height":"1.5",margin:"0 40px"}},"\u6ca1\u6709\u5386\u53f2\u4efb\u52a1",-1)]))),_:1})):o("",!0),(a(!0),l(i,null,s(g(C),(e=>(a(),r(N,{key:e.id,shadow:"hover",class:"tasks-item"},{default:u((()=>[d("div",he,[d("div",ve,[d("div",ye,[d("h2",null,c(e.name),1),d("p",null,[_(" \u521b\u5efa\u65f6\u95f4\uff1a"+c(e.create_at)+" ",1),d("span",ge,"\u8017\u65f6\uff1a"+c(g(H)(e.duration)),1)])]),d("div",ke,[d("div",_e,[0==e.status?(a(),r(V,{key:0,type:"info"},{default:u((()=>p[10]||(p[10]=[_("\u7b49\u5f85\u4e2d")]))),_:1})):o("",!0),1==e.status?(a(),r(V,{key:1,type:"primary"},{default:u((()=>p[11]||(p[11]=[_("\u6267\u884c\u4e2d")]))),_:1})):o("",!0),2==e.status?(a(),r(V,{key:2,type:"danger"},{default:u((()=>p[12]||(p[12]=[_("\u5df2\u5931\u8d25")]))),_:1})):o("",!0),3==e.status?(a(),r(V,{key:3,type:"success"},{default:u((()=>p[13]||(p[13]=[_("\u5df2\u5b8c\u6210")]))),_:1})):o("",!0)]),d("div",be,[n(D,{plain:"",type:"primary",icon:"Document",onClick:t=>z(e)},{default:u((()=>p[14]||(p[14]=[_("\u67e5\u770b\u65e5\u5fd7")]))),_:2},1032,["onClick"]),n(D,{plain:"",icon:"Download",onClick:t=>{$(e.log_path)}},{default:u((()=>p[15]||(p[15]=[_("\u4e0b\u8f7d")]))),_:2},1032,["onClick"])])])])])])),_:2},1024)))),128))])),_:1})):o("",!0),"2"==g(w)?(a(),r(P,{key:3,style:{padding:"10px","text-align":"left"}},{default:u((()=>[n(q,{small:!0,"child-msg":g(L),onCallFather:j,border:!1},null,8,["child-msg"])])),_:1})):o("",!0),g(R)?(a(),r(Y,{key:4,ref_key:"moduleinstallLogFlag",ref:E,onClosed:p[1]||(p[1]=e=>k(R)?R.value=!1:R=!1),onRefreshData:B},null,512)):o("",!0)])),_:1})),[[Q,g(x)]])}}},[["__scopeId","data-v-86efa96d"]]),xe={class:"user-bar"},Ce={class:"user-avatar"},Ie=U({__name:"userbar",setup(e){const s=P(),m=B(),p=V();let v=f(!1),y=f(!1),w=f(!1);f(!1),f([]);let x=f(null);function C(){w.value=!0,b((()=>{x.value.refresh()}))}function I(){"light"==m.siteTheme?m.setSiteTheme("dark"):m.setSiteTheme("light")}function L(){y.value=!0}function j(e){"clearCache"==e||"updateLogs"==e||"checkUpdate"==e||"fixPanel"==e||"outLogin"==e&&F.alert("\u9000\u51fa\u767b\u5f55, \u662f\u5426\u7ee7\u7eed?","\u63d0\u793a",{confirmButtonText:"\u786e\u5b9a",cancelButtonText:"\u53d6\u6d88",type:"warning"}).then((()=>{z.clear(),s.push("/login"),W.success("\u5df2\u9000\u51fa\u767b\u5f55!")})).catch((()=>{}))}return h((()=>{})),(e,s)=>{const f=t("Notification"),h=t("el-icon"),b=t("el-tooltip"),M=t("el-badge");t("ChatDotRound"),t("el-avatar"),t("el-empty"),t("el-scrollbar"),t("el-main"),t("el-button"),t("el-footer"),t("el-container");const T=t("el-drawer"),S=t("Sunny"),B=t("Moon"),R=t("SwitchButton"),E=t("ArrowDown"),z=t("el-dropdown-item"),V=t("el-dropdown-menu"),A=t("el-dropdown"),H=t("el-dialog");return a(),l(i,null,[d("div",xe,[d("div",{class:"tasks panel-item",onClick:C},[n(M,{hidden:0==g(p).taskInfo.taskNumber,value:g(p).taskInfo.taskNumber,class:"badge",type:"danger"},{default:u((()=>[n(b,{effect:"dark",content:"\u4efb\u52a1\u5217\u8868",placement:"bottom"},{default:u((()=>[n(h,null,{default:u((()=>[n(f)])),_:1})])),_:1})])),_:1},8,["hidden","value"])]),o("",!0),d("div",{class:"theme panel-item",onClick:I},["dark"==g(m).siteTheme?(a(),r(h,{key:0},{default:u((()=>[n(S)])),_:1})):(a(),r(h,{key:1},{default:u((()=>[n(B)])),_:1}))]),d("div",{class:"shutdown panel-item",onClick:L},[n(b,{effect:"dark",content:"\u91cd\u542f\uff1a\u5982\u610f\u9762\u677f\u6216\u670d\u52a1\u5668",placement:"bottom"},{default:u((()=>[n(h,null,{default:u((()=>[n(R)])),_:1})])),_:1})]),n(A,{class:"user panel-item",trigger:"click",onCommand:j},{dropdown:u((()=>[n(V,null,{default:u((()=>[n(z,{command:"updateLogs"},{default:u((()=>s[7]||(s[7]=[_("\u66f4\u65b0\u65e5\u5fd7")]))),_:1}),n(z,{command:"checkUpdate"},{default:u((()=>s[8]||(s[8]=[_("\u68c0\u67e5\u66f4\u65b0")]))),_:1}),n(z,{command:"fixPanel"},{default:u((()=>s[9]||(s[9]=[_("\u4fee\u590d\u9762\u677f")]))),_:1}),n(z,{divided:"",command:"outLogin"},{default:u((()=>s[10]||(s[10]=[_("\u9000\u51fa\u767b\u5f55")]))),_:1})])),_:1})])),default:u((()=>[d("div",Ce,[s[6]||(s[6]=d("label",null,c("\u66f4\u591a"),-1)),n(h,{class:"el-icon--right"},{default:u((()=>[n(E)])),_:1})])])),_:1})]),n(H,{modelValue:g(v),"onUpdate:modelValue":s[2]||(s[2]=e=>k(v)?v.value=e:v=e),width:700,title:"\u641c\u7d22",center:"","destroy-on-close":""},{default:u((()=>[n(ie,{onSuccess:s[1]||(s[1]=e=>k(v)?v.value=!1:v=!1)})])),_:1},8,["modelValue"]),n(H,{modelValue:g(y),"onUpdate:modelValue":s[3]||(s[3]=e=>k(y)?y.value=e:y=e),width:300,title:"\u91cd\u542f\u670d\u52a1\u5668\u6216\u9762\u677f","destroy-on-close":""},{default:u((()=>[n(re)])),_:1},8,["modelValue"]),n(T,{modelValue:g(w),"onUpdate:modelValue":s[4]||(s[4]=e=>k(w)?w.value=e:w=e),size:"50%","append-to-body":"",title:"\u4efb\u52a1\u4e2d\u5fc3","destroy-on-close":"",class:"lytask-drawer"},{default:u((()=>[n(we,{ref_key:"taskref",ref:x},null,512)])),_:1},8,["modelValue"])],64)}}},[["__scopeId","data-v-c7507979"]]),Le=Q("iframeList",{state:()=>({iframeList:[]}),actions:{setIframeList(e){this.iframeList=[],this.iframeList.push(e)},pushIframeList(e){this.iframeList.find((t=>t.path===e.path))||this.iframeList.push(e)},removeIframeList(e){this.iframeList.forEach(((t,a)=>{t.path===e.path&&this.iframeList.splice(a,1)}))},refreshIframe(e){this.iframeList.forEach((t=>{if(t.path==e.path){var a=e.meta.url;t.meta.url="",setTimeout((function(){t.meta.url=a}),200)}}))},clearIframeList(){this.iframeList=[]}}}),je={class:"iframe-pages"},Me=["src"],Te=U({__name:"iframeView",setup(e){const t=B(),n=Le(),o=O();w((()=>o),(e=>{c(e)}));const r=x((()=>n.iframeList)),u=x((()=>t.ismobile)),d=x((()=>t.ismultitabs));function c(e){"iframe"==e.meta.type?u.value||!d.value?n.setIframeList(e):n.pushIframeList(e):u.value&&n.clearIframeList()}return h((()=>{c(o)})),(e,t)=>y((a(),l("div",je,[(a(!0),l(i,null,s(r.value,(t=>y((a(),l("iframe",{key:t.meta.url,src:t.meta.url,frameborder:"0"},null,8,Me)),[[C,e.$route.meta.url==t.meta.url]]))),128))],512)),[[C,"iframe"==e.$route.meta.type]])}},[["__scopeId","data-v-5d23cb55"]]),Se=Q("keepAlive",{state:()=>({routeShow:!0,keepAliveRoute:[]}),getters:{},actions:{setKeepAliveRoute(e){this.keepAliveRoute=e,z.set("keepAliveRoute",e)},setRouteShow(e){this.routeShow=e,z.set("routeShow",e)}}}),Be={emits:["confirm","cancel"],props:{hidden:!0,title:String,width:{type:Number,default:880},height:{type:Number,default:500},showHeader:{type:Boolean,default:!0},showHeaderBg:{type:Boolean,default:!0},hideFooter:{type:Boolean,default:!0},showFooterBg:{type:Boolean,default:!0},showConfrim:{type:Boolean,default:!0},showCancel:{type:Boolean,default:!0},confirmText:{type:String,default:"\u786e\u5b9a"},cancelText:{type:String,default:"\u53d6\u6d88"},buttonReverse:{type:Boolean,default:!1},borderRadius:!1,showCloseBtn:{type:Boolean,default:!0}},data:()=>({willclose:!1}),methods:{closeDialog(){this.willclose=!0,setTimeout((()=>{this.willclose=!1,this.$emit("close")}),100)}}},Re={key:0,class:"lydialog-wrapper"},Ee={class:"title"};const ze=U(Be,[["render",function(e,i,s,r,m,p){const f=t("Close"),h=t("el-icon");return s.hidden?o("",!0):(a(),l("div",Re,[d("div",{class:I(["dialog-wrap",{radius:s.borderRadius},{willclose:m.willclose},{goup:s.buttonReverse}]),style:L({width:s.width+"px"})},[s.showHeader?(a(),l("div",{key:0,class:I(["box-header",{hidden:!s.showHeaderBg}])},[d("div",Ee,c(s.title),1),s.showCloseBtn?(a(),l("div",{key:0,class:"btn-close",onClick:i[0]||(i[0]=(...e)=>p.closeDialog&&p.closeDialog(...e))},[n(h,{class:"icon"},{default:u((()=>[n(f)])),_:1})])):o("",!0)],2)):o("",!0),d("div",{class:"box-body",style:L({height:s.height+"px"})},[j(e.$slots,"default")],4),s.hideFooter?o("",!0):(a(),l("div",{key:1,class:I(["box-footer",{hidden:!s.showFooterBg},{reverse:s.buttonReverse}])},[s.showConfrim?(a(),l("button",{key:0,class:"btn btn-primary",onClick:i[1]||(i[1]=t=>e.$emit("confirm"))},c(s.confirmText),1)):o("",!0),s.showCancel?(a(),l("button",{key:1,class:"btn btn-gray",onClick:i[2]||(i[2]=t=>e.$emit("cancel"))},c(s.cancelText),1)):o("",!0)],2))],6)]))}]]),Ve={key:0,class:"lyloading-content"},Ae={key:1,class:"lyloading-restart"},He={style:{"margin-bottom":"5px","font-size":"14px"}},$e=U({__name:"lyloading",props:{isLoading:{type:Boolean,default:!0},width:{type:Number,default:300},height:{type:Number,default:200},content:{type:String,default:""},restartMode:{type:Boolean,default:!1},delay:{type:Number,default:6}},emits:["closed"],setup(e,{emit:o}){const i=o,s=e;let m=x((()=>{let e=s.delay-k.value;return e>=0?e:0})),p=x((()=>{let e=k.value>10?10:k.value;return".".repeat(e)}));function v(){i("closed")}let y=f(0),k=f(0),b=f(null);return w((()=>s.restartMode),((e,t)=>{e&&(b.value=setInterval((()=>{k.value<s.delay?(k.value++,y.value+=20,y.value>100&&(y.value=100)):clearInterval(b.value)}),1e3))})),h((()=>{})),M((()=>{clearInterval(b.value)})),(o,i)=>{const s=t("Loading"),f=t("el-icon"),h=t("el-text"),k=t("el-progress");return a(),r(ze,{hidden:!e.isLoading,title:"",width:e.width,height:e.height,showHeader:!1,onClose:v},{default:u((()=>[e.restartMode?(a(),l("div",Ae,[d("div",He,"\u91cd\u542f\u4e2d("+c(g(m))+"s)"+c(g(p)),1),n(k,{percentage:g(y),"stroke-width":19,status:"success",striped:"","striped-flow":"",duration:5},null,8,["percentage"])])):(a(),l("div",Ve,[n(f,{class:"is-loading"},{default:u((()=>[n(s)])),_:1}),n(h,{class:"ldcontent",truncated:""},{default:u((()=>[_(c(e.content),1)])),_:1})]))])),_:1},8,["hidden","width","height"])}}},[["__scopeId","data-v-64cfba65"]]),De={class:"ruyi-panel-header"},Ne={class:"ruyi-panel-header-left"},Oe={class:"logo-bar"},Pe={key:0,class:"ruyi-panel-header-center"},Ue={style:{"margin-left":"10px","margin-right":"10px"}},Fe={class:"ruyi-panel-header-right"},We={class:"ruyi-panel-wrapper"},Ye={class:"ruyi-panel-side-scroll"},qe={class:"ruyi-panel-body el-container"},Qe={class:"ruyi-panel-main",id:"ruyi-panel-main"},Xe=U({__name:"index",setup(e){const s=O(),m=P(),v=B(),_=Se(),w=R(),j=V();j.getSystemConfig();let z=f([]),H=f(""),$=f(!1),U=f({userid:"",username:"",role:"",expire:"",active_state:""}),F=f(!1),W=f(0),Y=f(0),q=x((()=>v.ismobile));x((()=>v.ismultitabs));let Q=x((()=>v.isMenuCollapse));function X(e){const t=e.split(".");return 4===t.length?`${t[0]}.${"*".repeat(t[1].length)}.${"*".repeat(t[2].length)}.${t[3]}`:""}function G(){v.setMenuCollapsed(!Q.value),setTimeout((()=>{window.dispatchEvent(new Event("resize"))}),1e3)}function Z(){document.getElementById("app").classList.remove("main-maximize")}function ee(e){var t=[];return e&&e.forEach((e=>{if(e.meta=e.meta?e.meta:{},e.meta.hidden||"button"==e.meta.type)return!1;"iframe"==e.meta.type&&(e.path=`/i/${e.name}`),e.children&&e.children.length>0&&(e.children=ee(e.children)),t.push(e)})),t}function te(){b((()=>{H.value=s.path}))}function ae(){b((()=>{v.setIsmobile(document.body.clientWidth<992)}))}function le(){F.value=!1}let ne=f(null);function oe(e){ne.value&&!ne.value.contains(e.target)&&le()}let ie=f("");function se(){if(ie.value){let e=window.location.origin;window.open(e+"/#"+ie.value,"_blank")}le()}function re(){ie.value&&(s.path==ie.value?window.location.reload():m.push({path:ie.value})),le()}function ue(e,t){e.preventDefault(),e.stopPropagation(),ie.value=t,F.value=!0,W.value=e.clientX+1,Y.value=e.clientY+1,b((()=>{let t=document.getElementById("lyleftMenuContext");document.body.offsetWidth-e.clientX<t.offsetWidth&&(W.value=document.body.offsetWidth-t.offsetWidth-1,Y.value=e.clientY+1)}))}function de(e=""){return"pro"==e?"\u4e13\u4e1a\u7248":"enterprise"==e?"\u4f01\u4e1a\u7248":"\u514d\u8d39\u7248"}return h((()=>{ae(),window.addEventListener("resize",ae),z.value=ee(w.routesList),te(),j.getSystemTaskIngInfo(),m.afterEach(te),document.addEventListener("click",oe),A.sysGetLicenses().then((e=>{if(2e3==e.code){let t=e.data;N(t.expire)&&(t.expire="\u957f\u671f"),U.value=t}else ElMessage.warning(e.msg)}))})),M((()=>{window.removeEventListener("resize",ae),document.removeEventListener("click",oe)})),(e,s)=>{const m=t("el-menu"),f=t("el-scrollbar"),h=t("expand"),v=t("fold"),b=t("el-icon"),w=t("router-view"),x=t("CopyDocument"),M=t("Refresh"),B=t("Close");return a(),l(i,null,[d("header",De,[d("div",Ne,[d("div",Oe,[s[1]||(s[1]=d("img",{class:"logo",src:E},null,-1)),d("span",{onClick:s[0]||(s[0]=e=>k($)?$.value=!g($):$=!g($)),style:{cursor:"pointer"}},c(g($)?X(g(j).serverInfo.serverIp):g(j).serverInfo.serverIp),1)])]),g(q)?o("",!0):(a(),l("div",Pe,[s[2]||(s[2]=d("a",{href:"https://doc.lybbn.cn/",target:"_blank"},"Copyright \xa9 lybbn",-1)),d("span",Ue,c(de(g(U).role))+"\uff1a"+c(g(D).APP_VER),1),g(U).username?(a(),l("span",{key:0,style:L({background:"1"==g(U).active_state?"green":"#484040",padding:"3px"})},"\u6388\u6743\uff1a"+c(g(U).username),5)):o("",!0)])),d("div",Fe,[n(Ie)])]),d("section",We,[g(q)?o("",!0):(a(),l("div",{key:0,class:I(g(Q)?"ruyi-panel-side isCollapse":"ruyi-panel-side")},[d("div",Ye,[n(f,null,{default:u((()=>[n(m,{"default-active":g(H),router:"",collapse:g(Q),"unique-opened":!0,"collapse-transition":""},{default:u((()=>[n(J,{navMenus:g(z),onContextmenuClick:ue},null,8,["navMenus"])])),_:1},8,["default-active","collapse"])])),_:1})]),d("div",{class:"ruyi-panel-side-bottom",onClick:G},[n(b,null,{default:u((()=>[g(Q)?(a(),r(h,{key:0})):(a(),r(v,{key:1}))])),_:1})])],2)),g(q)?(a(),r(K,{key:1})):o("",!0),d("div",qe,[d("div",Qe,[n(w,null,{default:u((({Component:e,route:t})=>[(a(),r(T,{include:g(_).keepAliveRoute},[g(_).routeShow?(a(),r(p(e),{key:t.path})):o("",!0)],1032,["include"]))])),_:1}),n(Te)])])]),n(S,{name:"el-zoom-in-top"},{default:u((()=>[y(d("ul",{style:L({left:g(W)+"px",top:g(Y)+"px"}),class:"contextmenu",id:"lyleftMenuContext",ref_key:"lyleftMenuContext",ref:ne},[d("li",{onClick:se},[n(b,null,{default:u((()=>[n(x)])),_:1}),s[3]||(s[3]=d("span",{class:"contextmenu-text"},"\u65b0\u6807\u7b7e\u6253\u5f00",-1))]),d("li",{onClick:re},[n(b,null,{default:u((()=>[n(M)])),_:1}),s[4]||(s[4]=d("span",{class:"contextmenu-text"},"\u5237\u65b0\u672c\u9875",-1))]),d("li",{onClick:le},[n(b,null,{default:u((()=>[n(B)])),_:1}),s[5]||(s[5]=d("span",{class:"contextmenu-text"},"\u53d6\u6d88\u64cd\u4f5c",-1))])],4),[[C,g(F)]])])),_:1}),d("div",{class:"main-maximize-exit",onClick:Z},[n(b,null,{default:u((()=>[n(B)])),_:1})]),n($e,{isLoading:g(j).loadingInfo.isLoading,content:g(j).loadingInfo.content,restartMode:g(j).loadingInfo.restartMode,width:300,height:100,delay:g(j).loadingInfo.delay},null,8,["isLoading","content","restartMode","delay"])],64)}}},[["__scopeId","data-v-4436c503"]]);export{Xe as default};
