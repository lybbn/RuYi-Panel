import{c as e,F as a,e as l,A as t}from"./index.DdU3pFbI.js";import{l as o}from"./index.GhyFdw6y.js";import{_ as s}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{E as n,a as i}from"./element-plus.CMBwCou9.js";import{b as d,j as r,ag as _,o as u,G as f,H as c,P as p,a as m,M as b,u as g,C as z,L as h,t as v,c as y,O as x,a4 as k,K as j,n as V}from"./@vue.BluSRtaz.js";import"./axios.3Xbkft1r.js";import"./crypto-js.CCePG2on.js";import"./@xterm.8vZnc5Va.js";import"./js-cookie.Ch5AnFJE.js";import"./vue-clipboard3.CjTOZN0C.js";import"./clipboard.55ERAcYO.js";import"./pinia.DhJalR8o.js";import"./@element-plus.sBVz1STF.js";import"./vue-router.CjawWhbh.js";import"./nprogress.B5M_jmCc.js";import"./pinia-plugin-persistedstate.DTf8V5gU.js";import"./destr.ZpApkS-1.js";import"./deep-pick-omit.DP_A4OSP.js";import"./lodash-es.BccSst5e.js";import"./@vueuse.l0Dx-5Bl.js";import"./@popperjs.CpAfbxx4.js";import"./@ctrl.D-8vaqgC.js";import"./dayjs.9DdhAVak.js";import"./async-validator.Cuo4gI4y.js";import"./memoize-one.Ds0C_khL.js";import"./normalize-wheel-es.CUoAWVRo.js";import"./@floating-ui.yzr8CaSr.js";import"./vue-codemirror.DFdUdG36.js";import"./codemirror.BJSsQESG.js";import"./@codemirror.BkM7iGym.js";import"./@lezer.CzslrRCj.js";import"./crelt.DSg10-ms.js";import"./style-mod.Dj2YSJ7-.js";import"./w3c-keyname.f-y9tSbI.js";const I=[{id:1,name:"Mem 1-2GB",data:{key_buffer_size:128,query_cache_size:64,tmp_table_size:64,innodb_buffer_pool_size:256,sort_buffer_size:768,read_buffer_size:768,read_rnd_buffer_size:512,join_buffer_size:1024,thread_stack:256,binlog_cache_size:64,thread_cache_size:64,table_open_cache:128,max_connections:100}},{id:2,name:"Mem 2-4GB",data:{key_buffer_size:256,query_cache_size:128,tmp_table_size:384,innodb_buffer_pool_size:384,sort_buffer_size:768,read_buffer_size:768,read_rnd_buffer_size:512,join_buffer_size:2048,thread_stack:256,binlog_cache_size:64,thread_cache_size:96,table_open_cache:192,max_connections:200}},{id:3,name:"Mem 4-8GB",data:{key_buffer_size:384,query_cache_size:192,tmp_table_size:512,innodb_buffer_pool_size:512,sort_buffer_size:1024,read_buffer_size:1024,read_rnd_buffer_size:768,join_buffer_size:2048,thread_stack:256,binlog_cache_size:128,thread_cache_size:128,table_open_cache:384,max_connections:300}},{id:4,name:"Mem 8-16GB",data:{key_buffer_size:512,query_cache_size:256,tmp_table_size:1024,innodb_buffer_pool_size:1024,sort_buffer_size:2048,read_buffer_size:2048,read_rnd_buffer_size:1024,join_buffer_size:4096,thread_stack:384,binlog_cache_size:192,thread_cache_size:192,table_open_cache:1024,max_connections:400}},{id:5,name:"Mem 16-32GB",data:{key_buffer_size:1024,query_cache_size:384,tmp_table_size:2048,innodb_buffer_pool_size:4096,innodb_log_buffer_size:32,sort_buffer_size:4096,read_buffer_size:4096,read_rnd_buffer_size:2048,join_buffer_size:8192,thread_stack:512,binlog_cache_size:256,thread_cache_size:256,table_open_cache:2048,max_connections:500}}],M={class:"statusc"},w={class:"lyflex status"},B={class:"lyflex opbtn"},C={class:"lyflex",style:{"justify-content":"left"}},L={class:"lyflex"},S={class:"lyflex"},U={class:"lyflex"},q={class:"lyflex"},F={class:"lyflex"},T={class:"lyflex"},K={class:"lyflex"},N={class:"lyflex"},G={class:"lyflex"},O={class:"lyflex"},Q={class:"lyflex"},P=s({__name:"mysql",props:{data:{type:Object}},emits:["refreshStatus"],setup(s,{emit:P}){const R=e(),W=P,$=s;let A=d({id:null,name:"",error_log:"",slow_log:"",status:!1,loadstatus:{},conf:"",oldConf:""}),D=d("status"),E=d(""),H=d({key_buffer_size:0,query_cache_size:0,tmp_table_size:0,innodb_buffer_pool_size:0,innodb_log_buffer_size:0,sort_buffer_size:0,read_buffer_size:0,read_rnd_buffer_size:0,join_buffer_size:0,thread_stack:0,binlog_cache_size:0,thread_cache_size:0,table_open_cache:0,max_connections:0});function J(e){for(let a=0;a<I.length;a++)if(I[a].id==e){H.value.key_buffer_size=I[a].data.key_buffer_size,H.value.query_cache_size=I[a].data.query_cache_size,H.value.tmp_table_size=I[a].data.tmp_table_size,H.value.innodb_buffer_pool_size=I[a].data.innodb_buffer_pool_size,H.value.sort_buffer_size=I[a].data.sort_buffer_size,H.value.read_buffer_size=I[a].data.read_buffer_size,H.value.read_rnd_buffer_size=I[a].data.read_rnd_buffer_size,H.value.join_buffer_size=I[a].data.join_buffer_size,H.value.thread_stack=I[a].data.thread_stack,H.value.binlog_cache_size=I[a].data.binlog_cache_size,H.value.thread_cache_size=I[a].data.thread_cache_size,H.value.table_open_cache=I[a].data.table_open_cache,H.value.max_connections=I[a].data.max_connections;break}}function X(e,a){return{required:!0,trigger:"blur",min:e,max:a,type:"number",message:`\u6570\u5b57\u53ef\u9009\u8303\u56f4${e}\u5230${a}`}}let Y={required:!0,trigger:"blur",min:0,type:"number",message:"\u53ea\u80fd\u4e3a\u6b63\u6574\u6570\u548c0"},Z=d({key_buffer_size:[Y,X(1,102400)],tmp_table_size:[Y,X(1,102400)],innodb_buffer_pool_size:[Y,X(1,102400)],innodb_log_buffer_size:[Y,X(8,102400)],sort_buffer_size:[Y,X(1,102400)],read_buffer_size:[Y,X(1,102400)],read_rnd_buffer_size:[Y,X(1,102400)],join_buffer_size:[Y,X(1,102400)],thread_stack:[Y,X(1,102400)],binlog_cache_size:[Y,X(1,102400)],thread_cache_size:[Y,X(1,1e4)],table_open_cache:[Y,X(1,1e4)],max_connections:[Y,X(1,1e4)]}),ee=d(null);function ae(){ee.value.validate((e=>{if(e){R.loadingInfo.isLoading=!0,R.loadingInfo.content="\u6b63\u5728\u4fdd\u5b58...";let e={id:A.value.id,cont:H.value,action:"set_performance"};t.sysSoftManage(e).then((e=>{R.loadingInfo.isLoading=!1,R.loadingInfo.content="",2e3==e.code?n.success(e.msg):n.warning(e.msg)}))}}))}function le(e="stop"){let a="\u786e\u5b9a\u8981\u505c\u6b62\u5417\uff1f",l=!1,o="\u542f\u52a8\u6210\u529f";"stop"==e?(R.loadingInfo.content="\u6b63\u5728\u505c\u6b62\u4e2d...",l=!1,o="\u505c\u6b62\u6210\u529f"):"reload"==e?(R.loadingInfo.content="\u6b63\u5728\u91cd\u8f7d\u914d\u7f6e\u4e2d...",a="\u786e\u5b9a\u8981\u91cd\u8f7d\u914d\u7f6e\u5417\uff1f",l=!0,o="\u91cd\u8f7d\u914d\u7f6e\u6210\u529f"):"restart"==e&&(R.loadingInfo.content=A.value.status?"\u6b63\u5728\u91cd\u542f\u4e2d...":"\u6b63\u5728\u542f\u52a8\u4e2d...",a=A.value.status?"\u786e\u5b9a\u8981\u91cd\u542f\u5417\uff1f":"\u786e\u5b9a\u8981\u542f\u52a8\u5417\uff1f",l=!0,o=A.value.status?"\u91cd\u542f\u6210\u529f":"\u542f\u52a8\u6210\u529f"),i.confirm(`${a}`,"\u8b66\u544a",{closeOnClickModal:!1,cancelButtonText:"\u53d6\u6d88",confirmButtonText:"\u786e\u5b9a",type:"warning"}).then((a=>{R.loadingInfo.isLoading=!0,t.sysSoftManage({id:A.value.id,status:e,action:"status"}).then((e=>{R.loadingInfo.isLoading=!1,R.loadingInfo.content="",2e3==e.code?(n.success(o),A.value.status=l,W("refreshStatus",{id:A.value.id,status:l})):n.warning(e.msg)}))})).catch((()=>{}))}function te(e,a){return isNaN(e)?a:e}function oe(e){let a=e+"%";return"NaN%"==a&&(a="OFF"),a}let se=d(null);let ne=d(null);function ie(e){"error_log"==e.props.name?(R.loadingInfo.isLoading=!0,R.loadingInfo.content="\u6b63\u5728\u83b7\u53d6\u9519\u8bef\u65e5\u5fd7...",t.sysSoftManage({id:A.value.id,action:"get_error_log"}).then((e=>{R.loadingInfo.isLoading=!1,R.loadingInfo.content="",2e3==e.code?(A.value.error_log=e.data,V((()=>{se.value&&se.value.scrollToBottom()}))):n.warning(e.msg)}))):"slow_log"==e.props.name?(R.loadingInfo.isLoading=!0,R.loadingInfo.content="\u6b63\u5728\u83b7\u53d6\u6162\u65e5\u5fd7...",t.sysSoftManage({id:A.value.id,action:"get_slow_log"}).then((e=>{R.loadingInfo.isLoading=!1,R.loadingInfo.content="",2e3==e.code?(A.value.slow_log=e.data,V((()=>{ne.value&&ne.value.scrollToBottom()}))):n.warning(e.msg)}))):"loadstatus"===e.props.name?(R.loadingInfo.isLoading=!0,R.loadingInfo.content="\u6b63\u5728\u83b7\u53d6\u8d1f\u8f7d\u72b6\u6001...",t.sysSoftManage({id:A.value.id,action:"get_loadstatus"}).then((e=>{R.loadingInfo.isLoading=!1,R.loadingInfo.content="",2e3==e.code?A.value.loadstatus=e.data:n.warning(e.msg)}))):"edit_conf"===e.props.name?(R.loadingInfo.isLoading=!0,R.loadingInfo.content="\u6b63\u5728\u83b7\u53d6\u914d\u7f6e\u6587\u4ef6...",t.sysSoftManage({id:A.value.id,action:"get_conf"}).then((e=>{R.loadingInfo.isLoading=!1,R.loadingInfo.content="",2e3==e.code?(A.value.conf=e.data,A.value.oldConf=e.data):n.warning(e.msg)}))):"performanceSettings"===e.props.name&&(R.loadingInfo.isLoading=!0,R.loadingInfo.content="",t.sysSoftManage({id:A.value.id,action:"get_performance"}).then((e=>{R.loadingInfo.isLoading=!1,2e3==e.code?H.value=e.data:n.warning(e.msg)})),ee.value&&ee.value.resetFields())}function de(){if(A.value.oldConf==A.value.conf)return void n.warning("\u914d\u7f6e\u6587\u4ef6\u672a\u53d8\u52a8\uff0c\u65e0\u9700\u4fdd\u5b58!!!");if(""==A.value.conf||null==A.value.conf)return void n.warning("\u914d\u7f6e\u6587\u4ef6\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u914d\u7f6e");i.confirm("\u786e\u5b9a\u8981\u4fdd\u5b58\u914d\u7f6e\u6587\u4ef6\u5417\uff1f","\u8b66\u544a",{closeOnClickModal:!1,cancelButtonText:"\u53d6\u6d88",confirmButtonText:"\u786e\u5b9a",type:"warning"}).then((e=>{R.loadingInfo.isLoading=!0,R.loadingInfo.content="\u6b63\u5728\u4fdd\u5b58\u914d\u7f6e\u6587\u4ef6...",t.sysSoftManage({id:A.value.id,conf:A.value.conf,action:"save_conf"}).then((e=>{R.loadingInfo.isLoading=!1,R.loadingInfo.content="",2e3==e.code?n.success("\u4fdd\u5b58\u6210\u529f\uff0c\u8bf7\u624b\u52a8\u91cd\u8f7d\u914d\u7f6e!!!"):n.warning(e.msg)}))})).catch((()=>{}))}function re(){let e=$.data.version;if(!e)return!1;const a=e.match(/^(\d+)/);if(a){return parseInt(a[1],10)>=8}return!1}return r((()=>{A.value.id=$.data.id,A.value.name=$.data.name,A.value.status=$.data.status})),(e,t)=>{const s=_("CaretRight"),n=_("el-icon"),i=_("el-button"),d=_("el-tab-pane"),r=_("el-option"),V=_("el-select"),P=_("el-divider"),R=_("el-input"),W=_("el-form-item"),$=_("el-col"),_e=_("el-row"),ue=_("el-form"),fe=_("el-descriptions-item"),ce=_("InfoFilled"),pe=_("el-tooltip"),me=_("el-descriptions"),be=_("el-tabs");return u(),f(be,{"tab-position":"left",modelValue:g(D),"onUpdate:modelValue":t[21]||(t[21]=e=>v(D)?D.value=e:D=e),onTabClick:ie},{default:c((()=>[p(d,{label:"\u670d\u52a1\u72b6\u6001",name:"status"},{default:c((()=>[m("div",M,[m("div",w,[m("div",null,"\u5f53\u524d\u72b6\u6001\uff1a"+b(g(A).status?"\u542f\u52a8":"\u505c\u6b62"),1),p(n,{class:z(g(A).status?"on":"off")},{default:c((()=>[p(s)])),_:1},8,["class"])]),m("div",B,[p(i,{onClick:t[0]||(t[0]=e=>le("restart"))},{default:c((()=>[h(b(g(A).status?"\u91cd\u542f":"\u542f\u52a8"),1)])),_:1}),p(i,{onClick:t[1]||(t[1]=e=>le("stop")),disabled:!g(A).status},{default:c((()=>t[22]||(t[22]=[h("\u505c\u6b62")]))),_:1},8,["disabled"]),p(i,{onClick:t[2]||(t[2]=e=>le("reload")),disabled:!g(A).status},{default:c((()=>t[23]||(t[23]=[h("\u91cd\u8f7d\u914d\u7f6e")]))),_:1},8,["disabled"])])])])),_:1}),p(d,{label:"\u6027\u80fd\u8c03\u6574",name:"performanceSettings"},{default:c((()=>["performanceSettings"==g(D)?(u(),f(ue,{key:0,model:g(H),rules:g(Z),ref_key:"performanceRef",ref:ee,"label-position":"top"},{default:c((()=>[m("div",C,[t[24]||(t[24]=h(" \u4f18\u5316\u5efa\u8bae\uff1a ")),p(V,{onChange:J,placeholder:"\u8bf7\u9009\u62e9",clearable:"",modelValue:g(E),"onUpdate:modelValue":t[3]||(t[3]=e=>v(E)?E.value=e:E=e),style:{width:"200px"}},{default:c((()=>[(u(!0),y(x,null,k(g(I),(e=>(u(),f(r,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),p(P,{style:{margin:"12px 0 20px 0"},class:"xntips","content-position":"left"},{default:c((()=>t[25]||(t[25]=[h("\u6027\u80fd\u8c03\u6574")]))),_:1}),p(_e,{gutter:20},{default:c((()=>[p($,{xs:24,sm:12,md:8,lg:8,xl:8},{default:c((()=>[p(W,{label:"key_buffer_size",prop:"key_buffer_size"},{default:c((()=>[p(R,{clearable:"",modelValue:g(H).key_buffer_size,"onUpdate:modelValue":t[4]||(t[4]=e=>g(H).key_buffer_size=e),modelModifiers:{number:!0}},{append:c((()=>t[26]||(t[26]=[h("MB")]))),_:1},8,["modelValue"]),t[27]||(t[27]=m("span",{class:"right-tips"},"\u7d22\u5f15\u7f13\u51b2\u533a\u5927\u5c0f",-1))])),_:1}),p(W,{label:"join_buffer_size",prop:"join_buffer_size"},{default:c((()=>[p(R,{clearable:"",modelValue:g(H).join_buffer_size,"onUpdate:modelValue":t[5]||(t[5]=e=>g(H).join_buffer_size=e),modelModifiers:{number:!0}},{append:c((()=>t[28]||(t[28]=[h("KB")]))),_:1},8,["modelValue"]),t[29]||(t[29]=m("span",{class:"right-tips"},"join\u8054\u8868\u65f6\u7f13\u5b58\u5927\u5c0f",-1))])),_:1}),p(W,{label:"tmp_table_size",prop:"tmp_table_size"},{default:c((()=>[p(R,{clearable:"",modelValue:g(H).tmp_table_size,"onUpdate:modelValue":t[6]||(t[6]=e=>g(H).tmp_table_size=e),modelModifiers:{number:!0}},{append:c((()=>t[30]||(t[30]=[h("MB")]))),_:1},8,["modelValue"]),t[31]||(t[31]=m("span",{class:"right-tips"},"\u4e34\u65f6\u8868\u7f13\u5b58\u5927\u5c0f",-1))])),_:1}),p(W,{label:"innodb_buffer_pool_size",prop:"innodb_buffer_pool_size"},{default:c((()=>[p(R,{clearable:"",modelValue:g(H).innodb_buffer_pool_size,"onUpdate:modelValue":t[7]||(t[7]=e=>g(H).innodb_buffer_pool_size=e),modelModifiers:{number:!0}},{append:c((()=>t[32]||(t[32]=[h("MB")]))),_:1},8,["modelValue"]),t[33]||(t[33]=m("span",{class:"right-tips"},"InnoDB\u7f13\u51b2\u533a\u5927\u5c0f",-1))])),_:1}),p(W,{label:"innodb_log_buffer_size",prop:"innodb_log_buffer_size"},{default:c((()=>[p(R,{clearable:"",modelValue:g(H).innodb_log_buffer_size,"onUpdate:modelValue":t[8]||(t[8]=e=>g(H).innodb_log_buffer_size=e),modelModifiers:{number:!0}},{append:c((()=>t[34]||(t[34]=[h("MB")]))),_:1},8,["modelValue"]),t[35]||(t[35]=m("span",{class:"right-tips"},"InnoDB\u65e5\u5fd7\u7f13\u51b2\u533a\u5927\u5c0f",-1))])),_:1})])),_:1}),p($,{xs:24,sm:12,md:8,lg:8,xl:8},{default:c((()=>[p(W,{label:"read_rnd_buffer_size",prop:"read_rnd_buffer_size"},{default:c((()=>[p(R,{clearable:"",modelValue:g(H).read_rnd_buffer_size,"onUpdate:modelValue":t[9]||(t[9]=e=>g(H).read_rnd_buffer_size=e),modelModifiers:{number:!0}},{append:c((()=>t[36]||(t[36]=[h("KB")]))),_:1},8,["modelValue"]),t[37]||(t[37]=m("span",{class:"right-tips"},"\u968f\u673a\u8bfb\u53d6\u6bcf\u4e2a\u8fde\u63a5\u5185\u5b58\u5927\u5c0f",-1))])),_:1}),p(W,{label:"query_cache_size",prop:"query_cache_size",rules:re()?[]:[g(Y),X(0,102400)]},{default:c((()=>[p(R,{clearable:"",modelValue:g(H).query_cache_size,"onUpdate:modelValue":t[10]||(t[10]=e=>g(H).query_cache_size=e),modelModifiers:{number:!0},disabled:re()},{append:c((()=>t[38]||(t[38]=[h("MB")]))),_:1},8,["modelValue","disabled"]),t[39]||(t[39]=m("span",{class:"right-tips"},"\u67e5\u8be2\u7f13\u5b58(v8.x\u4e0d\u652f\u6301),0\u5173\u95ed\u7f13\u5b58",-1))])),_:1},8,["rules"]),p(W,{label:"thread_stack",prop:"thread_stack"},{default:c((()=>[p(R,{clearable:"",modelValue:g(H).thread_stack,"onUpdate:modelValue":t[11]||(t[11]=e=>g(H).thread_stack=e),modelModifiers:{number:!0}},{append:c((()=>t[40]||(t[40]=[h("KB")]))),_:1},8,["modelValue"]),t[41]||(t[41]=m("span",{class:"right-tips"},"\u6bcf\u4e2a\u7ebf\u7a0b\u7684\u6808\u5927\u5c0f",-1))])),_:1}),p(W,{label:"binlog_cache_size",prop:"binlog_cache_size"},{default:c((()=>[p(R,{clearable:"",modelValue:g(H).binlog_cache_size,"onUpdate:modelValue":t[12]||(t[12]=e=>g(H).binlog_cache_size=e),modelModifiers:{number:!0}},{append:c((()=>t[42]||(t[42]=[h("KB")]))),_:1},8,["modelValue"]),t[43]||(t[43]=m("span",{class:"right-tips"},"\u6bcf\u7ebf\u7a0b\u5199\u5165binlog\u7684\u7f13\u5b58\u5927\u5c0f",-1))])),_:1}),p(W,{label:"sort_buffer_size",prop:"sort_buffer_size"},{default:c((()=>[p(R,{clearable:"",modelValue:g(H).sort_buffer_size,"onUpdate:modelValue":t[13]||(t[13]=e=>g(H).sort_buffer_size=e),modelModifiers:{number:!0}},{append:c((()=>t[44]||(t[44]=[h("KB")]))),_:1},8,["modelValue"]),t[45]||(t[45]=m("span",{class:"right-tips"},"\u6392\u5e8f\u65f6\u6bcf\u4e2a\u8fde\u63a5\u5185\u5b58\u5927\u5c0f",-1))])),_:1})])),_:1}),p($,{xs:24,sm:12,md:8,lg:8,xl:8},{default:c((()=>[p(W,{label:"read_buffer_size",prop:"read_buffer_size"},{default:c((()=>[p(R,{clearable:"",modelValue:g(H).read_buffer_size,"onUpdate:modelValue":t[14]||(t[14]=e=>g(H).read_buffer_size=e),modelModifiers:{number:!0}},{append:c((()=>t[46]||(t[46]=[h("KB")]))),_:1},8,["modelValue"]),t[47]||(t[47]=m("span",{class:"right-tips"},"\u626b\u8868\u65f6\u6bcf\u4e2a\u8fde\u63a5\u5185\u5b58\u5927\u5c0f",-1))])),_:1}),p(W,{label:"max_connections",prop:"max_connections"},{default:c((()=>[p(R,{clearable:"",modelValue:g(H).max_connections,"onUpdate:modelValue":t[15]||(t[15]=e=>g(H).max_connections=e),modelModifiers:{number:!0}},null,8,["modelValue"]),t[48]||(t[48]=m("span",{class:"right-tips"},"\u6700\u5927\u8fde\u63a5\u6570",-1))])),_:1}),p(W,{label:"table_open_cache",prop:"table_open_cache"},{default:c((()=>[p(R,{clearable:"",modelValue:g(H).table_open_cache,"onUpdate:modelValue":t[16]||(t[16]=e=>g(H).table_open_cache=e),modelModifiers:{number:!0}},null,8,["modelValue"]),t[49]||(t[49]=m("span",{class:"right-tips"},"\u8868\u7f13\u5b58\u5927\u5c0f",-1))])),_:1}),p(W,{label:"thread_cache_size",prop:"thread_cache_size"},{default:c((()=>[p(R,{clearable:"",modelValue:g(H).thread_cache_size,"onUpdate:modelValue":t[17]||(t[17]=e=>g(H).thread_cache_size=e),modelModifiers:{number:!0}},null,8,["modelValue"]),t[50]||(t[50]=m("span",{class:"right-tips"},"\u7ebf\u7a0b\u7f13\u5b58\u5927\u5c0f",-1))])),_:1}),p(W,{label:" \xa0"},{default:c((()=>[p(i,{type:"primary",onClick:ae,disabled:!g(A).status},{default:c((()=>t[51]||(t[51]=[h(" \u4fdd\u5b58\u5e76\u91cd\u8f7d ")]))),_:1},8,["disabled"]),t[52]||(t[52]=m("span",{class:"right-tips"},"Mysql\u672a\u8fd0\u884c\uff0c\u4e0d\u5efa\u8bae\u4fdd\u5b58\u914d\u7f6e",-1))])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])):j("",!0)])),_:1}),p(d,{label:"\u8d1f\u8f7d\u72b6\u6001",name:"loadstatus"},{default:c((()=>[p(me,{border:!0,column:3,direction:"vertical",title:"\u8fd0\u884c\u8d1f\u8f7d"},{default:c((()=>[p(fe,{label:"\u542f\u52a8\u65f6\u95f4"},{default:c((()=>[h(b(g(A).loadstatus.RunTime?g(a)(1e3*g(A).loadstatus.RunTime):""),1)])),_:1}),p(fe,{label:"\u603b\u8fde\u63a5\u6b21\u6570"},{default:c((()=>[h(b(g(A).loadstatus.Connections||0),1)])),_:1}),p(fe,{label:"\u6bcf\u79d2\u67e5\u8be2(QPS)"},{default:c((()=>[h(b(parseInt(g(A).loadstatus.Questions/g(A).loadstatus.Uptime)||0),1)])),_:1}),p(fe,{label:"\u6bcf\u79d2\u6b21\u6570(TPS)"},{default:c((()=>[h(b(parseInt((parseInt(g(A).loadstatus.Com_commit)+parseInt(g(A).loadstatus.Com_rollback))/g(A).loadstatus.Uptime)||0),1)])),_:1}),p(fe,{label:"\u53d1\u9001/\u63a5\u6536"},{default:c((()=>[h(b(g(l)(g(A).loadstatus.Bytes_sent)+"/"+g(l)(g(A).loadstatus.Bytes_received)||""),1)])),_:1}),p(fe,{label:"File/Position"},{default:c((()=>[h(b(g(A).loadstatus.File+"/"+g(A).loadstatus.Position||""),1)])),_:1}),p(fe,null,{label:c((()=>[m("div",L,[t[53]||(t[53]=h(" \u6d3b\u52a8/\u6700\u9ad8\u8fde\u63a5\u6570 ")),p(pe,{effect:"dark",content:"\u82e5\u503c\u8fc7\u5927\uff0c\u914d\u7f6e\u6587\u4ef6\u589e\u52a0 thread_cache_size/max_connections",placement:"top-start"},{default:c((()=>[p(n,null,{default:c((()=>[p(ce)])),_:1})])),_:1})])])),default:c((()=>[h(" "+b(g(A).loadstatus.Threads_running+"/"+g(A).loadstatus.Max_used_connections||""),1)])),_:1}),p(fe,null,{label:c((()=>[m("div",S,[t[54]||(t[54]=h(" \u7ebf\u7a0b\u7f13\u5b58\u547d\u4e2d\u7387 ")),p(pe,{effect:"dark",content:"\u82e5\u503c\u8fc7\u4f4e\uff0c\u914d\u7f6e\u6587\u4ef6\u589e\u52a0 thread_cache_size",placement:"top-start"},{default:c((()=>[p(n,null,{default:c((()=>[p(ce)])),_:1})])),_:1})])])),default:c((()=>[h(" "+b((100*(1-g(A).loadstatus.Threads_created/g(A).loadstatus.Connections)).toFixed(2)+"%"||0),1)])),_:1}),p(fe,null,{label:c((()=>[m("div",U,[t[55]||(t[55]=h(" \u7d22\u5f15\u547d\u4e2d\u7387 ")),p(pe,{effect:"dark",content:"\u82e5\u503c\u8fc7\u4f4e\uff0c\u914d\u7f6e\u6587\u4ef6\u589e\u52a0 key_buffer_size",placement:"top-start"},{default:c((()=>[p(n,null,{default:c((()=>[p(ce)])),_:1})])),_:1})])])),default:c((()=>[h(" "+b(te((100*(1-g(A).loadstatus.Key_reads/g(A).loadstatus.Key_read_requests)).toFixed(2),"0")+"%"||""),1)])),_:1}),p(fe,null,{label:c((()=>[m("div",q,[t[56]||(t[56]=h(" Innodb\u7d22\u5f15\u547d\u4e2d\u7387 ")),p(pe,{effect:"dark",content:"\u82e5\u503c\u8fc7\u4f4e\uff0c\u914d\u7f6e\u6587\u4ef6\u589e\u52a0 innodb_buffer_pool_size",placement:"top-start"},{default:c((()=>[p(n,null,{default:c((()=>[p(ce)])),_:1})])),_:1})])])),default:c((()=>[h(" "+b(te((100*(1-g(A).loadstatus.Innodb_buffer_pool_reads/g(A).loadstatus.Innodb_buffer_pool_read_requests)).toFixed(2),"0")+"%"||""),1)])),_:1}),p(fe,null,{label:c((()=>[m("div",F,[t[57]||(t[57]=h(" \u67e5\u8be2\u7f13\u5b58\u547d\u4e2d\u7387 ")),p(pe,{effect:"dark",content:"\u82e5\u503c\u8fc7\u4f4e\uff0c\u914d\u7f6e\u6587\u4ef6\u589e\u52a0 query_cache_size",placement:"top-start"},{default:c((()=>[p(n,null,{default:c((()=>[p(ce)])),_:1})])),_:1})])])),default:c((()=>[h(" "+b(oe((parseInt(g(A).loadstatus.Qcache_hits)/(parseInt(g(A).loadstatus.Qcache_hits)+parseInt(g(A).loadstatus.Qcache_inserts))*100).toFixed(2))||""),1)])),_:1}),p(fe,null,{label:c((()=>[m("div",T,[t[58]||(t[58]=h(" \u521b\u5efa\u4e34\u65f6\u8868\u5230\u78c1\u76d8 ")),p(pe,{effect:"dark",content:"\u82e5\u503c\u8fc7\u5927\uff0c\u914d\u7f6e\u6587\u4ef6\u589e\u52a0 tmp_table_size",placement:"top-start"},{default:c((()=>[p(n,null,{default:c((()=>[p(ce)])),_:1})])),_:1})])])),default:c((()=>[h(" "+b(te((g(A).loadstatus.Created_tmp_disk_tables/g(A).loadstatus.Created_tmp_tables*100).toFixed(2),"0")+"%"||""),1)])),_:1}),p(fe,null,{label:c((()=>[m("div",K,[t[59]||(t[59]=h(" \u5df2\u6253\u5f00\u7684\u8868 ")),p(pe,{effect:"dark",content:"\u914d\u7f6e\u6587\u4ef6 table_open_cache \u503c\u5e94 >= \u6b64\u503c",placement:"top-start"},{default:c((()=>[p(n,null,{default:c((()=>[p(ce)])),_:1})])),_:1})])])),default:c((()=>[h(" "+b(g(A).loadstatus.Open_tables||0),1)])),_:1}),p(fe,null,{label:c((()=>[m("div",N,[t[60]||(t[60]=h(" \u5168\u8fde\u63a5\u67e5\u8be2\u91cf(Full Join) ")),p(pe,{effect:"dark",content:"\u82e5\u503c\u8fc7\u5927\uff0c\u8bf7\u907f\u514d\u4f7f\u7528\u5168\u8fde\u63a5\u3001\u53ef\u901a\u8fc7\u5176\u4ed6\u8fde\u63a5\u65b9\u5f0f\uff08\u5982\u5185\u8fde\u63a5\u3001\u5de6\u8fde\u63a5\uff09\u66ff\u4ee3\u5168\u8fde\u63a5",placement:"top-start"},{default:c((()=>[p(n,null,{default:c((()=>[p(ce)])),_:1})])),_:1})])])),default:c((()=>[h(" "+b(g(A).loadstatus.Select_full_join||0),1)])),_:1}),p(fe,null,{label:c((()=>[m("div",G,[t[61]||(t[61]=h(" \u8303\u56f4\u67e5\u8be2\u7d22\u5f15\u68c0\u67e5\u6b21\u6570 ")),p(pe,{effect:"dark",content:"\u82e5\u503c\u8fc7\u5927\uff0c\u8bf7\u4f18\u5316\u7d22\u5f15\u3001\u5c3d\u91cf\u51cf\u5c11\u5728\u67e5\u8be2\u4e2d\u4f7f\u7528\u590d\u6742\u7684\u6761\u4ef6\u6216\u591a\u4e2a\u8303\u56f4\u64cd\u4f5c\uff0c\u4ee5\u964d\u4f4e\u9700\u8981\u68c0\u67e5\u7684\u8303\u56f4\u5927\u5c0f",placement:"top-start"},{default:c((()=>[p(n,null,{default:c((()=>[p(ce)])),_:1})])),_:1})])])),default:c((()=>[h(" "+b(g(A).loadstatus.Select_range_check||0),1)])),_:1}),p(fe,null,{label:c((()=>[m("div",O,[t[62]||(t[62]=h(" \u6392\u5e8f\u540e\u7684\u5408\u5e76\u6b21\u6570 ")),p(pe,{effect:"dark",content:"\u82e5\u503c\u8fc7\u5927\uff0c\u914d\u7f6e\u6587\u4ef6\u589e\u52a0 sort_buffer_size",placement:"top-start"},{default:c((()=>[p(n,null,{default:c((()=>[p(ce)])),_:1})])),_:1})])])),default:c((()=>[h(" "+b(g(A).loadstatus.Sort_merge_passes||0),1)])),_:1}),p(fe,null,{label:c((()=>[m("div",Q,[t[63]||(t[63]=h(" \u9501\u8868\u7b49\u5f85\u6b21\u6570 ")),p(pe,{effect:"dark",content:"\u82e5\u503c\u8fc7\u5927\uff0c\u8bf7\u4f18\u5316\u67e5\u8be2\u8bed\u53e5\uff0c\u51cf\u5c11\u9501\u7ade\u4e89",placement:"top-start"},{default:c((()=>[p(n,null,{default:c((()=>[p(ce)])),_:1})])),_:1})])])),default:c((()=>[h(" "+b(g(A).loadstatus.Table_locks_waited||0),1)])),_:1})])),_:1})])),_:1}),p(d,{label:"\u914d\u7f6e\u4fee\u6539",name:"edit_conf"},{default:c((()=>[p(o,{modelValue:g(A).conf,"onUpdate:modelValue":t[18]||(t[18]=e=>g(A).conf=e),fontSize:"13px",placeholder:g(A).conf?"":"\u672a\u83b7\u53d6\u914d\u7f6e\u6587\u4ef6",showLineNums:!0,lineWrapping:!0,mode:"javascript",height:"60vh","read-only":!1,ref:"lyCodemirrorConf"},null,8,["modelValue","placeholder"]),p(i,{type:"primary",style:{"margin-top":"10px","margin-bottom":"10px"},onClick:de},{default:c((()=>t[64]||(t[64]=[h("\u4fdd\u5b58")]))),_:1}),t[65]||(t[65]=m("div",{class:"ry-cj-care"},[m("li",null,"\u82e5\u60a8\u4e0d\u4e86\u89e3Nginx\u7684\u914d\u7f6e\u6587\u4ef6\u89c4\u5219\uff0c\u8bf7\u52ff\u968f\u610f\u4fee\u6539!!!"),m("li",null,"\u5feb\u6377\u952e CTRL+F \u67e5\u627e\u548c\u66ff\u6362\u5185\u5bb9")],-1))])),_:1}),p(d,{label:"\u9519\u8bef\u65e5\u5fd7",name:"error_log"},{default:c((()=>[p(o,{modelValue:g(A).error_log,"onUpdate:modelValue":t[19]||(t[19]=e=>g(A).error_log=e),fontSize:"13px",placeholder:g(A).error_log?"":"\u5f53\u524d\u6ca1\u6709\u9519\u8bef\u65e5\u5fd7\uff01",showLineNums:!1,lineWrapping:!1,mode:"log",height:"68vh","read-only":!0,ref_key:"lyCodemirrorErrorLog",ref:se},null,8,["modelValue","placeholder"])])),_:1}),p(d,{label:"\u6162\u65e5\u5fd7",name:"slow_log"},{default:c((()=>[p(o,{modelValue:g(A).slow_log,"onUpdate:modelValue":t[20]||(t[20]=e=>g(A).slow_log=e),fontSize:"13px",placeholder:g(A).slow_log?"":"\u5f53\u524d\u6ca1\u6709\u6162\u65e5\u5fd7\uff01",showLineNums:!1,lineWrapping:!1,mode:"log",height:"68vh","read-only":!0,ref_key:"lyCodemirrorSlowLog",ref:ne},null,8,["modelValue","placeholder"])])),_:1})])),_:1},8,["modelValue"])}}},[["__scopeId","data-v-da7b982f"]]);export{P as default};
