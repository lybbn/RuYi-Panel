var e=Object.defineProperty,l=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,n=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,o=(e,o)=>{for(var i in o||(o={}))a.call(o,i)&&n(e,i,o[i]);if(l)for(var i of l(o))t.call(o,i)&&n(e,i,o[i]);return e};import{c as i,i as s,A as r,u,m as d}from"./index.CzVJI0jJ.js";import{k as c,b as p,ag as f,o as m,c as v,P as g,H as h,u as y,L as b,G as _,K as k,t as w,n as j,j as C,S as x,a as O,aq as I,M as V,D as S,O as R,a4 as L,a5 as F,I as z}from"./@vue.BluSRtaz.js";import{L as A}from"./dialog.BvK2-1BY.js";import{l as T}from"./fileList.DrN7Z9dU.js";import{_ as U}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{E as D,a as E}from"./element-plus.CMBwCou9.js";import{b as H,u as P}from"./vue-router.CjawWhbh.js";import{m as B}from"./moduleRunLogs.DEGOUBhr.js";import{l as $}from"./index.GhyFdw6y.js";import"./crypto-js.CCePG2on.js";import"./js-cookie.Ch5AnFJE.js";import"./clipboard.55ERAcYO.js";import{s as N}from"./softInfo.BejlUjrw.js";import"./axios.3Xbkft1r.js";import"./vue-clipboard3.CjTOZN0C.js";import"./pinia.DhJalR8o.js";import"./@element-plus.sBVz1STF.js";import"./nprogress.B5M_jmCc.js";import"./@xterm.8vZnc5Va.js";import"./pinia-plugin-persistedstate.DTf8V5gU.js";import"./destr.ZpApkS-1.js";import"./deep-pick-omit.DP_A4OSP.js";import"./lodash-es.BccSst5e.js";import"./@vueuse.l0Dx-5Bl.js";import"./@popperjs.CpAfbxx4.js";import"./@ctrl.D-8vaqgC.js";import"./dayjs.9DdhAVak.js";import"./async-validator.Cuo4gI4y.js";import"./memoize-one.Ds0C_khL.js";import"./normalize-wheel-es.CUoAWVRo.js";import"./@floating-ui.yzr8CaSr.js";import"./Pagination.DhOoI1te.js";import"./vue-codemirror.DFdUdG36.js";import"./codemirror.BJSsQESG.js";import"./@codemirror.BkM7iGym.js";import"./@lezer.CzslrRCj.js";import"./crelt.DSg10-ms.js";import"./style-mod.Dj2YSJ7-.js";import"./w3c-keyname.f-y9tSbI.js";const q=U({__name:"moduleAdd",emits:["refreshData","closed"],setup(e,{expose:l,emit:a}){const t=i(),n=a;let u=c((()=>"windows"==t.sysConfig.currentOs)),d=p(!1),C=p(!1),x=p(""),O="add",I=p({path:"",nums:1,user:"",command:"",name:""}),V=p({}),S=p(!1),R=p(null);let L=p({name:[{required:!0,validator:function(e,l,a){l?/^[a-zA-Z0-9]+$/.test(l)?a():a(new Error("\u53ea\u80fd\u8f93\u5165\u5b57\u6bcd\u548c\u6570\u5b57")):a(new Error("\u8bf7\u8f93\u5165\u5b57\u6bcd\u548c\u6570\u5b57"))},trigger:"blur"}],nums:[{required:!0,message:"\u8bf7\u8f93\u5165\u8fdb\u7a0b\u6570\u91cf",trigger:"blur"}],path:[{required:!0,message:"\u8bf7\u9009\u62e9\u9879\u76ee\u76ee\u5f55",trigger:"blur"}],command:[{required:!0,message:"\u8bf7\u8f93\u5165\u542f\u52a8\u547d\u4ee4",trigger:"blur"}]});function F(){n("closed")}let z=p(null);function U(e){let l=s(e);I.value.path=l,j((()=>{z.value.blur()}))}function E(){S.value=!0,j((()=>{R.value.handleOpen({path:I.value.path,isDir:!0},"\u76ee\u5f55\u9009\u62e9")}))}let H=p(null);function P(){H.value.validate((e=>{if(e){let e=o({},I.value);e.action="add_process","edit"==O&&(e.action="edit_process"),t.loadingInfo.isLoading=!0,t.loadingInfo.content="\u4fdd\u5b58\u4e2d...",r.sysSupervisormg(e).then((e=>{t.loadingInfo.isLoading=!1,t.loadingInfo.content="",2e3==e.code?(D.success(e.msg),F(),n("refreshData")):D.warning(e.msg)}))}}))}return l({handleOpen:function(e,l){if(x.value=l,d.value=!0,e){O="edit";let l=s(e);I.value=l,V.value=s(e)}else u.value||(I.value.user="root")}}),(e,l)=>{const a=f("el-alert"),t=f("el-input"),n=f("el-form-item"),o=f("el-button"),i=f("el-form");return m(),v("div",null,[g(A,{modelValue:y(d),"onUpdate:modelValue":l[5]||(l[5]=e=>w(d)?d.value=e:d=e),title:y(x),width:"680px","before-close":F,showFullScreen:!1},{footer:h((()=>[g(o,{onClick:F,loading:y(C)},{default:h((()=>l[8]||(l[8]=[b("\u53d6\u6d88")]))),_:1},8,["loading"]),g(o,{type:"primary",onClick:P,loading:y(C)},{default:h((()=>l[9]||(l[9]=[b("\u4fdd\u5b58")]))),_:1},8,["loading"])])),default:h((()=>[g(i,{inline:!1,model:y(I),rules:y(L),ref_key:"rulesForm",ref:H,"label-position":"right","label-width":"auto"},{default:h((()=>[y(u)?k("",!0):(m(),_(a,{key:0,type:"warning",style:{"margin-bottom":"10px"}},{default:h((()=>l[7]||(l[7]=[b("\u542f\u52a8\u547d\u4ee4\u6700\u597d\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84\uff0c\u591a\u4e2a\u547d\u4ee4\u8bf7\u4f7f\u7528 && \u5206\u5272")]))),_:1})),g(n,{label:"\u540d\u79f0\uff1a",prop:"name"},{default:h((()=>[g(t,{modelValue:y(I).name,"onUpdate:modelValue":l[0]||(l[0]=e=>y(I).name=e),placeholder:"\u8bf7\u8f93\u5165\u540d\u79f0\uff08\u4e0d\u652f\u6301\u4e2d\u6587\uff09","max-length":"30",disabled:"edit"==y(O)},null,8,["modelValue","disabled"])])),_:1}),y(u)?k("",!0):(m(),_(n,{key:1,label:"\u542f\u52a8\u7528\u6237\uff1a",prop:"user"},{default:h((()=>[g(t,{modelValue:y(I).user,"onUpdate:modelValue":l[1]||(l[1]=e=>y(I).user=e),placeholder:"\u8bf7\u8f93\u5165\u542f\u52a8\u7528\u6237","max-length":"30"},null,8,["modelValue"])])),_:1})),g(n,{label:"\u9879\u76ee\u76ee\u5f55\uff1a",prop:"path"},{default:h((()=>[g(t,{modelValue:y(I).path,"onUpdate:modelValue":l[2]||(l[2]=e=>y(I).path=e),placeholder:"\u8bf7\u9009\u62e9\u9879\u76ee\u76ee\u5f55",class:"selectDirs",ref_key:"PathInputElement",ref:z},{prepend:h((()=>[g(o,{onClick:E,icon:"Folder",type:"primary"})])),_:1},8,["modelValue"])])),_:1}),g(n,{label:"\u542f\u52a8\u547d\u4ee4\uff1a",prop:"command"},{default:h((()=>[g(t,{modelValue:y(I).command,"onUpdate:modelValue":l[3]||(l[3]=e=>y(I).command=e),type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"\u5982\uff1apython manage.py runserver 0.0.0.0:8000",maxlength:"300"},null,8,["modelValue"])])),_:1}),g(n,{label:"\u8fdb\u7a0b\u6570\u91cf\uff1a",prop:"nums"},{default:h((()=>[g(t,{modelValue:y(I).nums,"onUpdate:modelValue":l[4]||(l[4]=e=>y(I).nums=e),placeholder:"\u8bf7\u8f93\u5165\u8fdb\u7a0b\u6570\u91cf",type:"number",min:1},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"]),y(S)?(m(),_(T,{key:0,ref_key:"chooseDirShowFlag",ref:R,onChange:U,onClosed:l[6]||(l[6]=e=>w(S)?S.value=!1:S=!1)},null,512)):k("",!0)])}}},[["__scopeId","data-v-340b52bb"]]),K=U({__name:"configEditor",props:{apiObj:{type:Function,default:null},saveApiObj:{type:Function,default:null},saveContentKey:{type:String,default:"content"},successCode:{type:Number,default:2e3},fullscreen:{type:Boolean,default:!1},canSave:{type:Boolean,default:!0},width:{type:String,default:"60%"},top:{type:String,default:"10vh"}},emits:["closed"],setup(e,{expose:l,emit:a}){const t=a,n=e;let o=p(null),i=p("55vh"),s=p("javascript"),r=p(!1),u=p(null),d=p(null),c=p(""),v=p(""),k=p("FolderChecked"),I=p(!1),V=p(""),S=p(!1),R=p({}),L=p({});function F(){v.value!=c.value?E.confirm("\u68c0\u6d4b\u5230\u6587\u4ef6\u53d8\u52a8\uff0c\u662f\u5426\u4fdd\u5b58\u66f4\u6539?","\u63d0\u793a",{confirmButtonText:"\u4fdd\u5b58",cancelButtonText:"\u4e0d\u4fdd\u5b58",type:"warning"}).then((()=>{H(!0)})).catch((()=>{t("closed")})):t("closed")}function z(e){e==v.value?k.value="FolderChecked":k.value="InfoFilled"}function T(e){j((()=>{const l=o.value.getRef();if(l.dialogContentRef){const a=l.dialogContentRef.$refs.headerRef.offsetHeight,t=document.body.offsetHeight;i.value=e?t-a-d.value.offsetHeight:"55vh"}}))}function U(){S.value=!0;var e={};Object.assign(e,R.value),n.apiObj&&n.apiObj!={}?n.apiObj(e).then((e=>{S.value=!1,e.code==n.successCode?("json"==s.value?c.value=function(e){try{return JSON.stringify(JSON.parse(e),null,4)}catch(l){return e}}(e.data):c.value=e.data,v.value=c.value):(D.warning(e.msg),r.value=!0)})):S.value=!1}function H(e=!1){if(n.canSave){S.value=!0;var l={};l[n.saveContentKey]=c.value,Object.assign(l,L.value),n.saveApiObj&&n.saveApiObj!={}?n.saveApiObj(l).then((l=>{S.value=!1,l.code==n.successCode?(v.value=c.value,D.success("\u4fdd\u5b58\u6210\u529f"),k.value="FolderChecked",e&&t("closed")):D.warning(l.msg)})):S.value=!1}else D.warning("\u7981\u6b62\u4fdd\u5b58")}function P(){j((()=>{const e=o.value.getRef();if(e.dialogContentRef){const l=e.dialogContentRef.$refs.headerRef.offsetHeight,a=document.body.offsetHeight;e.dialogContentRef.fullscreen?i.value=a-l-d.value.offsetHeight:i.value="55vh"}}))}function B(e){e.ctrlKey&&"s"===e.key.toLowerCase()&&(e.preventDefault(),v.value==c.value?D.warning("\u68c0\u6d4b\u5230\u6587\u4ef6\u672a\u53d8\u52a8\uff0c\u65e0\u9700\u4fdd\u5b58"):H(!1))}return C((()=>{window.addEventListener("resize",P),P()})),x((()=>{window.removeEventListener("resize",P)})),l({handleOpen:function(e,l,a,t){V.value=t,I.value=!0,a&&(s.value=a),R.value=Object.assign(R.value,e),l&&(L.value=l),j((()=>{U()}))}}),(l,a)=>{const t=f("el-button"),n=f("InfoFilled"),p=f("el-icon"),v=f("FolderChecked");return m(),_(A,{ref_key:"codeMirrorDialogRef",ref:o,loading:y(S),modelValue:y(I),"onUpdate:modelValue":a[2]||(a[2]=e=>w(I)?I.value=e:I=e),title:y(V),width:e.width,top:e.top,"before-close":F,fullscreen:e.fullscreen,onOnChangeFullScreen:T},{default:h((()=>[O("div",{class:"handlecaoz",ref_key:"handlecaozRef",ref:d},[g(t,{disabled:y(S),size:"small",type:"info",color:"#2F3128",dark:"",icon:"Refresh",onClick:U},{default:h((()=>a[3]||(a[3]=[b("\u5237\u65b0")]))),_:1},8,["disabled"]),g(t,{disabled:y(S)||y(r),size:"small",type:"info",color:"#2F3128",dark:"",onClick:a[0]||(a[0]=e=>H(!1))},{icon:h((()=>["InfoFilled"==y(k)?(m(),_(p,{key:0,style:{color:"var(--el-color-warning)"}},{default:h((()=>[g(n)])),_:1})):(m(),_(p,{key:1},{default:h((()=>[g(v)])),_:1}))])),default:h((()=>[a[4]||(a[4]=b(" \u4fdd\u5b58 "))])),_:1},8,["disabled"])],512),g($,{onKeydown:B,modelValue:y(c),"onUpdate:modelValue":a[1]||(a[1]=e=>w(c)?c.value=e:c=e),onChange:z,fontSize:"15px",placeholder:(y(c),""),showLineNums:!0,lineWrapping:!0,mode:y(s),height:y(i),"read-only":y(r),ref_key:"lyCodemirror",ref:u},null,8,["modelValue","placeholder","mode","height","read-only"])])),_:1},8,["loading","modelValue","title","width","top","fullscreen"])}}},[["__scopeId","data-v-afea48a4"]]),M={class:"lyflex"},G={class:"lyflex"},J={class:"lyflex"},Q={class:"handle-top"},W={class:"search-input"},X={class:"lyczj"},Y=["onClick"],Z={style:{display:"flex","align-items":"center"}},ee={key:0},le={key:1,class:"softmask"},ae={key:2,class:"soft-ins-guide-dialog"},te=U({__name:"moduleTable",setup(e,{expose:l}){const a=H(),t=i(),n=u();let s=c((()=>n.ismobile)),A=c((()=>"windows"==t.sysConfig.currentOs)),T=p(!1),U=p(300),P=p(null),$=p(null),te=p(null),ne=p(null),oe=p({installed:!1,version:"",status:!1,name:"",ping:!1}),ie=p({}),se=p([]),re=[{id:"",name:"\u6240\u6709"},{id:!0,name:"\u5df2\u5f00\u542f"},{id:!1,name:"\u5df2\u505c\u6b62"}],ue=p(!1),de=p(null);function ce(){ue.value=!0,j((()=>{de.value.handleOpen(oe.value,"\u3010"+oe.value.name+"("+oe.value.version+")\u3011\u7ba1\u7406")}))}function pe(){T.value=!0;let e=o({},ie.value);r.sysGetSupervisormg(e).then((e=>{T.value=!1,2e3===e.code&&(se.value=e.data)}))}function fe(){ie.value.page=1,pe()}function me(e="stop"){let l="\u786e\u5b9a\u8981\u505c\u6b62\u5417\uff1f",a=!1,n="\u542f\u52a8\u6210\u529f";"stop"==e?(t.loadingInfo.content="\u6b63\u5728\u505c\u6b62\u4e2d...",a=!1,n="\u505c\u6b62\u6210\u529f"):"reload"==e?(t.loadingInfo.content="\u6b63\u5728\u91cd\u8f7d\u914d\u7f6e\u4e2d...",l="\u786e\u5b9a\u8981\u91cd\u8f7d\u914d\u7f6e\u5417\uff1f",a=oe.value.status,n="\u91cd\u8f7d\u914d\u7f6e\u6210\u529f"):"restart"==e&&(t.loadingInfo.content=oe.value.status?"\u6b63\u5728\u91cd\u542f\u4e2d...":"\u6b63\u5728\u542f\u52a8\u4e2d...",l=oe.value.status?"\u786e\u5b9a\u8981\u91cd\u542f\u5417\uff1f":"\u786e\u5b9a\u8981\u542f\u52a8\u5417\uff1f",a=!0,n=oe.value.status?"\u91cd\u542f\u6210\u529f":"\u542f\u52a8\u6210\u529f"),E.confirm(`${l}`,"\u8b66\u544a",{closeOnClickModal:!1,cancelButtonText:"\u53d6\u6d88",confirmButtonText:"\u786e\u5b9a",type:"warning"}).then((l=>{t.loadingInfo.isLoading=!0,r.sysSoftManage({id:oe.value.id,status:e,action:"status"}).then((e=>{t.loadingInfo.isLoading=!1,t.loadingInfo.content="",2e3==e.code?(D.success(n),oe.value.status=a):D.warning(e.msg)}))})).catch((()=>{}))}function ve(e="stop",l){let a="\u786e\u5b9a\u8981\u505c\u6b62\u5417\uff1f",n="\u542f\u52a8\u6210\u529f";l.status,"stop"==e?(t.loadingInfo.content="\u6b63\u5728\u505c\u6b62\u4e2d...",n="\u505c\u6b62\u6210\u529f"):"restart"==e?(t.loadingInfo.content="\u6b63\u5728\u91cd\u542f\u4e2d...",a="\u786e\u5b9a\u8981\u91cd\u542f\u5417\uff1f",n="\u91cd\u542f\u6210\u529f"):"start"==e&&(t.loadingInfo.content="\u6b63\u5728\u542f\u52a8\u4e2d...",a="\u786e\u5b9a\u8981\u542f\u52a8\u5417\uff1f",n="\u542f\u52a8\u6210\u529f"),E.confirm(`${a}`,"\u8b66\u544a",{closeOnClickModal:!1,cancelButtonText:"\u53d6\u6d88",confirmButtonText:"\u786e\u5b9a",type:"warning"}).then((a=>{t.loadingInfo.isLoading=!0,r.sysSupervisormg({name:l.name,action:"set_status",status:e}).then((e=>{t.loadingInfo.isLoading=!1,t.loadingInfo.content="",2e3==e.code?(D.success(n),pe()):D.warning(e.msg)}))})).catch((()=>{}))}let ge=p(!1),he=p(null);function ye(){ge.value=!0,j((()=>{he.value.handleOpen(null,"\u6dfb\u52a0\u5b88\u62a4\u8fdb\u7a0b")}))}let be=p(null),_e=p(!1);function ke(){a.push({path:"/appstore"})}let we=p(null),je=p(!1);function Ce(e=!1){let l=ne.value?ne.value.offsetHeight:0,a=te.value?te.value.offsetHeight:0,t=$.value?$.value.offsetHeight:0;U.value=function(e,l=!1){var a=l?60:0;let t=(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)-e;var n=navigator.userAgent;return n&&/Android/.test(n)||n&&/iPhone|ipad|ipod|ios/.test(n)?600:t-a}(t+a+l-112,e)}function xe(){j((()=>{Ce()}))}return C((()=>{window.addEventListener("resize",xe),xe()})),x((()=>{window.removeEventListener("resize",xe)})),l({RefreshData:function(){!function(e="supervisor"){""!=e&&(t.loadingInfo.isLoading=!0,t.loadingInfo.content="\u6b63\u5728\u83b7\u53d6...",r.sysSoftinfoMg({name:e,action:"get_soft_info"}).then((e=>{t.loadingInfo.isLoading=!1,t.loadingInfo.content="",2e3==e.code?oe.value=e.data:D.warning(e.msg)})))}(),pe()}}),(e,l)=>{const n=f("el-tag"),o=f("el-button"),i=f("el-divider"),u=f("el-card"),c=f("el-col"),p=f("el-option"),C=f("el-select"),x=f("el-input"),H=f("el-row"),te=f("el-table-column"),Ce=f("el-tooltip"),xe=f("QuestionFilled"),Oe=f("el-icon"),Ie=f("el-table"),Ve=f("InfoFilled"),Se=I("loading");return m(),v("div",null,[O("div",{style:{"margin-bottom":"20px"},class:"lystatuscard",ref_key:"tableStatusTabs",ref:ne},[g(u,{shadow:"hover",style:S({overflowX:y(s)?"auto":"none"})},{default:h((()=>[O("div",M,[g(n,{style:{"margin-right":"20px"},effect:"dark",type:"success"},{default:h((()=>[b(V(y(oe).name||"\u672a\u77e5"),1)])),_:1}),g(n,{style:{"margin-right":"20px"},type:y(oe).installed?"success":"info"},{default:h((()=>[b(V(y(oe).installed?"\u5df2\u5b89\u88c5":"\u672a\u5b89\u88c5"),1)])),_:1},8,["type"]),g(n,{style:{"margin-right":"20px"}},{default:h((()=>[b("\u7248\u672c: "+V(y(oe).version||"\u672a\u77e5"),1)])),_:1}),g(n,{style:{"margin-right":"20px"},type:y(oe).status?"success":"danger"},{default:h((()=>[b("\u72b6\u6001: "+V(y(oe).status?"\u5df2\u542f\u52a8":"\u672a\u542f\u52a8"),1)])),_:1},8,["type"]),O("div",G,[g(o,{type:"primary",link:"",onClick:l[0]||(l[0]=e=>me("stop")),disabled:!y(oe).installed},{default:h((()=>l[12]||(l[12]=[b("\u505c\u6b62")]))),_:1},8,["disabled"]),g(i,{direction:"vertical"}),g(o,{type:"primary",link:"",onClick:l[1]||(l[1]=e=>me("restart")),disabled:!y(oe).installed},{default:h((()=>[b(V(y(oe).status?"\u91cd\u542f":"\u542f\u52a8"),1)])),_:1},8,["disabled"])]),O("div",J,[g(i,{direction:"vertical"}),g(o,{type:"primary",link:"",onClick:ce,disabled:!y(oe).installed},{default:h((()=>l[13]||(l[13]=[b(V("\u8bbe\u7f6e"))]))),_:1},8,["disabled"])])])])),_:1},8,["style"])],512),O("div",{ref_key:"tableSelect",ref:$},[O("div",Q,[g(H,null,{default:h((()=>[g(c,{xs:24,sm:16,md:16,lg:16,xl:16},{default:h((()=>[g(o,{type:"primary",icon:"plus",onClick:ye},{default:h((()=>l[14]||(l[14]=[b("\u6dfb\u52a0\u5b88\u62a4\u8fdb\u7a0b")]))),_:1}),g(o,{icon:"refresh",circle:"",onClick:fe})])),_:1}),g(c,{xs:24,sm:8,md:8,lg:8,xl:8},{default:h((()=>[O("div",W,[g(C,{modelValue:y(ie).status,"onUpdate:modelValue":l[2]||(l[2]=e=>y(ie).status=e),style:{width:"180px","margin-right":"10px"},filterable:"",clearable:"",onChange:l[3]||(l[3]=e=>fe())},{prefix:h((()=>l[15]||(l[15]=[b("\u72b6\u6001")]))),default:h((()=>[(m(!0),v(R,null,L(y(re),(e=>(m(),_(p,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),g(x,{modelValue:y(ie).search,"onUpdate:modelValue":l[4]||(l[4]=e=>y(ie).search=e),clearable:"",onClear:l[5]||(l[5]=e=>fe()),"suffix-icon":"Search",onKeyup:l[6]||(l[6]=F((e=>fe()),["enter"])),onChange:l[7]||(l[7]=e=>fe()),placeholder:"\u641c\u7d22 \u540d\u79f0"},null,8,["modelValue"])])])),_:1})])),_:1})]),z((m(),_(Ie,{data:y(se),ref_key:"ruyitableRef",ref:P,height:y(U),style:{width:"100%","border-top":"1px solid var(--el-border-color-lighter)"},"header-cell-class-name":"table-header-style"},{default:h((()=>[g(te,{prop:"name",label:"\u540d\u79f0","min-width":"100"}),g(te,{prop:"command",label:"\u542f\u52a8\u547d\u4ee4","min-width":"130","show-overflow-tooltip":""}),g(te,{prop:"path",label:"\u9879\u76ee\u76ee\u5f55","min-width":"80"},{default:h((e=>[O("div",X,[g(Ce,{effect:"dark",content:e.row.path,placement:"bottom"},{default:h((()=>[O("img",{class:"ruyi-fileicons",src:d,onClick:l=>{var n;(n=e.row).path&&(t.fileInfo.currentDir=n.path,a.push({path:"/files"}))}},null,8,Y)])),_:2},1032,["content"])])])),_:1}),y(A)?k("",!0):(m(),_(te,{key:0,prop:"user",label:"\u542f\u52a8\u7528\u6237",width:"90"})),g(te,{prop:"nums",label:"\u8fdb\u7a0b\u6570\u91cf",width:"90"}),g(te,{prop:"status",label:"\u542f\u52a8\u72b6\u6001",width:"130"},{default:h((({row:e})=>[e.status?(m(),_(o,{key:0,link:"",type:"success",icon:"VideoPlay",onClick:l=>ve("stop",e)},{default:h((()=>l[16]||(l[16]=[b(" \u5df2\u542f\u52a8 ")]))),_:2},1032,["onClick"])):(m(),_(o,{key:1,link:"",type:"danger",icon:"VideoPause",onClick:l=>ve("start",e)},{default:h((()=>l[17]||(l[17]=[b(" \u5df2\u505c\u6b62 ")]))),_:2},1032,["onClick"]))])),_:1}),g(te,{prop:"status_name",label:"\u8fdb\u7a0b\u72b6\u6001",width:"130"},{header:h((()=>[O("div",Z,[l[18]||(l[18]=O("div",null,"\u8fdb\u7a0b\u72b6\u6001",-1)),g(Ce,{effect:"dark",content:"RUNNING\uff1a\u8fd0\u884c\u4e2d<br/>FATAL\uff1a\u8fd0\u884c\u5931\u8d25<br/>STARTING\uff1a\u6b63\u5728\u542f\u52a8<br/>STOPED\uff1a\u4efb\u52a1\u5df2\u505c\u6b62","raw-content":!0,placement:"top-start"},{default:h((()=>[g(Oe,{style:{"margin-left":"5px"}},{default:h((()=>[g(xe)])),_:1})])),_:1})])])),default:h((({row:e})=>[""==e.error?(m(),v("span",ee,V(e.status_name),1)):(m(),_(Ce,{key:1,effect:"dark",content:e.error,placement:"top-start"},{default:h((()=>[b(V(e.status_name),1)])),_:2},1032,["content"]))])),_:1}),g(te,{fixed:!y(s)&&"right",label:"\u64cd\u4f5c",width:"240"},{default:h((e=>[g(o,{link:"",type:"primary",onClick:l=>{return a=e.row,ge.value=!0,void j((()=>{he.value.handleOpen(a,"\u7f16\u8f91\u5b88\u62a4\u8fdb\u7a0b")}));var a}},{default:h((()=>l[19]||(l[19]=[b("\u7f16\u8f91")]))),_:2},1032,["onClick"]),g(o,{link:"",type:"primary",onClick:l=>{return a=e.row,je.value=!0,void j((()=>{let e={name:a.name,action:"get_conf"},l={name:a.name,action:"save_conf"};we.value.handleOpen(e,l,"javascript",`\u7f16\u8f91\u3010${a.name}\u3011\u914d\u7f6e`)}));var a}},{default:h((()=>l[20]||(l[20]=[b("\u914d\u7f6e")]))),_:2},1032,["onClick"]),g(o,{link:"",type:"primary",onClick:l=>ve("restart",e.row)},{default:h((()=>l[21]||(l[21]=[b("\u91cd\u542f")]))),_:2},1032,["onClick"]),g(o,{link:"",type:"primary",onClick:l=>{return a=e.row,_e.value=!0,void j((()=>{be.value.handleOpen({name:a.name,action:"get_process_log"},`\u3010${a.name}\u3011\u8fd0\u884c\u65e5\u5fd7`)}));var a}},{default:h((()=>l[22]||(l[22]=[b("\u65e5\u5fd7")]))),_:2},1032,["onClick"]),g(o,{link:"",type:"primary",onClick:l=>{return a=e.row,void E.confirm(`\u786e\u5b9a\u8981\u5220\u9664\u3010${a.name}\u3011\u5417\uff1f`,"\u8b66\u544a",{closeOnClickModal:!1,cancelButtonText:"\u53d6\u6d88",confirmButtonText:"\u786e\u5b9a",type:"warning"}).then((e=>{t.loadingInfo.isLoading=!0,t.loadingInfo.content="\u5220\u9664\u4e2d...",r.sysSupervisormg({name:a.name,action:"del_process"}).then((e=>{t.loadingInfo.isLoading=!1,t.loadingInfo.content="",2e3==e.code?(D.success(e.msg),pe()):D.warning(e.msg)}))})).catch((()=>{}));var a}},{default:h((()=>l[23]||(l[23]=[b("\u5220\u9664")]))),_:2},1032,["onClick"])])),_:1},8,["fixed"])])),_:1},8,["data","height"])),[[Se,y(T)]])],512),y(ge)?(m(),_(q,{key:0,ref_key:"moduleAddFlag",ref:he,onRefreshData:pe,onClosed:l[8]||(l[8]=e=>w(ge)?ge.value=!1:ge=!1)},null,512)):k("",!0),y(oe).installed?k("",!0):(m(),v("div",le)),y(oe).installed?k("",!0):(m(),v("div",ae,[g(Oe,{size:20,color:"var(--el-color-danger)",style:{"margin-right":"10px"}},{default:h((()=>[g(Ve)])),_:1}),l[25]||(l[25]=b(" \u5f53\u524d\u672a\u5b89\u88c5supervisor\u670d\u52a1 ")),g(o,{type:"primary",link:"",style:{"margin-left":"10px","font-size":"15px"},onClick:ke},{default:h((()=>l[24]||(l[24]=[b("\u53bb\u5546\u5e97\u5b89\u88c5")]))),_:1})])),y(ue)?(m(),_(N,{key:3,ref_key:"softInfoFlag",ref:de,onClosed:l[9]||(l[9]=e=>w(ue)?ue.value=!1:ue=!1)},null,512)):k("",!0),y(_e)?(m(),_(B,{key:4,ref_key:"moduleRunLogsRef",ref:be,width:"65%",height:"70vh",apiObj:y(r).sysSupervisormg,onClosed:l[10]||(l[10]=e=>w(_e)?_e.value=!1:_e=!1)},null,8,["apiObj"])):k("",!0),y(je)?(m(),_(K,{key:5,ref_key:"lyFileEditorFlag",ref:we,onRefreshData:pe,apiObj:y(r).sysSupervisormg,saveApiObj:y(r).sysSupervisormg,saveContentKey:"conf",canSave:!0,onClosed:l[11]||(l[11]=e=>w(je)?je.value=!1:je=!1),width:"70%",top:"5vh"},null,8,["apiObj","saveApiObj"])):k("",!0)])}}},[["__scopeId","data-v-ab455a15"]]),ne=U({__name:"index",setup(e){const l=P(),a=i();let t=p("supervisor");c((()=>"windows"==a.sysConfig.currentOs));let n=p(null);function o(e){r({tabs:e.props.name}),s(e.props.name)}function s(e="supervisor"){"supervisor"==e&&j((()=>{n.value.RefreshData()}))}const r=e=>{const l=window.location.href,a=l.indexOf("?"),t=l.indexOf("#");let n;if(-1!==a){let o=l.slice(a+1,-1===t?void 0:t),i=new URLSearchParams(o);Object.keys(e).forEach((l=>{i.set(l,e[l])})),n=l.slice(0,a+1)+i.toString()}else{n=l+`?${new URLSearchParams(e).toString()}`}window.history.replaceState({},"",n)};return C((()=>{const e=l.query.tabs;e&&(t.value=e),s(t.value)})),(e,l)=>{const a=f("el-tab-pane"),i=f("el-tabs"),s=f("el-card"),r=f("el-main");return m(),_(r,{class:"ruyi-safe"},{default:h((()=>[g(s,{shadow:"never"},{default:h((()=>[g(i,{modelValue:y(t),"onUpdate:modelValue":l[0]||(l[0]=e=>w(t)?t.value=e:t=e),onTabClick:o},{default:h((()=>[g(a,{label:"\u8fdb\u7a0b\u5b88\u62a4",name:"supervisor"},{default:h((()=>["supervisor"==y(t)?(m(),_(te,{key:0,ref_key:"supervisorRef",ref:n},null,512)):k("",!0)])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})}}},[["__scopeId","data-v-b351e049"]]);export{ne as default};
