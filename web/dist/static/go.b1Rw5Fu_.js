import{_ as e,d as a,A as s}from"./index.9wSm1W-X.js";import{E as t,a as o}from"./element-plus.C3E-FvSa.js";import{r as n,k as l,h as i,ag as r,G as u,o as d,H as p,P as m,a as v,M as c,u as f,L as g,c as _,O as j,a6 as y,J as w,t as b}from"./@vue.CQt2tj-6.js";import"./axios.BhTbhqQQ.js";import"./crypto-js.BjUPrIIl.js";import"./@xterm.C7qPmoRH.js";import"./js-cookie.Ch5AnFJE.js";import"./vue-clipboard3.c61pm64N.js";import"./clipboard.BBhAuw9K.js";import"./pinia.CWB7oRTw.js";import"./@element-plus.CU4brdXH.js";import"./vue-router.BmPBvlxi.js";import"./nprogress.Dzr5m2b3.js";import"./pinia-plugin-persistedstate.DTf8V5gU.js";import"./destr.ZpApkS-1.js";import"./deep-pick-omit.DP_A4OSP.js";import"./lodash-es.CUM784Py.js";import"./@vueuse.7zPzjEtO.js";import"./@popperjs.DxP-MrnL.js";import"./@ctrl.D-8vaqgC.js";import"./dayjs.BpgH7LzR.js";import"./async-validator.BTKOuuO-.js";import"./memoize-one.Ds0C_khL.js";import"./normalize-wheel-es.BhHBPXsK.js";import"./@floating-ui.D1oRyyfp.js";const x={class:"lyflex",style:{"margin-bottom":"15px","margin-top":"5px"}},h={class:"lyflex",style:{"margin-bottom":"15px"}},k={class:"versions"},I={class:"versions-select"},V=e({__name:"go",props:{data:{type:Object}},emits:["refreshStatus"],setup(e,{emit:V}){const G=a(),L=e;let M=n({id:null,name:"",status:!1,version:"",new_version:"",is_default:!1}),T=n("version"),C=n([]),E=l((()=>{let e="";return C.value.forEach((a=>{a.is_default&&(e=a.version)})),e}));function O(){G.loadingInfo.isLoading=!0,G.loadingInfo.content="\u52a0\u8f7d\u4e2d...",s.sysGetGolangMg({action:"list_version"}).then((e=>{G.loadingInfo.isLoading=!1,G.loadingInfo.content="",2e3==e.code?C.value=e.data:t.warning(e.msg)}))}function z(e){"version"==e.props.name&&O()}return i((()=>{M.value.id=L.data.id,M.value.name=L.data.name,M.value.status=L.data.status,M.value.version=L.data.version,M.value.is_default=L.data.is_default,M.value.new_version=M.value.version,O()})),(e,a)=>{const n=r("el-tag"),l=r("el-option"),i=r("el-select"),V=r("el-button"),L=r("el-tab-pane"),O=r("el-tabs");return d(),u(O,{"tab-position":"left",modelValue:f(T),"onUpdate:modelValue":a[2]||(a[2]=e=>b(T)?T.value=e:T=e),onTabClick:z},{default:p((()=>[m(L,{label:"\u7248\u672c\u7ba1\u7406",name:"version"},{default:p((()=>[v("div",x,[v("span",null,"\u5f53\u524d\u7248\u672c\uff1ago"+c(f(M).version),1),m(n,{style:{"margin-left":"5px"},type:f(M).is_default?"success":"danger"},{default:p((()=>[g(c(f(M).is_default?"\u9ed8\u8ba4\u7248\u672c":"\u975e\u9ed8\u8ba4\u7248\u672c"),1)])),_:1},8,["type"])]),v("div",h,[v("span",null,"\u9ed8\u8ba4\u7248\u672c\uff1ago"+c(f(E)),1)]),v("div",k,[a[5]||(a[5]=v("span",null,"\u5df2\u5b89\u88c5Go\u7248\u672c\uff1a",-1)),m(i,{modelValue:f(M).new_version,"onUpdate:modelValue":a[0]||(a[0]=e=>f(M).new_version=e),placeholder:"\u8bf7\u9009\u62e9",style:{width:"160px"},filterable:"",disabled:"edit"==e.actionType},{default:p((()=>[(d(!0),_(j,null,y(f(C),(e=>(d(),u(l,{key:e.version,label:e.version,value:e.version},{default:p((()=>[v("div",I,[v("div",null,c(e.version),1),e.is_default?(d(),u(n,{key:0,type:"success",style:{"margin-left":"10px"}},{default:p((()=>a[3]||(a[3]=[g("\u9ed8\u8ba4\u7248\u672c")]))),_:1})):w("",!0)])])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue","disabled"]),m(V,{style:{"margin-left":"15px"},type:"primary",onClick:a[1]||(a[1]=e=>{""!=M.value.new_version&&null!=M.value.new_version&&null!=M.value.new_version?o.confirm(`\u786e\u8ba4\u8981\u8bbe\u7f6e[${M.value.new_version}]\u7248\u672c\u4e3a\u9ed8\u8ba4\u5417\uff1f`,"\u8b66\u544a",{closeOnClickModal:!1,cancelButtonText:"\u53d6\u6d88",confirmButtonText:"\u786e\u5b9a",type:"warning"}).then((e=>{G.loadingInfo.content="\u8bbe\u7f6e\u4e2d...",G.loadingInfo.isLoading=!0,s.sysGolangMg({version:M.value.new_version,action:"set_default"}).then((e=>{G.loadingInfo.isLoading=!1,G.loadingInfo.content="",2e3==e.code?(t.success(e.msg),M.value.new_version==M.value.version?M.value.is_default=!0:M.value.is_default=!1,C.value.forEach((e=>{e.version==M.value.new_version?e.is_default=!0:e.is_default=!1}))):t.warning(e.msg)}))})).catch((()=>{})):t.warning("\u7248\u672c\u4e0d\u80fd\u4e3a\u7a7a")})},{default:p((()=>a[4]||(a[4]=[g("\u8bbe\u4e3a\u9ed8\u8ba4")]))),_:1})])])),_:1})])),_:1},8,["modelValue"])}}},[["__scopeId","data-v-5d27830d"]]);export{V as default};
