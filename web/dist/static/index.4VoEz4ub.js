var e=Object.defineProperty,l=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,o=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,n=(e,n)=>{for(var i in n||(n={}))a.call(n,i)&&o(e,i,n[i]);if(l)for(var i of l(n))t.call(n,i)&&o(e,i,n[i]);return e};import{r as i,ag as r,c as d,o as s,P as u,H as p,u as m,G as c,J as f,a as g,O as v,a6 as b,L as h,t as y,k as w,h as _,aq as j,I as V,a4 as k,M as x,n as I}from"./@vue.CQt2tj-6.js";import{P as C}from"./Pagination.Nl1ehftE.js";import{_ as O,v as P,w as U,A as D,M,j as L,d as q,u as A,p as N}from"./index.9wSm1W-X.js";import{L as B}from"./dialog.sg3oaGqx.js";import{a as R,E as T}from"./element-plus.C3E-FvSa.js";import"./axios.BhTbhqQQ.js";import"./crypto-js.BjUPrIIl.js";import"./@xterm.C7qPmoRH.js";import"./js-cookie.Ch5AnFJE.js";import"./vue-clipboard3.c61pm64N.js";import"./clipboard.BBhAuw9K.js";import"./pinia.CWB7oRTw.js";import"./@element-plus.CU4brdXH.js";import"./vue-router.BmPBvlxi.js";import"./nprogress.Dzr5m2b3.js";import"./pinia-plugin-persistedstate.DTf8V5gU.js";import"./destr.ZpApkS-1.js";import"./deep-pick-omit.DP_A4OSP.js";import"./lodash-es.CUM784Py.js";import"./@vueuse.7zPzjEtO.js";import"./@popperjs.DxP-MrnL.js";import"./@ctrl.D-8vaqgC.js";import"./dayjs.BpgH7LzR.js";import"./async-validator.BTKOuuO-.js";import"./memoize-one.Ds0C_khL.js";import"./normalize-wheel-es.BhHBPXsK.js";import"./@floating-ui.D1oRyyfp.js";const z={style:{display:"flex","align-items":"center",width:"100%"}},F={style:{width:"150px","padding-left":"20px"}},E=O({__name:"moduleAdd",emits:["refreshData","closed"],setup(e,{expose:l,emit:a}){const t=a;let o=i(!1),w=i(!1),_=i("\u6dfb\u52a0\u7f51\u7ad9"),j=i({name:"",advanced:!1,driver:"bridge",enIpv4:!1,subnet:"",gateway:"",iprange:"",labels:""}),V=i([{id:"bridge",name:"bridge -- \u6865\u63a5\u6a21\u5f0f-\u591a\u5bb9\u5668\u4e92\u76f8\u901a\u4fe1"},{id:"macvlan",name:"macvlan -- \u62e5\u6709\u72ec\u7acbmac"},{id:"ipvlan",name:"ipvlan -- \u62e5\u6709\u72ec\u7acbip"},{id:"overlay",name:"overlay -- \u8de8\u4e3b\u673a\u5bb9\u5668\u901a\u4fe1\u7f51\u7edcVXLAN"}]),k=i([{required:!0,validator:P,trigger:"blur"}]),x=i({name:[{required:!0,message:"\u8bf7\u8f93\u5165\u7f51\u7edc\u540d\u79f0",trigger:"blur"}],gateway:[{required:!1,validator:U,trigger:"blur"}],iprange:[{required:!1,validator:P,trigger:"blur"}]});function I(){t("closed")}let C=i(null);function O(){C.value.validate((e=>{if(e){w.value=!0;let e=n({},j.value);e.action="add",D.DockerNetworksMg(e).then((e=>{w.value=!1,2e3==e.code?(M(e.msg),I(),t("refreshData")):L(e.msg)}))}}))}return l({handleOpen:function(e,l){_.value=l,o.value=!0}}),(e,l)=>{const a=r("el-input"),t=r("el-checkbox"),n=r("el-form-item"),i=r("el-option"),P=r("el-select"),U=r("el-switch"),D=r("el-col"),M=r("el-row"),L=r("el-form"),q=r("el-button");return s(),d("div",null,[u(B,{modelValue:m(o),"onUpdate:modelValue":l[8]||(l[8]=e=>y(o)?o.value=e:o=e),title:m(_),width:"680px","before-close":I},{footer:p((()=>[u(q,{onClick:I,loading:m(w)},{default:p((()=>l[9]||(l[9]=[h("\u53d6\u6d88")]))),_:1},8,["loading"]),u(q,{type:"primary",onClick:O,loading:m(w)},{default:p((()=>l[10]||(l[10]=[h("\u4fdd\u5b58")]))),_:1},8,["loading"])])),default:p((()=>[u(L,{inline:!1,model:m(j),rules:m(x),ref_key:"rulesForm",ref:C,"label-position":"right","label-width":"auto"},{default:p((()=>[u(n,{label:"\u7f51\u7edc\u540d\u79f0\uff1a",prop:"name"},{default:p((()=>[g("div",z,[u(a,{clearable:"",placeholder:"\u7f51\u7edc\u540d\u79f0\u6807\u5fd7",modelValue:m(j).name,"onUpdate:modelValue":l[0]||(l[0]=e=>m(j).name=e),modelModifiers:{trim:!0}},null,8,["modelValue"]),g("div",F,[u(t,{modelValue:m(j).advanced,"onUpdate:modelValue":l[1]||(l[1]=e=>m(j).advanced=e),label:"\u66f4\u591a\u914d\u7f6e"},null,8,["modelValue"])])])])),_:1}),m(j).advanced?(s(),c(n,{key:0,label:"\u7f51\u7edc\u6a21\u5f0f\uff1a",prop:"driver"},{default:p((()=>[u(P,{modelValue:m(j).driver,"onUpdate:modelValue":l[2]||(l[2]=e=>m(j).driver=e),placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"},clearable:"",filterable:""},{default:p((()=>[(s(!0),d(v,null,b(m(V),(e=>(s(),c(i,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})):f("",!0),m(j).advanced?(s(),c(n,{key:1,label:"IPV4\uff1a",prop:"enIpv4"},{default:p((()=>[u(U,{modelValue:m(j).enIpv4,"onUpdate:modelValue":l[3]||(l[3]=e=>m(j).enIpv4=e)},null,8,["modelValue"])])),_:1})):f("",!0),m(j).advanced&&m(j).enIpv4?(s(),c(n,{key:2,label:" "},{default:p((()=>[u(M,{gutter:20},{default:p((()=>[u(D,{span:12},{default:p((()=>[u(n,{label:"\u5b50\u7f51(\u5fc5\u586b)",prop:"subnet","label-position":"top",rules:m(j).enIpv4?m(k):[]},{default:p((()=>[u(a,{modelValue:m(j).subnet,"onUpdate:modelValue":l[4]||(l[4]=e=>m(j).subnet=e),placeholder:"192.168.18.0/24"},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1}),u(D,{span:12},{default:p((()=>[u(n,{label:"\u7f51\u5173(\u975e\u5fc5\u586b)","label-position":"top",prop:"gateway"},{default:p((()=>[u(a,{modelValue:m(j).gateway,"onUpdate:modelValue":l[5]||(l[5]=e=>m(j).gateway=e),placeholder:"192.168.18.1"},null,8,["modelValue"])])),_:1})])),_:1}),u(D,{span:24,style:{"margin-top":"10px"}},{default:p((()=>[u(n,{label:"IP\u8303\u56f4(\u975e\u5fc5\u586b)","label-position":"top",prop:"iprange"},{default:p((()=>[u(a,{modelValue:m(j).iprange,"onUpdate:modelValue":l[6]||(l[6]=e=>m(j).iprange=e),placeholder:"\u5b50\u7f51\u7684\u5b50\u96c6\u5982\uff1a192.168.18.2/25"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1})):f("",!0),m(j).advanced?(s(),c(n,{key:3,label:"\u6807\u7b7e\uff1a",prop:"labels"},{default:p((()=>[u(a,{modelValue:m(j).labels,"onUpdate:modelValue":l[7]||(l[7]=e=>m(j).labels=e),type:"textarea",autosize:{minRows:3,maxRows:5},placeholder:"\u4e00\u884c\u4e00\u4e2a\nkey1=value1\nkey2=value2"},null,8,["modelValue"])])),_:1})):f("",!0)])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}},[["__scopeId","data-v-edd99844"]]),G={class:"handle-top"},S={class:"search-sites-input"},H=O({__name:"index",setup(e,{expose:l}){const a=q(),t=A();let o=w((()=>t.ismobile)),O=i(!1),P=i(null),U=i(!1),M=i({page:1,limit:10}),L=i({page:1,limit:10,total:0}),B=i([]);function z(e){M.value.page=e.page,M.value.limit=e.limit,F()}function F(){O.value=!0;let e=n({},M.value);D.GetDockerNetworks(e).then((e=>{O.value=!1,2e3===e.code&&(B.value=e.data.data,L.value.page=e.data.page,L.value.limit=e.data.limit,L.value.total=e.data.total)}))}function H(){M.value.page=1,F()}function J(){U.value=!0,I((()=>{P.value.handleOpen(null,"\u6dfb\u52a0\u7f51\u7edc")}))}function K(){R.confirm("\u786e\u5b9a\u8981\u6e05\u7406\u6ca1\u6709\u4f7f\u7528\u7684\u7f51\u7edc\u5417\uff1f\u5220\u9664\u540e\u65e0\u6cd5\u6062\u590d\uff01\uff01\uff01","\u8b66\u544a",{closeOnClickModal:!1,cancelButtonText:"\u53d6\u6d88",confirmButtonText:"\u786e\u5b9a",type:"warning"}).then((e=>{a.loadingInfo.isLoading=!0,a.loadingInfo.content="\u6e05\u7406\u4e2d...",D.DockerNetworksMg({action:"prune"}).then((e=>{a.loadingInfo.isLoading=!1,a.loadingInfo.content="",2e3==e.code?(T.success(e.msg),H()):T.warning(e.msg)}))})).catch((()=>{}))}return l({RefreshData:function(){I((()=>{F()}))}}),_((()=>{F()})),(e,l)=>{const t=r("el-button"),n=r("el-col"),i=r("el-input"),w=r("el-row"),_=r("el-table-column"),I=r("el-tag"),q=r("el-table"),A=j("loading");return s(),d("div",null,[g("div",G,[u(w,null,{default:p((()=>[u(n,{xs:24,sm:16,md:16,lg:16,xl:16},{default:p((()=>[u(t,{type:"primary",onClick:J,icon:"plus"},{default:p((()=>l[5]||(l[5]=[h("\u6dfb\u52a0\u7f51\u7edc")]))),_:1}),u(t,{type:"danger",onClick:K,icon:"delete",plain:""},{default:p((()=>l[6]||(l[6]=[h("\u6e05\u7406\u7f51\u7edc")]))),_:1}),u(t,{icon:"refresh",circle:"",onClick:H,style:{"margin-left":"10px"}})])),_:1}),u(n,{xs:24,sm:8,md:8,lg:8,xl:8},{default:p((()=>[g("div",S,[u(i,{modelValue:m(M).search,"onUpdate:modelValue":l[0]||(l[0]=e=>m(M).search=e),clearable:"",onClear:l[1]||(l[1]=e=>H()),"suffix-icon":"Search",onKeyup:l[2]||(l[2]=k((e=>H()),["enter"])),onChange:l[3]||(l[3]=e=>H()),placeholder:"\u641c\u7d22"},null,8,["modelValue"])])])),_:1})])),_:1})]),V((s(),c(q,{data:m(B),style:{width:"100%","border-top":"1px solid var(--el-border-color-lighter)"},"header-cell-class-name":"table-header-style"},{default:p((()=>[u(_,{prop:"name",label:"\u540d\u79f0","min-width":"130","show-overflow-tooltip":""}),u(_,{prop:"system",label:"\u7cfb\u7edf\u81ea\u5e26",width:"130"},{default:p((({row:e})=>[u(I,{type:e.system?"primary":"info"},{default:p((()=>[h(x(e.system?"\u662f":"\u5426"),1)])),_:2},1032,["type"])])),_:1}),u(_,{prop:"driver",label:"\u6a21\u5f0f","min-width":"130"}),u(_,{prop:"subnet",label:"IPV4\u5b50\u7f51","min-width":"150"}),u(_,{prop:"gateway",label:"IPV4\u7f51\u5173","min-width":"150"}),u(_,{prop:"labels",label:"\u6807\u7b7e","min-width":"130"},{default:p((({row:e})=>[(s(!0),d(v,null,b(e.labels,((e,l)=>(s(),d("div",null,[u(I,{type:"info"},{default:p((()=>[h(x(l+"="+e),1)])),_:2},1024)])))),256))])),_:1}),u(_,{prop:"created",label:"\u521b\u5efa\u65f6\u95f4","min-width":"170"},{default:p((e=>[g("span",null,x(m(N)(e.row.created)),1)])),_:1}),u(_,{fixed:!m(o)&&"right",label:"\u64cd\u4f5c",width:"130"},{default:p((e=>[u(t,{link:"",type:"primary",onClick:l=>{return t=e.row,void R.confirm(`\u786e\u5b9a\u8981\u5220\u9664\u3010${t.name}\u3011\u7f51\u7edc\u5417\uff1f`,"\u8b66\u544a",{closeOnClickModal:!1,cancelButtonText:"\u53d6\u6d88",confirmButtonText:"\u786e\u5b9a",type:"warning"}).then((e=>{a.loadingInfo.isLoading=!0,a.loadingInfo.content="\u5220\u9664\u4e2d...",D.DockerNetworksMg({id:t.id,name:t.name,action:"delete"}).then((e=>{a.loadingInfo.isLoading=!1,a.loadingInfo.content="",2e3==e.code?(T.success(e.msg),F()):T.warning(e.msg)}))})).catch((()=>{}));var t}},{default:p((()=>l[7]||(l[7]=[h("\u5220\u9664")]))),_:2},1032,["onClick"])])),_:1},8,["fixed"])])),_:1},8,["data"])),[[A,m(O)]]),u(C,{small:!0,"child-msg":m(L),onCallFather:z,border:!1,position:"right"},null,8,["child-msg"]),m(U)?(s(),c(E,{key:0,ref_key:"moduleAddFlag",ref:P,onRefreshData:F,onClosed:l[4]||(l[4]=e=>y(U)?U.value=!1:U=!1)},null,512)):f("",!0)])}}},[["__scopeId","data-v-532347bc"]]);export{H as default};
