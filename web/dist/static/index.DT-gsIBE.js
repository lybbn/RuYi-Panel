var e=Object.defineProperty,l=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,n=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,o=(e,o)=>{for(var s in o||(o={}))a.call(o,s)&&n(e,s,o[s]);if(l)for(var s of l(o))t.call(o,s)&&n(e,s,o[s]);return e};import{b as s,ag as u,o as i,c as r,P as d,H as c,u as m,L as p,G as f,K as v,t as y,e as h,j as g,W as b,aq as k,a as _,C,I as x,M as V,V as w,D as j,O as T,a4 as E,a5 as U,Q as z,T as O,n as D}from"./@vue.BluSRtaz.js";import{o as L,i as S,A as q,t as F,h as I}from"./index.CzVJI0jJ.js";import{l as R}from"./index.CbYLVtrU.js";import{L as W}from"./dialog.BvK2-1BY.js";import{E as B,a as P}from"./element-plus.CMBwCou9.js";import{_ as A}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./axios.3Xbkft1r.js";import"./crypto-js.CCePG2on.js";import"./@xterm.8vZnc5Va.js";import"./js-cookie.Ch5AnFJE.js";import"./vue-clipboard3.CjTOZN0C.js";import"./clipboard.55ERAcYO.js";import"./pinia.DhJalR8o.js";import"./@element-plus.sBVz1STF.js";import"./vue-router.CjawWhbh.js";import"./nprogress.B5M_jmCc.js";import"./pinia-plugin-persistedstate.DTf8V5gU.js";import"./destr.ZpApkS-1.js";import"./deep-pick-omit.DP_A4OSP.js";import"./lodash-es.BccSst5e.js";import"./@vueuse.l0Dx-5Bl.js";import"./@popperjs.CpAfbxx4.js";import"./@ctrl.D-8vaqgC.js";import"./dayjs.9DdhAVak.js";import"./async-validator.Cuo4gI4y.js";import"./memoize-one.Ds0C_khL.js";import"./normalize-wheel-es.CUoAWVRo.js";import"./@floating-ui.yzr8CaSr.js";const M={__name:"moduleServer",emits:["refreshData","closed","refreshConnect"],setup(e,{expose:l,emit:a}){const t=a;let n=s(!1),h=s(!1),g=s(""),b=s({username:"root",port:22,host:"",type:"0",remark:"",password:"",pkey_passwd:"",pkey:""}),k=s({host:[{required:!0,validator:L,trigger:"blur"}],port:[{required:!0,message:"\u8bf7\u8f93\u5165\u7aef\u53e3\u53f7",trigger:"blur"}],username:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",trigger:"blur"}]});function _(){t("closed")}let C=s(null);function x(e=!1){C.value.validate((l=>{if(l){h.value=!0;let l=o({},b.value);if("1"===l.type&&""==l.pkey)return h.value=!1,void B.warning("\u79d8\u94a5\u4e0d\u80fd\u4e3a\u7a7a");b.value.id?q.sysTerminalEdit(l).then((l=>{h.value=!1,2e3==l.code?(B.success(l.msg),_(),e?t("refreshConnect",l.data.id,l.data.host):t("refreshData")):B.warning(l.msg)})):q.sysTerminalAdd(l).then((l=>{h.value=!1,2e3==l.code?(B.success(l.msg),_(),e?t("refreshConnect",l.data.id,l.data.host):t("refreshData")):B.warning(l.msg)}))}}))}return l({handleOpen:function(e,l){g.value=l,n.value=!0,e&&(b.value=S(e))}}),(e,l)=>{const a=u("el-input"),t=u("el-form-item"),o=u("el-input-number"),s=u("el-radio-button"),V=u("el-radio-group"),w=u("el-form"),j=u("el-button");return i(),r("div",null,[d(W,{modelValue:m(n),"onUpdate:modelValue":l[10]||(l[10]=e=>y(n)?n.value=e:n=e),title:m(g),width:"560px","before-close":_,showFullScreen:!1},{footer:c((()=>[d(j,{onClick:_,loading:m(h)},{default:c((()=>l[13]||(l[13]=[p("\u53d6\u6d88")]))),_:1},8,["loading"]),d(j,{type:"primary",onClick:l[8]||(l[8]=e=>x(!1)),loading:m(h)},{default:c((()=>l[14]||(l[14]=[p("\u4fdd\u5b58")]))),_:1},8,["loading"]),d(j,{type:"primary",onClick:l[9]||(l[9]=e=>x(!0)),loading:m(h)},{default:c((()=>l[15]||(l[15]=[p("\u4fdd\u5b58\u5e76\u8fde\u63a5")]))),_:1},8,["loading"])])),default:c((()=>[d(w,{inline:!1,model:m(b),rules:m(k),ref_key:"rulesForm",ref:C,"label-position":"right","label-width":"auto"},{default:c((()=>[d(t,{label:"\u670d\u52a1\u5668IP\uff1a",prop:"host"},{default:c((()=>[d(a,{modelValue:m(b).host,"onUpdate:modelValue":l[0]||(l[0]=e=>m(b).host=e),clearable:""},null,8,["modelValue"])])),_:1}),d(t,{label:"\u7aef\u53e3\u53f7\uff1a",prop:"port"},{default:c((()=>[d(o,{modelValue:m(b).port,"onUpdate:modelValue":l[1]||(l[1]=e=>m(b).port=e),min:1,max:65536,style:{width:"100%"}},null,8,["modelValue"])])),_:1}),d(t,{label:"\u7528\u6237\u540d\uff1a",prop:"username"},{default:c((()=>[d(a,{modelValue:m(b).username,"onUpdate:modelValue":l[2]||(l[2]=e=>m(b).username=e),clearable:""},null,8,["modelValue"])])),_:1}),d(t,{label:"\u9a8c\u8bc1\u65b9\u5f0f\uff1a",prop:"type",class:"is-required"},{default:c((()=>[d(V,{modelValue:m(b).type,"onUpdate:modelValue":l[3]||(l[3]=e=>m(b).type=e)},{default:c((()=>[d(s,{value:"0"},{default:c((()=>l[11]||(l[11]=[p("\u5bc6\u7801\u9a8c\u8bc1")]))),_:1}),d(s,{value:"1"},{default:c((()=>l[12]||(l[12]=[p("\u79c1\u94a5\u9a8c\u8bc1")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),"0"==m(b).type?(i(),f(t,{key:0,label:"\u5bc6\u7801\uff1a",prop:"password",class:"is-required"},{default:c((()=>[d(a,{modelValue:m(b).password,"onUpdate:modelValue":l[4]||(l[4]=e=>m(b).password=e),"show-password":!0,clearable:""},null,8,["modelValue"])])),_:1})):v("",!0),"1"==m(b).type?(i(),f(t,{key:1,label:"\u79c1\u94a5\uff1a",prop:"pkey",class:"is-required"},{default:c((()=>[d(a,{modelValue:m(b).pkey,"onUpdate:modelValue":l[5]||(l[5]=e=>m(b).pkey=e),type:"textarea",rows:2,clearable:""},null,8,["modelValue"])])),_:1})):v("",!0),"1"==m(b).type?(i(),f(t,{key:2,label:"\u79c1\u94a5\u5bc6\u7801\uff1a",prop:"pkey_passwd"},{default:c((()=>[d(a,{modelValue:m(b).pkey_passwd,"onUpdate:modelValue":l[6]||(l[6]=e=>m(b).pkey_passwd=e),clearable:""},null,8,["modelValue"])])),_:1})):v("",!0),d(t,{label:"\u5907\u6ce8\uff1a",prop:"remark"},{default:c((()=>[d(a,{modelValue:m(b).remark,"onUpdate:modelValue":l[7]||(l[7]=e=>m(b).remark=e),type:"textarea",rows:2},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}},N={__name:"moduleCommonCommand",emits:["refreshData","closed","refreshConnect"],setup(e,{expose:l,emit:a}){const t=a;let n=s(!1),f=s(!1),v=s(""),h=s({username:"",port:22,host:"",type:"0",remark:"",password:"",pkey_passwd:"",pkey:""}),g=s({name:[{required:!0,message:"\u8bf7\u8f93\u5165\u547d\u4ee4\u540d\u79f0",trigger:"blur"}],shell:[{required:!0,message:"\u8bf7\u8f93\u5165\u5e38\u7528\u547d\u4ee4",trigger:"blur"}]});function b(){t("closed")}let k=s(null);function _(){k.value.validate((e=>{if(e){f.value=!0;let e=o({},h.value);h.value.id?q.sysCommonCommandEdit(e).then((e=>{f.value=!1,2e3==e.code?(B.success(e.msg),b(),t("refreshData")):B.warning(e.msg)})):q.sysCommonCommandAdd(e).then((e=>{f.value=!1,2e3==e.code?(B.success(e.msg),b(),t("refreshData")):B.warning(e.msg)}))}}))}return l({handleOpen:function(e,l){v.value=l,n.value=!0,e&&(h.value=S(e))}}),(e,l)=>{const a=u("el-input"),t=u("el-form-item"),o=u("el-form"),s=u("el-button");return i(),r("div",null,[d(W,{modelValue:m(n),"onUpdate:modelValue":l[2]||(l[2]=e=>y(n)?n.value=e:n=e),title:m(v),width:"560px","before-close":b,showFullScreen:!1},{footer:c((()=>[d(s,{onClick:b,loading:m(f)},{default:c((()=>l[3]||(l[3]=[p("\u53d6\u6d88")]))),_:1},8,["loading"]),d(s,{type:"primary",onClick:_,loading:m(f)},{default:c((()=>l[4]||(l[4]=[p("\u4fdd\u5b58")]))),_:1},8,["loading"])])),default:c((()=>[d(o,{inline:!1,model:m(h),rules:m(g),ref_key:"rulesForm",ref:k,"label-position":"right","label-width":"auto"},{default:c((()=>[d(t,{label:"\u547d\u4ee4\u540d\u79f0\uff1a",prop:"name"},{default:c((()=>[d(a,{modelValue:m(h).name,"onUpdate:modelValue":l[0]||(l[0]=e=>m(h).name=e),clearable:""},null,8,["modelValue"])])),_:1}),d(t,{label:"\u5e38\u7528\u547d\u4ee4\uff1a",prop:"shell"},{default:c((()=>[d(a,{modelValue:m(h).shell,"onUpdate:modelValue":l[1]||(l[1]=e=>m(h).shell=e),type:"textarea",autosize:{minRows:4,maxRows:8}},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}},$={class:"lyterminal-container-left"},X={class:"common-head"},K={class:"custom-tree-node"},Y={class:"label"},Q={class:"do"},G={key:0,class:"commoncmd-list"},H={class:"common-head"},J={class:"custom-tree-node"},Z={class:"label"},ee={class:"do"},le={class:"lyterminal-container-right"},ae={class:"ruyi-tabs-label"},te={class:"select-command"},ne={key:3,class:"emptyTips"},oe=A({__name:"index",setup(e){let l=s(!1),a=s(!1),t=s(""),n=s(""),o=s("serverList"),L=s(""),S=s([]),W=s(0),A=s(!0),oe=s(null),se=s(!1),ue=s(null),ie=s(""),re=s(""),de=s({label:"host"}),ce=s({label:"name"}),me=s([]),pe=s(!1),fe=s(0),ve=s(0),ye=s(-1);function he(){pe.value=!1}function ge(e){D((()=>{we.value[je(e)].handleXtermResize()}))}function be(e,l){if("add"!==l&&"remove"===l){we.value[je(e)].onClose();const l=S.value;let a=L.value;a===e&&l.forEach(((t,n)=>{if(t.index===e){const e=l[n+1]||l[n-1];e&&(a=e.index)}})),L.value=a,S.value=l.filter((l=>l.index!==e))}}function ke(){if(ye.value>=0)for(let e=0;e<S.value.length;e++)if(S.value[e].index==ye.value){Me({id:S.value[e].id,host:S.value[e].title}),he();break}}function _e(e){if(ye.value>=0)if("all"===e){for(const e in we.value)we.value[e].onClose();L.value="",S.value=[],we.value={}}else if("other"===e){for(const l in we.value)je(ye.value)!==l&&we.value[l].onClose();const e=S.value;L.value=ye.value,S.value=e.filter((e=>e.index===ye.value))}else be(ye.value,"remove");he()}function Ce(e){const l=document.querySelector(".contextmenu"),a=!!l&&l.contains(e.target),t=e.target.classList.contains("contextmenu");a||t||he()}let xe=s(!1),Ve=s(!1),we=s({});const je=e=>`lyxterm-${e}`;function Te(){A.value=!A.value,setTimeout((()=>{window.dispatchEvent(new Event("resize"))}),600)}function Ee(e){"commonCmd"===e.props.name?(Le.value=[],Fe()):"serverList"===e.props.name&&(me.value=[],Oe())}let Ue=s(null);function ze(){xe.value=!0,D((()=>{Ue.value.handleOpen(null,"\u6dfb\u52a0\u670d\u52a1\u5668")}))}function Oe(){se.value=!0,q.sysTerminal({page:1,limit:999}).then((e=>{se.value=!1,2e3===e.code&&(me.value=e.data.data)}))}let De=s(!1),Le=s([]),Se=s(null),qe=s(null);function Fe(){De.value=!0,q.sysCommonCommand({page:1,limit:999}).then((e=>{De.value=!1,2e3===e.code&&(Le.value=e.data.data)}))}function Ie(e,l){"add"===l?(Ve.value=!0,D((()=>{Se.value.handleOpen(null,"\u6dfb\u52a0\u5e38\u7528\u547d\u4ee4")}))):"edit"===l?(Ve.value=!0,D((()=>{Se.value.handleOpen(e,"\u7f16\u8f91\u5e38\u7528\u547d\u4ee4")}))):"del"===l&&P.confirm(`\u786e\u5b9a\u5220\u9664 ${e.name} \u9879\u5417\uff1f`,"\u63d0\u793a",{type:"warning",confirmButtonText:"\u786e\u5b9a",cancelButtonText:"\u53d6\u6d88"}).then((()=>{De.value=!0,q.sysCommonCommandDelete({id:e.id}).then((l=>{if(De.value=!1,2e3==l.code){var a=qe.value.getCurrentKey();qe.value.remove(e.id),a==e.id&&(Fe(),B.success("\u5220\u9664\u6210\u529f"))}else P.alert(l.msg,"\u63d0\u793a",{type:"error"})}))})).catch((()=>{}))}function Re(e,l){return!e||-1!==(l.host+l.value).indexOf(e)}function We(e,l){return!e||-1!==(l.name+l.value).indexOf(e)}function Be(e){Me(e)}function Pe(e){if("addNewTabs"===e)return ze(),!1}function Ae(){S.value.length>0&&S.value.forEach((e=>{let l=we.value[je(e.index)];l&&(e.status=l.isWebSocketOpen()?"online":"closed",e.delayTime=l.getDelay()||0)}))}function Me(e){const l=e.id,a=e.host;S.value.push({id:l,index:W.value,title:a,status:"online",delayTime:0}),L.value=W.value,D((()=>{we.value[je(L.value)].init("api/webssh/",`id=${l}`,"","")})),Ae(),W.value++,Le.value.length<1&&Fe()}function Ne(e,l){let a={id:e,host:l};Oe(),Me(a)}function $e(e){if(""!==e&&we.value)if(a.value){for(const e in we.value)we.value[e].sendMsg(t.value+"\n");t.value=""}else we.value[je(L.value)]&&we.value[je(L.value)].sendMsg(t.value+"\n"),t.value=""}function Xe(){if(""!==n.value&&we.value)if(a.value){for(const e in we.value)we.value[e].sendMsg(n.value+"\n");n.value=""}else we.value[je(L.value)]&&we.value[je(L.value)].sendMsg(n.value+"\n"),n.value=""}let Ke=s(null);function Ye(){F(Ke.value),l.value=!0}function Qe(){I(),l.value=!1}function Ge(){l.value=!!(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)}return h((()=>ie.value),(e=>{ue.value.filter(e)}),{deep:!0}),h((()=>re.value),(e=>{qe.value.filter(e)}),{deep:!0}),g((()=>{Oe(),oe.value=setInterval((()=>{Ae()}),5e3),document.addEventListener("click",Ce),document.addEventListener("fullscreenchange",Ge)})),b((()=>{document.removeEventListener("click",Ce),document.removeEventListener("fullscreenchange",Ge),clearInterval(oe.value),oe.value=null,S.value.length>0&&S.value.forEach((e=>{e.delayTime=we.value[je(e.index)].onClose()}))})),(e,s)=>{const h=u("ArrowLeftBold"),g=u("ArrowRightBold"),b=u("el-icon"),F=u("el-button"),I=u("el-input"),W=u("el-empty"),oe=u("el-tooltip"),Ce=u("el-button-group"),De=u("el-tree"),Ge=u("el-main"),He=u("el-container"),Je=u("el-tab-pane"),Ze=u("el-tabs"),el=u("FullScreen"),ll=u("Minus"),al=u("circleCheck"),tl=u("el-option"),nl=u("el-select"),ol=u("el-checkbox"),sl=u("Plus"),ul=u("CopyDocument"),il=u("CircleClose"),rl=u("Delete"),dl=u("CircleCloseFilled"),cl=u("Close"),ml=k("loading");return i(),r("div",{class:"lyterminal-container",ref_key:"ruyiTerminal",ref:Ke},[_("div",$,[_("div",{class:C(["lyterminal-hide-action",{active:!m(A)}]),onClick:Te},[d(b,{style:{"vertical-align":"middle"}},{default:c((()=>[m(A)?(i(),f(h,{key:0})):(i(),f(g,{key:1}))])),_:1})],2),d(Ze,{class:"tab-nav",type:"card",stretch:"",modelValue:m(o),"onUpdate:modelValue":s[3]||(s[3]=e=>y(o)?o.value=e:o=e),style:j(A.value?"overflow: auto;height:100%;flex-grow:1":"width: 0px;overflow: hidden;height:100%"),onTabChange:Ee},{default:c((()=>[d(Je,{label:"\u670d\u52a1\u5668\u5217\u8868",name:"serverList"},{default:c((()=>["serverList"==m(o)?(i(),f(F,{key:0,type:"primary",style:{"margin-left":"10px"},onClick:ze,size:"small"},{default:c((()=>s[15]||(s[15]=[p("\u6dfb\u52a0\u670d\u52a1\u5668")]))),_:1})):v("",!0),"serverList"==m(o)?(i(),f(He,{key:1,class:"leftct"},{default:c((()=>[_("div",X,[d(I,{placeholder:"\u8f93\u5165\u5173\u952e\u5b57\u8fdb\u884c\u8fc7\u6ee4",modelValue:m(ie),"onUpdate:modelValue":s[0]||(s[0]=e=>y(ie)?ie.value=e:ie=e),clearable:"",size:"small"},null,8,["modelValue"])]),x((i(),f(Ge,{class:"nopadding"},{default:c((()=>[d(De,{ref_key:"serverListRef",ref:ue,class:"menu","node-key":"id",data:m(me),props:m(de),"highlight-current":!0,"expand-on-click-node":!1,"filter-node-method":Re,onNodeClick:Be},{empty:c((()=>[d(W,{description:"\u6682\u65e0\u6570\u636e"})])),default:c((({node:e,data:l})=>[_("span",K,[_("span",Y,V(e.label),1),_("span",Q,[d(Ce,null,{default:c((()=>[d(oe,{effect:"dark",content:"\u8fde\u63a5\u7ec8\u7aef",placement:"top-start"},{default:c((()=>[d(F,{icon:"Connection",size:"small",onClick:w((e=>function(e){Me(e)}(l)),["stop"])},null,8,["onClick"])])),_:2},1024),d(oe,{effect:"dark",content:"\u7f16\u8f91",placement:"top-start"},{default:c((()=>[d(F,{icon:"edit",size:"small",onClick:w((e=>function(e){xe.value=!0,D((()=>{Ue.value.handleOpen(e,"\u7f16\u8f91\u670d\u52a1\u5668")}))}(l)),["stop"])},null,8,["onClick"])])),_:2},1024),d(oe,{effect:"dark",content:"\u5220\u9664",placement:"top-start"},{default:c((()=>[d(F,{icon:"delete",size:"small",onClick:w((e=>function(e,l){P.confirm(`\u786e\u5b9a\u5220\u9664 ${l.host} \u9879\u5417\uff1f`,"\u63d0\u793a",{type:"warning",confirmButtonText:"\u786e\u5b9a",cancelButtonText:"\u53d6\u6d88"}).then((()=>{se.value=!0,q.sysTerminalDelete({id:l.id}).then((e=>{if(se.value=!1,2e3==e.code){var a=ue.value.getCurrentKey();ue.value.remove(l.id),a==l.id&&(Oe(),B.success("\u5220\u9664\u6210\u529f"))}else P.alert(e.msg,"\u63d0\u793a",{type:"error"})}))})).catch((()=>{}))}(0,l)),["stop"])},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])])])),_:1},8,["data","props"])])),_:1})),[[ml,m(se)]])])),_:1})):v("",!0)])),_:1}),d(Je,{label:"\u5e38\u7528\u547d\u4ee4",name:"commonCmd"},{default:c((()=>["commonCmd"==m(o)?(i(),r("div",G,[d(F,{type:"primary",style:{"margin-left":"10px"},onClick:s[1]||(s[1]=e=>Ie(null,"add")),size:"small"},{default:c((()=>s[16]||(s[16]=[p("\u6dfb\u52a0\u547d\u4ee4")]))),_:1}),d(He,{class:"leftct"},{default:c((()=>[_("div",H,[d(I,{placeholder:"\u8f93\u5165\u5173\u952e\u5b57\u8fdb\u884c\u8fc7\u6ee4",modelValue:m(re),"onUpdate:modelValue":s[2]||(s[2]=e=>y(re)?re.value=e:re=e),clearable:"",size:"small"},null,8,["modelValue"])]),x((i(),f(Ge,{class:"nopadding"},{default:c((()=>[d(De,{ref_key:"commonCommandRef",ref:qe,class:"menu","node-key":"id",data:m(Le),props:m(ce),"highlight-current":!0,"expand-on-click-node":!1,"filter-node-method":We},{empty:c((()=>[d(W,{description:"\u6682\u65e0\u6570\u636e"})])),default:c((({node:e,data:l})=>[_("span",J,[_("span",Z,V(e.label),1),_("span",ee,[d(Ce,null,{default:c((()=>[d(oe,{effect:"dark",content:"\u7f16\u8f91",placement:"top-start"},{default:c((()=>[d(F,{icon:"edit",size:"small",onClick:w((e=>Ie(l,"edit")),["stop"])},null,8,["onClick"])])),_:2},1024),d(oe,{effect:"dark",content:"\u5220\u9664",placement:"top-start"},{default:c((()=>[d(F,{icon:"delete",size:"small",onClick:w((e=>Ie(l,"del")),["stop"])},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])])])),_:1},8,["data","props"])])),_:1})),[[ml,m(se)]])])),_:1})])):v("",!0)])),_:1})])),_:1},8,["modelValue","style"])]),_("div",le,[m(S)&&m(S).length>0&&!m(l)?(i(),f(b,{key:0,class:"set-full-screen",onClick:Ye},{default:c((()=>[d(el)])),_:1})):v("",!0),m(S)&&m(S).length>0&&m(l)?(i(),f(b,{key:1,class:"set-full-screen",onClick:Qe},{default:c((()=>[d(ll)])),_:1})):v("",!0),m(S)&&m(S).length>0?(i(),f(Ze,{key:2,type:"card",modelValue:m(L),"onUpdate:modelValue":s[7]||(s[7]=e=>y(L)?L.value=e:L=e),onContextmenu:s[8]||(s[8]=e=>function(e){var l=e.srcElement?e.srcElement:e.target;if("tab"==l.role){e.preventDefault();const a=l.id.match(/\d+/);ye.value=a?parseInt(a[0]):-1,pe.value=!0,fe.value=e.clientX+1,ve.value=e.clientY+1,D((()=>{let l=document.getElementById("lycontextmenu");document.body.offsetWidth-e.clientX<l.offsetWidth&&(fe.value=document.body.offsetWidth-l.offsetWidth-1,ve.value=e.clientY+1)}))}else if("SPAN"==l.tagName&&"tabinner"==l.role){e.preventDefault();const a=l.className.match(/\d+/);ye.value=a?parseInt(a[0]):-1,pe.value=!0,fe.value=e.clientX+1,ve.value=e.clientY+1,D((()=>{let l=document.getElementById("lycontextmenu");document.body.offsetWidth-e.clientX<l.offsetWidth&&(fe.value=document.body.offsetWidth-l.offsetWidth-1,ve.value=e.clientY+1)}))}else ye.value=-1}(e)),"before-leave":Pe,onTabChange:ge,onTabClick:s[9]||(s[9]=e=>{}),onEdit:be},{default:c((()=>[(i(!0),r(T,null,E(m(S),(e=>(i(),f(Je,{key:e.index,closable:!0,label:e.title,name:e.index},{label:c((()=>[_("div",ae,["online"===e.status?(i(),r("span",{key:0,role:"tabinner",class:C("ruyitabinner-"+e.index),style:j(`color: ${e.delayTime<200?"#33d94f":e.delayTime<600?"#cf8806":"#f44906"}; display: inline-flex; align-items: center`)},[d(b,null,{default:c((()=>[d(al)])),_:1})],6)):v("",!0),"closed"===e.status?(i(),f(oe,{key:1,content:"\u91cd\u65b0\u8fde\u63a5",placement:"top-start"},{default:c((()=>[d(F,{icon:"Refresh",style:{color:"var(--el-color-warning)"},size:"default",link:"",onClick:l=>function(e){let l=we.value[je(e.index)];l.isWebSocketOpen()&&l.onClose(),l.init("api/webssh/",`id=${e.id}`,"",""),Ae()}(e)},null,8,["onClick"])])),_:2},1024)):v("",!0),_("span",{role:"tabinner",class:C("ruyitabinner-"+e.index)},"\xa0"+V(e.title),3)])])),default:c((()=>[d(R,{ref_for:!0,ref:l=>((e,l)=>{e&&(we.value[je(l.index)]=e)})(l,e),onClosed:Ae},null,512),_("div",te,[d(nl,{persistent:!1,"popper-class":"select-cmd",teleported:!1,clearable:"",filterable:"",placeholder:"\u8bf7\u9009\u62e9",modelValue:m(t),"onUpdate:modelValue":s[4]||(s[4]=e=>y(t)?t.value=e:t=e),onChange:$e},{prefix:c((()=>s[17]||(s[17]=[p("\u5e38\u7528\u547d\u4ee4")]))),default:c((()=>[(i(!0),r(T,null,E(m(Le),(e=>(i(),f(tl,{key:e.id,label:e.name,value:e.shell},null,8,["label","value"])))),128))])),_:2},1032,["modelValue"]),d(I,{placeholder:"\u53d1\u9001\u81ea\u5b9a\u4e49\u547d\u4ee4",modelValue:m(n),"onUpdate:modelValue":s[6]||(s[6]=e=>y(n)?n.value=e:n=e),onKeyup:U(Xe,["enter"])},{prepend:c((()=>[d(ol,{label:"\u6240\u6709\u7ec8\u7aef",modelValue:m(a),"onUpdate:modelValue":s[5]||(s[5]=e=>y(a)?a.value=e:a=e)},null,8,["modelValue"])])),_:1},8,["modelValue"])])])),_:2},1032,["label","name"])))),128)),d(Je,{closable:!1,name:"addNewTabs"},{label:c((()=>[d(b,null,{default:c((()=>[d(sl)])),_:1})])),_:1})])),_:1},8,["modelValue"])):(i(),r("div",ne,s[18]||(s[18]=[_("ul",null,[_("li",null,[_("span",{class:"emptyTips-main"},"\u670d\u52a1\u5668\u5217\u8868 \u2192 \u70b9\u51fb\u670d\u52a1\u5668 "),_("span",null,"\u53ef\u8fdb\u884c\u670d\u52a1\u5668\u7ec8\u7aef\u8fde\u63a5")]),_("li",null,[_("span",{class:"emptyTips-main"},"\u670d\u52a1\u5668\u5217\u8868 \u2192 \u6dfb\u52a0/\u7f16\u8f91/\u5220\u9664\u6309\u94ae "),_("span",null,"\u53ef\u7ba1\u7406\u670d\u52a1\u5668\uff1a\u65b0\u589e/\u5220\u9664/\u7f16\u8f91\u7ec8\u7aef\u670d\u52a1\u5668")]),_("li",null,[_("span",{class:"emptyTips-main"},"\u5feb\u6377\u952e \u2192 CTRL + \u6eda\u52a8\u9f20\u6807 "),p("\u53ef\u8c03\u8282\u7ec8\u7aef\u5b57\u4f53\u5927\u5c0f")])],-1)])))]),d(O,{name:"el-zoom-in-top"},{default:c((()=>[x(_("ul",{style:j({left:m(fe)+"px",top:m(ve)+"px"}),class:"contextmenu",id:"lycontextmenu"},[_("li",{onClick:ke},[d(b,null,{default:c((()=>[d(ul)])),_:1}),s[19]||(s[19]=_("span",{class:"contextmenu-text"},"\u590d\u5236\u7a97\u53e3",-1))]),_("li",{onClick:s[10]||(s[10]=e=>_e("current"))},[d(b,null,{default:c((()=>[d(il)])),_:1}),s[20]||(s[20]=_("span",{class:"contextmenu-text"},"\u5173\u95ed\u5f53\u524d",-1))]),_("li",{onClick:s[11]||(s[11]=e=>_e("other"))},[d(b,null,{default:c((()=>[d(rl)])),_:1}),s[21]||(s[21]=_("span",{class:"contextmenu-text"},"\u5173\u95ed\u5176\u4ed6",-1))]),_("li",{onClick:s[12]||(s[12]=e=>_e("all"))},[d(b,null,{default:c((()=>[d(dl)])),_:1}),s[22]||(s[22]=_("span",{class:"contextmenu-text"},"\u5173\u95ed\u6240\u6709",-1))]),_("li",{onClick:he},[d(b,null,{default:c((()=>[d(cl)])),_:1}),s[23]||(s[23]=_("span",{class:"contextmenu-text"},"\u53d6\u6d88\u64cd\u4f5c",-1))])],4),[[z,m(pe)]])])),_:1}),m(xe)?(i(),f(M,{key:0,ref_key:"moduleServerFlag",ref:Ue,onRefreshConnect:Ne,onRefreshData:Oe,onClosed:s[13]||(s[13]=e=>y(xe)?xe.value=!1:xe=!1)},null,512)):v("",!0),m(Ve)?(i(),f(N,{key:1,ref_key:"moduleCommandFlag",ref:Se,onRefreshData:Fe,onClosed:s[14]||(s[14]=e=>y(Ve)?Ve.value=!1:Ve=!1)},null,512)):v("",!0)],512)}}},[["__scopeId","data-v-1bfb55cc"]]);export{oe as default};
