import{c as e,A as s}from"./index.D1mG68-9.js";import{_ as a}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{E as t,a as o}from"./element-plus.WT5mSVn7.js";import{b as n,k as i,j as l,ai as r,o as u,M as d,O as p,U as v,a as m,T as c,u as f,S as g,c as _,F as j,a8 as y,R as b,D as w}from"./@vue.BMBj57q3.js";import"./axios.3Xbkft1r.js";import"./crypto-js.CCePG2on.js";import"./@xterm.8vZnc5Va.js";import"./js-cookie.Ch5AnFJE.js";import"./vue-clipboard3.CjTOZN0C.js";import"./clipboard.55ERAcYO.js";import"./pinia.CfJUVU3l.js";import"./@element-plus.BcDOhvuq.js";import"./vue-router.CzFCPhwq.js";import"./nprogress.B5M_jmCc.js";import"./pinia-plugin-persistedstate.DTf8V5gU.js";import"./destr.ZpApkS-1.js";import"./deep-pick-omit.DP_A4OSP.js";import"./lodash-es.CjrOehCd.js";import"./@vueuse.B2CPJC1D.js";import"./@popperjs.CpAfbxx4.js";import"./@ctrl.D-8vaqgC.js";import"./dayjs.VYhIaz1R.js";import"./async-validator.Cuo4gI4y.js";import"./memoize-one.Ds0C_khL.js";import"./normalize-wheel-es.CUoAWVRo.js";import"./@floating-ui.yzr8CaSr.js";const x={class:"lyflex",style:{"margin-bottom":"15px","margin-top":"5px"}},h={class:"lyflex",style:{"margin-bottom":"15px"}},k={class:"versions"},I={class:"versions-select"},V=a({__name:"go",props:{data:{type:Object}},emits:["refreshStatus"],setup(a,{emit:V}){const T=e(),G=a;let L=n({id:null,name:"",status:!1,version:"",new_version:"",is_default:!1}),M=n("version"),z=n([]),B=i((()=>{let e="";return z.value.forEach((s=>{s.is_default&&(e=s.version)})),e}));function C(){T.loadingInfo.isLoading=!0,T.loadingInfo.content="\u52a0\u8f7d\u4e2d...",s.sysGetGolangMg({action:"list_version"}).then((e=>{T.loadingInfo.isLoading=!1,T.loadingInfo.content="",2e3==e.code?z.value=e.data:t.warning(e.msg)}))}function E(e){"version"==e.props.name&&C()}return l((()=>{L.value.id=G.data.id,L.value.name=G.data.name,L.value.status=G.data.status,L.value.version=G.data.version,L.value.is_default=G.data.is_default,L.value.new_version=L.value.version,C()})),(e,a)=>{const n=r("el-tag"),i=r("el-option"),l=r("el-select"),V=r("el-button"),G=r("el-tab-pane"),C=r("el-tabs");return u(),d(C,{"tab-position":"left",modelValue:f(M),"onUpdate:modelValue":a[2]||(a[2]=e=>w(M)?M.value=e:M=e),onTabClick:E},{default:p((()=>[v(G,{label:"\u7248\u672c\u7ba1\u7406",name:"version"},{default:p((()=>[m("div",x,[m("span",null,"\u5f53\u524d\u7248\u672c\uff1ago"+c(f(L).version),1),v(n,{style:{"margin-left":"5px"},type:f(L).is_default?"success":"danger"},{default:p((()=>[g(c(f(L).is_default?"\u9ed8\u8ba4\u7248\u672c":"\u975e\u9ed8\u8ba4\u7248\u672c"),1)])),_:1},8,["type"])]),m("div",h,[m("span",null,"\u9ed8\u8ba4\u7248\u672c\uff1ago"+c(f(B)),1)]),m("div",k,[a[5]||(a[5]=m("span",null,"\u5df2\u5b89\u88c5Go\u7248\u672c\uff1a",-1)),v(l,{modelValue:f(L).new_version,"onUpdate:modelValue":a[0]||(a[0]=e=>f(L).new_version=e),placeholder:"\u8bf7\u9009\u62e9",style:{width:"160px"},filterable:"",disabled:"edit"==e.actionType},{default:p((()=>[(u(!0),_(j,null,y(f(z),(e=>(u(),d(i,{key:e.version,label:e.version,value:e.version},{default:p((()=>[m("div",I,[m("div",null,c(e.version),1),e.is_default?(u(),d(n,{key:0,type:"success",style:{"margin-left":"10px"}},{default:p((()=>a[3]||(a[3]=[g("\u9ed8\u8ba4\u7248\u672c")]))),_:1})):b("",!0)])])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue","disabled"]),v(V,{style:{"margin-left":"15px"},type:"primary",onClick:a[1]||(a[1]=e=>{""!=L.value.new_version&&null!=L.value.new_version&&null!=L.value.new_version?o.confirm(`\u786e\u8ba4\u8981\u8bbe\u7f6e[${L.value.new_version}]\u7248\u672c\u4e3a\u9ed8\u8ba4\u5417\uff1f`,"\u8b66\u544a",{closeOnClickModal:!1,cancelButtonText:"\u53d6\u6d88",confirmButtonText:"\u786e\u5b9a",type:"warning"}).then((e=>{T.loadingInfo.content="\u8bbe\u7f6e\u4e2d...",T.loadingInfo.isLoading=!0,s.sysGolangMg({version:L.value.new_version,action:"set_default"}).then((e=>{T.loadingInfo.isLoading=!1,T.loadingInfo.content="",2e3==e.code?(t.success(e.msg),L.value.new_version==L.value.version?L.value.is_default=!0:L.value.is_default=!1,z.value.forEach((e=>{e.version==L.value.new_version?e.is_default=!0:e.is_default=!1}))):t.warning(e.msg)}))})).catch((()=>{})):t.warning("\u7248\u672c\u4e0d\u80fd\u4e3a\u7a7a")})},{default:p((()=>a[4]||(a[4]=[g("\u8bbe\u4e3a\u9ed8\u8ba4")]))),_:1})])])),_:1})])),_:1},8,["modelValue"])}}},[["__scopeId","data-v-5d27830d"]]);export{V as default};
